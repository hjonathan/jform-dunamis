{"remainingRequest":"/Users/qsrodri/pm4/jsonforms-vuetify-renderers/node_modules/babel-loader/lib/index.js!/Users/qsrodri/pm4/jsonforms-vuetify-renderers/node_modules/eslint-loader/index.js??ref--13-0!/Users/qsrodri/pm4/jsonforms-vuetify-renderers/vue2/lib/jsonforms-vue2.cjs.js","dependencies":[{"path":"/Users/qsrodri/pm4/jsonforms-vuetify-renderers/vue2/lib/jsonforms-vue2.cjs.js","mtime":1645670499217},{"path":"/Users/qsrodri/pm4/jsonforms-vuetify-renderers/node_modules/cache-loader/dist/cjs.js","mtime":1645670383911},{"path":"/Users/qsrodri/pm4/jsonforms-vuetify-renderers/node_modules/babel-loader/lib/index.js","mtime":1645670388105},{"path":"/Users/qsrodri/pm4/jsonforms-vuetify-renderers/node_modules/eslint-loader/index.js","mtime":1645670384358}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:J3VzZSBzdHJpY3QnOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvci5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9ycy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbi5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuaXRlcmF0b3IuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuZ2xvYmFsLXRoaXMuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuY29uc3RydWN0b3IuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS1idWZmZXIuY29uc3RydWN0b3IuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IuanMiKTsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBjb21wb3NpdGlvbkFwaSA9IHJlcXVpcmUoJ0B2dWUvY29tcG9zaXRpb24tYXBpJyk7Cgp2YXIgY29yZSA9IHJlcXVpcmUoJ0Bqc29uZm9ybXMvY29yZScpOwoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CgogICAgaWYgKGVudW1lcmFibGVPbmx5KSB7CiAgICAgIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7CiAgICAgIH0pOwogICAgfQoKICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsKICB9CgogIHJldHVybiBrZXlzOwp9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkMih0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOwogICAgICB9KTsKICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsKICAgIH0gZWxzZSB7CiAgICAgIG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOwogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mIjsKCiAgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIpIHsKICAgIF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgewogICAgICByZXR1cm4gdHlwZW9mIG9iajsKICAgIH07CiAgfSBlbHNlIHsKICAgIF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgewogICAgICByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOwogICAgfTsKICB9CgogIHJldHVybiBfdHlwZW9mKG9iaik7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9CgpmdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShzb3VyY2UsIGV4Y2x1ZGVkKSB7CiAgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307CiAgdmFyIHRhcmdldCA9IHt9OwogIHZhciBzb3VyY2VLZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTsKICB2YXIga2V5LCBpOwoKICBmb3IgKGkgPSAwOyBpIDwgc291cmNlS2V5cy5sZW5ndGg7IGkrKykgewogICAga2V5ID0gc291cmNlS2V5c1tpXTsKICAgIGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7CiAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOwogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKHNvdXJjZSwgZXhjbHVkZWQpIHsKICBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTsKCiAgdmFyIHRhcmdldCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpOwoKICB2YXIga2V5LCBpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHNvdXJjZVN5bWJvbEtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHNvdXJjZSk7CgogICAgZm9yIChpID0gMDsgaSA8IHNvdXJjZVN5bWJvbEtleXMubGVuZ3RoOyBpKyspIHsKICAgICAga2V5ID0gc291cmNlU3ltYm9sS2V5c1tpXTsKICAgICAgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTsKICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoc291cmNlLCBrZXkpKSBjb250aW51ZTsKICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCnZhciBzY3JpcHQkMyA9IGNvbXBvc2l0aW9uQXBpLmRlZmluZUNvbXBvbmVudCh7CiAgbmFtZTogJ3Vua25vd24tcmVuZGVyZXInCn0pOwoKZnVuY3Rpb24gbm9ybWFsaXplQ29tcG9uZW50KHRlbXBsYXRlLCBzdHlsZSwgc2NyaXB0LCBzY29wZUlkLCBpc0Z1bmN0aW9uYWxUZW1wbGF0ZSwgbW9kdWxlSWRlbnRpZmllcgovKiBzZXJ2ZXIgb25seSAqLwosIHNoYWRvd01vZGUsIGNyZWF0ZUluamVjdG9yLCBjcmVhdGVJbmplY3RvclNTUiwgY3JlYXRlSW5qZWN0b3JTaGFkb3cpIHsKICBpZiAodHlwZW9mIHNoYWRvd01vZGUgIT09ICdib29sZWFuJykgewogICAgY3JlYXRlSW5qZWN0b3JTU1IgPSBjcmVhdGVJbmplY3RvcjsKICAgIGNyZWF0ZUluamVjdG9yID0gc2hhZG93TW9kZTsKICAgIHNoYWRvd01vZGUgPSBmYWxzZTsKICB9IC8vIFZ1ZS5leHRlbmQgY29uc3RydWN0b3IgZXhwb3J0IGludGVyb3AuCgoKICB2YXIgb3B0aW9ucyA9IHR5cGVvZiBzY3JpcHQgPT09ICdmdW5jdGlvbicgPyBzY3JpcHQub3B0aW9ucyA6IHNjcmlwdDsgLy8gcmVuZGVyIGZ1bmN0aW9ucwoKICBpZiAodGVtcGxhdGUgJiYgdGVtcGxhdGUucmVuZGVyKSB7CiAgICBvcHRpb25zLnJlbmRlciA9IHRlbXBsYXRlLnJlbmRlcjsKICAgIG9wdGlvbnMuc3RhdGljUmVuZGVyRm5zID0gdGVtcGxhdGUuc3RhdGljUmVuZGVyRm5zOwogICAgb3B0aW9ucy5fY29tcGlsZWQgPSB0cnVlOyAvLyBmdW5jdGlvbmFsIHRlbXBsYXRlCgogICAgaWYgKGlzRnVuY3Rpb25hbFRlbXBsYXRlKSB7CiAgICAgIG9wdGlvbnMuZnVuY3Rpb25hbCA9IHRydWU7CiAgICB9CiAgfSAvLyBzY29wZWRJZAoKCiAgaWYgKHNjb3BlSWQpIHsKICAgIG9wdGlvbnMuX3Njb3BlSWQgPSBzY29wZUlkOwogIH0KCiAgdmFyIGhvb2s7CgogIGlmIChtb2R1bGVJZGVudGlmaWVyKSB7CiAgICAvLyBzZXJ2ZXIgYnVpbGQKICAgIGhvb2sgPSBmdW5jdGlvbiBob29rKGNvbnRleHQpIHsKICAgICAgLy8gMi4zIGluamVjdGlvbgogICAgICBjb250ZXh0ID0gY29udGV4dCB8fCB0aGlzLiR2bm9kZSAmJiB0aGlzLiR2bm9kZS5zc3JDb250ZXh0IHx8IHRoaXMucGFyZW50ICYmIHRoaXMucGFyZW50LiR2bm9kZSAmJiB0aGlzLnBhcmVudC4kdm5vZGUuc3NyQ29udGV4dDsgLy8gZnVuY3Rpb25hbAogICAgICAvLyAyLjIgd2l0aCBydW5Jbk5ld0NvbnRleHQ6IHRydWUKCiAgICAgIGlmICghY29udGV4dCAmJiB0eXBlb2YgX19WVUVfU1NSX0NPTlRFWFRfXyAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICBjb250ZXh0ID0gX19WVUVfU1NSX0NPTlRFWFRfXzsKICAgICAgfSAvLyBpbmplY3QgY29tcG9uZW50IHN0eWxlcwoKCiAgICAgIGlmIChzdHlsZSkgewogICAgICAgIHN0eWxlLmNhbGwodGhpcywgY3JlYXRlSW5qZWN0b3JTU1IoY29udGV4dCkpOwogICAgICB9IC8vIHJlZ2lzdGVyIGNvbXBvbmVudCBtb2R1bGUgaWRlbnRpZmllciBmb3IgYXN5bmMgY2h1bmsgaW5mZXJlbmNlCgoKICAgICAgaWYgKGNvbnRleHQgJiYgY29udGV4dC5fcmVnaXN0ZXJlZENvbXBvbmVudHMpIHsKICAgICAgICBjb250ZXh0Ll9yZWdpc3RlcmVkQ29tcG9uZW50cy5hZGQobW9kdWxlSWRlbnRpZmllcik7CiAgICAgIH0KICAgIH07IC8vIHVzZWQgYnkgc3NyIGluIGNhc2UgY29tcG9uZW50IGlzIGNhY2hlZCBhbmQgYmVmb3JlQ3JlYXRlCiAgICAvLyBuZXZlciBnZXRzIGNhbGxlZAoKCiAgICBvcHRpb25zLl9zc3JSZWdpc3RlciA9IGhvb2s7CiAgfSBlbHNlIGlmIChzdHlsZSkgewogICAgaG9vayA9IHNoYWRvd01vZGUgPyBmdW5jdGlvbiAoY29udGV4dCkgewogICAgICBzdHlsZS5jYWxsKHRoaXMsIGNyZWF0ZUluamVjdG9yU2hhZG93KGNvbnRleHQsIHRoaXMuJHJvb3QuJG9wdGlvbnMuc2hhZG93Um9vdCkpOwogICAgfSA6IGZ1bmN0aW9uIChjb250ZXh0KSB7CiAgICAgIHN0eWxlLmNhbGwodGhpcywgY3JlYXRlSW5qZWN0b3IoY29udGV4dCkpOwogICAgfTsKICB9CgogIGlmIChob29rKSB7CiAgICBpZiAob3B0aW9ucy5mdW5jdGlvbmFsKSB7CiAgICAgIC8vIHJlZ2lzdGVyIGZvciBmdW5jdGlvbmFsIGNvbXBvbmVudCBpbiB2dWUgZmlsZQogICAgICB2YXIgb3JpZ2luYWxSZW5kZXIgPSBvcHRpb25zLnJlbmRlcjsKCiAgICAgIG9wdGlvbnMucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyV2l0aFN0eWxlSW5qZWN0aW9uKGgsIGNvbnRleHQpIHsKICAgICAgICBob29rLmNhbGwoY29udGV4dCk7CiAgICAgICAgcmV0dXJuIG9yaWdpbmFsUmVuZGVyKGgsIGNvbnRleHQpOwogICAgICB9OwogICAgfSBlbHNlIHsKICAgICAgLy8gaW5qZWN0IGNvbXBvbmVudCByZWdpc3RyYXRpb24gYXMgYmVmb3JlQ3JlYXRlIGhvb2sKICAgICAgdmFyIGV4aXN0aW5nID0gb3B0aW9ucy5iZWZvcmVDcmVhdGU7CiAgICAgIG9wdGlvbnMuYmVmb3JlQ3JlYXRlID0gZXhpc3RpbmcgPyBbXS5jb25jYXQoZXhpc3RpbmcsIGhvb2spIDogW2hvb2tdOwogICAgfQogIH0KCiAgcmV0dXJuIHNjcmlwdDsKfQovKiBzY3JpcHQgKi8KCgp2YXIgX192dWVfc2NyaXB0X18kMyA9IHNjcmlwdCQzOwovKiB0ZW1wbGF0ZSAqLwoKdmFyIF9fdnVlX3JlbmRlcl9fJDMgPSBmdW5jdGlvbiBfX3Z1ZV9yZW5kZXJfXygpIHsKICB2YXIgX3ZtID0gdGhpczsKCiAgdmFyIF9oID0gX3ZtLiRjcmVhdGVFbGVtZW50OwoKICB2YXIgX2MgPSBfdm0uX3NlbGYuX2MgfHwgX2g7CgogIHJldHVybiBfYygnZGl2JywgW192bS5fdigiTm8gYXBwbGljYWJsZSByZW5kZXJlciBmb3VuZC4iKV0pOwp9OwoKdmFyIF9fdnVlX3N0YXRpY1JlbmRlckZuc19fJDMgPSBbXTsKLyogc3R5bGUgKi8KCnZhciBfX3Z1ZV9pbmplY3Rfc3R5bGVzX18kMyA9IHVuZGVmaW5lZDsKLyogc2NvcGVkICovCgp2YXIgX192dWVfc2NvcGVfaWRfXyQzID0gdW5kZWZpbmVkOwovKiBtb2R1bGUgaWRlbnRpZmllciAqLwoKdmFyIF9fdnVlX21vZHVsZV9pZGVudGlmaWVyX18kMyA9IHVuZGVmaW5lZDsKLyogZnVuY3Rpb25hbCB0ZW1wbGF0ZSAqLwoKdmFyIF9fdnVlX2lzX2Z1bmN0aW9uYWxfdGVtcGxhdGVfXyQzID0gZmFsc2U7Ci8qIHN0eWxlIGluamVjdCAqLwoKLyogc3R5bGUgaW5qZWN0IFNTUiAqLwoKLyogc3R5bGUgaW5qZWN0IHNoYWRvdyBkb20gKi8KCnZhciBfX3Z1ZV9jb21wb25lbnRfXyQzID0gLyojX19QVVJFX18qL25vcm1hbGl6ZUNvbXBvbmVudCh7CiAgcmVuZGVyOiBfX3Z1ZV9yZW5kZXJfXyQzLAogIHN0YXRpY1JlbmRlckZuczogX192dWVfc3RhdGljUmVuZGVyRm5zX18kMwp9LCBfX3Z1ZV9pbmplY3Rfc3R5bGVzX18kMywgX192dWVfc2NyaXB0X18kMywgX192dWVfc2NvcGVfaWRfXyQzLCBfX3Z1ZV9pc19mdW5jdGlvbmFsX3RlbXBsYXRlX18kMywgX192dWVfbW9kdWxlX2lkZW50aWZpZXJfXyQzLCBmYWxzZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7Cgp2YXIgY29tbW9uanNHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWxUaGlzIDogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB7fTsKCmZ1bmN0aW9uIGNyZWF0ZUNvbW1vbmpzTW9kdWxlKGZuLCBiYXNlZGlyLCBtb2R1bGUpIHsKICByZXR1cm4gbW9kdWxlID0gewogICAgcGF0aDogYmFzZWRpciwKICAgIGV4cG9ydHM6IHt9LAogICAgcmVxdWlyZTogZnVuY3Rpb24gcmVxdWlyZShwYXRoLCBiYXNlKSB7CiAgICAgIHJldHVybiBjb21tb25qc1JlcXVpcmUocGF0aCwgYmFzZSA9PT0gdW5kZWZpbmVkIHx8IGJhc2UgPT09IG51bGwgPyBtb2R1bGUucGF0aCA6IGJhc2UpOwogICAgfQogIH0sIGZuKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMpLCBtb2R1bGUuZXhwb3J0czsKfQoKZnVuY3Rpb24gY29tbW9uanNSZXF1aXJlKCkgewogIHRocm93IG5ldyBFcnJvcignRHluYW1pYyByZXF1aXJlcyBhcmUgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgYnkgQHJvbGx1cC9wbHVnaW4tY29tbW9uanMnKTsKfQovKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGdsb2JhbGAgZnJvbSBOb2RlLmpzLiAqLwoKCnZhciBmcmVlR2xvYmFsID0gX3R5cGVvZihjb21tb25qc0dsb2JhbCkgPT0gJ29iamVjdCcgJiYgY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuT2JqZWN0ID09PSBPYmplY3QgJiYgY29tbW9uanNHbG9iYWw7CnZhciBfZnJlZUdsb2JhbCA9IGZyZWVHbG9iYWw7Ci8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgc2VsZmAuICovCgp2YXIgZnJlZVNlbGYgPSAodHlwZW9mIHNlbGYgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mKHNlbGYpKSA9PSAnb2JqZWN0JyAmJiBzZWxmICYmIHNlbGYuT2JqZWN0ID09PSBPYmplY3QgJiYgc2VsZjsKLyoqIFVzZWQgYXMgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBvYmplY3QuICovCgp2YXIgcm9vdCA9IF9mcmVlR2xvYmFsIHx8IGZyZWVTZWxmIHx8IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7CnZhciBfcm9vdCA9IHJvb3Q7Ci8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqLwoKdmFyIF9TeW1ib2wyID0gX3Jvb3QuU3ltYm9sOwp2YXIgX1N5bWJvbCA9IF9TeW1ib2wyOwovKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovCgp2YXIgb2JqZWN0UHJvdG8kYiA9IE9iamVjdC5wcm90b3R5cGU7Ci8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqLwoKdmFyIGhhc093blByb3BlcnR5JDggPSBvYmplY3RQcm90byRiLmhhc093blByb3BlcnR5OwovKioKICogVXNlZCB0byByZXNvbHZlIHRoZQogKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZykKICogb2YgdmFsdWVzLgogKi8KCnZhciBuYXRpdmVPYmplY3RUb1N0cmluZyQxID0gb2JqZWN0UHJvdG8kYi50b1N0cmluZzsKLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovCgp2YXIgc3ltVG9TdHJpbmdUYWckMSA9IF9TeW1ib2wgPyBfU3ltYm9sLnRvU3RyaW5nVGFnIDogdW5kZWZpbmVkOwovKioKICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlR2V0VGFnYCB3aGljaCBpZ25vcmVzIGBTeW1ib2wudG9TdHJpbmdUYWdgIHZhbHVlcy4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcXVlcnkuCiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHJhdyBgdG9TdHJpbmdUYWdgLgogKi8KCmZ1bmN0aW9uIGdldFJhd1RhZyh2YWx1ZSkgewogIHZhciBpc093biA9IGhhc093blByb3BlcnR5JDguY2FsbCh2YWx1ZSwgc3ltVG9TdHJpbmdUYWckMSksCiAgICAgIHRhZyA9IHZhbHVlW3N5bVRvU3RyaW5nVGFnJDFdOwoKICB0cnkgewogICAgdmFsdWVbc3ltVG9TdHJpbmdUYWckMV0gPSB1bmRlZmluZWQ7CiAgICB2YXIgdW5tYXNrZWQgPSB0cnVlOwogIH0gY2F0Y2ggKGUpIHt9CgogIHZhciByZXN1bHQgPSBuYXRpdmVPYmplY3RUb1N0cmluZyQxLmNhbGwodmFsdWUpOwoKICBpZiAodW5tYXNrZWQpIHsKICAgIGlmIChpc093bikgewogICAgICB2YWx1ZVtzeW1Ub1N0cmluZ1RhZyQxXSA9IHRhZzsKICAgIH0gZWxzZSB7CiAgICAgIGRlbGV0ZSB2YWx1ZVtzeW1Ub1N0cmluZ1RhZyQxXTsKICAgIH0KICB9CgogIHJldHVybiByZXN1bHQ7Cn0KCnZhciBfZ2V0UmF3VGFnID0gZ2V0UmF3VGFnOwovKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovCgp2YXIgb2JqZWN0UHJvdG8kYSA9IE9iamVjdC5wcm90b3R5cGU7Ci8qKgogKiBVc2VkIHRvIHJlc29sdmUgdGhlCiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKQogKiBvZiB2YWx1ZXMuCiAqLwoKdmFyIG5hdGl2ZU9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8kYS50b1N0cmluZzsKLyoqCiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzdHJpbmcgdXNpbmcgYE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmdgLgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb252ZXJ0LgogKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBjb252ZXJ0ZWQgc3RyaW5nLgogKi8KCmZ1bmN0aW9uIG9iamVjdFRvU3RyaW5nKHZhbHVlKSB7CiAgcmV0dXJuIG5hdGl2ZU9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpOwp9Cgp2YXIgX29iamVjdFRvU3RyaW5nID0gb2JqZWN0VG9TdHJpbmc7Ci8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi8KCnZhciBudWxsVGFnID0gJ1tvYmplY3QgTnVsbF0nLAogICAgdW5kZWZpbmVkVGFnID0gJ1tvYmplY3QgVW5kZWZpbmVkXSc7Ci8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqLwoKdmFyIHN5bVRvU3RyaW5nVGFnID0gX1N5bWJvbCA/IF9TeW1ib2wudG9TdHJpbmdUYWcgOiB1bmRlZmluZWQ7Ci8qKgogKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgZ2V0VGFnYCB3aXRob3V0IGZhbGxiYWNrcyBmb3IgYnVnZ3kgZW52aXJvbm1lbnRzLgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBxdWVyeS4KICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgYHRvU3RyaW5nVGFnYC4KICovCgpmdW5jdGlvbiBiYXNlR2V0VGFnKHZhbHVlKSB7CiAgaWYgKHZhbHVlID09IG51bGwpIHsKICAgIHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkVGFnIDogbnVsbFRhZzsKICB9CgogIHJldHVybiBzeW1Ub1N0cmluZ1RhZyAmJiBzeW1Ub1N0cmluZ1RhZyBpbiBPYmplY3QodmFsdWUpID8gX2dldFJhd1RhZyh2YWx1ZSkgOiBfb2JqZWN0VG9TdHJpbmcodmFsdWUpOwp9Cgp2YXIgX2Jhc2VHZXRUYWcgPSBiYXNlR2V0VGFnOwovKioKICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuIEEgdmFsdWUgaXMgb2JqZWN0LWxpa2UgaWYgaXQncyBub3QgYG51bGxgCiAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgIm9iamVjdCIuCiAqCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIF8KICogQHNpbmNlIDQuMC4wCiAqIEBjYXRlZ29yeSBMYW5nCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLgogKiBAZXhhbXBsZQogKgogKiBfLmlzT2JqZWN0TGlrZSh7fSk7CiAqIC8vID0+IHRydWUKICoKICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTsKICogLy8gPT4gdHJ1ZQogKgogKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApOwogKiAvLyA9PiBmYWxzZQogKgogKiBfLmlzT2JqZWN0TGlrZShudWxsKTsKICogLy8gPT4gZmFsc2UKICovCgpmdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHsKICByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiBfdHlwZW9mKHZhbHVlKSA9PSAnb2JqZWN0JzsKfQoKdmFyIGlzT2JqZWN0TGlrZV8xID0gaXNPYmplY3RMaWtlOwovKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovCgp2YXIgc3ltYm9sVGFnJDEgPSAnW29iamVjdCBTeW1ib2xdJzsKLyoqCiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgU3ltYm9sYCBwcmltaXRpdmUgb3Igb2JqZWN0LgogKgogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBfCiAqIEBzaW5jZSA0LjAuMAogKiBAY2F0ZWdvcnkgTGFuZwogKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay4KICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBzeW1ib2wsIGVsc2UgYGZhbHNlYC4KICogQGV4YW1wbGUKICoKICogXy5pc1N5bWJvbChTeW1ib2wuaXRlcmF0b3IpOwogKiAvLyA9PiB0cnVlCiAqCiAqIF8uaXNTeW1ib2woJ2FiYycpOwogKiAvLyA9PiBmYWxzZQogKi8KCmZ1bmN0aW9uIGlzU3ltYm9sKHZhbHVlKSB7CiAgcmV0dXJuIF90eXBlb2YodmFsdWUpID09ICdzeW1ib2wnIHx8IGlzT2JqZWN0TGlrZV8xKHZhbHVlKSAmJiBfYmFzZUdldFRhZyh2YWx1ZSkgPT0gc3ltYm9sVGFnJDE7Cn0KCnZhciBpc1N5bWJvbF8xID0gaXNTeW1ib2w7Ci8qKgogKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBtZXRob2RzIGxpa2UgYF8ubWF4YCBhbmQgYF8ubWluYCB3aGljaCBhY2NlcHRzIGEKICogYGNvbXBhcmF0b3JgIHRvIGRldGVybWluZSB0aGUgZXh0cmVtdW0gdmFsdWUuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpdGVyYXRlIG92ZXIuCiAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBpdGVyYXRlZSBpbnZva2VkIHBlciBpdGVyYXRpb24uCiAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbXBhcmF0b3IgVGhlIGNvbXBhcmF0b3IgdXNlZCB0byBjb21wYXJlIHZhbHVlcy4KICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGV4dHJlbXVtIHZhbHVlLgogKi8KCmZ1bmN0aW9uIGJhc2VFeHRyZW11bShhcnJheSwgaXRlcmF0ZWUsIGNvbXBhcmF0b3IpIHsKICB2YXIgaW5kZXggPSAtMSwKICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoOwoKICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkgewogICAgdmFyIHZhbHVlID0gYXJyYXlbaW5kZXhdLAogICAgICAgIGN1cnJlbnQgPSBpdGVyYXRlZSh2YWx1ZSk7CgogICAgaWYgKGN1cnJlbnQgIT0gbnVsbCAmJiAoY29tcHV0ZWQgPT09IHVuZGVmaW5lZCA/IGN1cnJlbnQgPT09IGN1cnJlbnQgJiYgIWlzU3ltYm9sXzEoY3VycmVudCkgOiBjb21wYXJhdG9yKGN1cnJlbnQsIGNvbXB1dGVkKSkpIHsKICAgICAgdmFyIGNvbXB1dGVkID0gY3VycmVudCwKICAgICAgICAgIHJlc3VsdCA9IHZhbHVlOwogICAgfQogIH0KCiAgcmV0dXJuIHJlc3VsdDsKfQoKdmFyIF9iYXNlRXh0cmVtdW0gPSBiYXNlRXh0cmVtdW07Ci8qKgogKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5ndGAgd2hpY2ggZG9lc24ndCBjb2VyY2UgYXJndW1lbnRzLgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb21wYXJlLgogKiBAcGFyYW0geyp9IG90aGVyIFRoZSBvdGhlciB2YWx1ZSB0byBjb21wYXJlLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBncmVhdGVyIHRoYW4gYG90aGVyYCwKICogIGVsc2UgYGZhbHNlYC4KICovCgpmdW5jdGlvbiBiYXNlR3QodmFsdWUsIG90aGVyKSB7CiAgcmV0dXJuIHZhbHVlID4gb3RoZXI7Cn0KCnZhciBfYmFzZUd0ID0gYmFzZUd0OwovKioKICogUmVtb3ZlcyBhbGwga2V5LXZhbHVlIGVudHJpZXMgZnJvbSB0aGUgbGlzdCBjYWNoZS4KICoKICogQHByaXZhdGUKICogQG5hbWUgY2xlYXIKICogQG1lbWJlck9mIExpc3RDYWNoZQogKi8KCmZ1bmN0aW9uIGxpc3RDYWNoZUNsZWFyKCkgewogIHRoaXMuX19kYXRhX18gPSBbXTsKICB0aGlzLnNpemUgPSAwOwp9Cgp2YXIgX2xpc3RDYWNoZUNsZWFyID0gbGlzdENhY2hlQ2xlYXI7Ci8qKgogKiBQZXJmb3JtcyBhCiAqIFtgU2FtZVZhbHVlWmVyb2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXNhbWV2YWx1ZXplcm8pCiAqIGNvbXBhcmlzb24gYmV0d2VlbiB0d28gdmFsdWVzIHRvIGRldGVybWluZSBpZiB0aGV5IGFyZSBlcXVpdmFsZW50LgogKgogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBfCiAqIEBzaW5jZSA0LjAuMAogKiBAY2F0ZWdvcnkgTGFuZwogKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb21wYXJlLgogKiBAcGFyYW0geyp9IG90aGVyIFRoZSBvdGhlciB2YWx1ZSB0byBjb21wYXJlLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLgogKiBAZXhhbXBsZQogKgogKiB2YXIgb2JqZWN0ID0geyAnYSc6IDEgfTsKICogdmFyIG90aGVyID0geyAnYSc6IDEgfTsKICoKICogXy5lcShvYmplY3QsIG9iamVjdCk7CiAqIC8vID0+IHRydWUKICoKICogXy5lcShvYmplY3QsIG90aGVyKTsKICogLy8gPT4gZmFsc2UKICoKICogXy5lcSgnYScsICdhJyk7CiAqIC8vID0+IHRydWUKICoKICogXy5lcSgnYScsIE9iamVjdCgnYScpKTsKICogLy8gPT4gZmFsc2UKICoKICogXy5lcShOYU4sIE5hTik7CiAqIC8vID0+IHRydWUKICovCgpmdW5jdGlvbiBlcSh2YWx1ZSwgb3RoZXIpIHsKICByZXR1cm4gdmFsdWUgPT09IG90aGVyIHx8IHZhbHVlICE9PSB2YWx1ZSAmJiBvdGhlciAhPT0gb3RoZXI7Cn0KCnZhciBlcV8xID0gZXE7Ci8qKgogKiBHZXRzIHRoZSBpbmRleCBhdCB3aGljaCB0aGUgYGtleWAgaXMgZm91bmQgaW4gYGFycmF5YCBvZiBrZXktdmFsdWUgcGFpcnMuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpbnNwZWN0LgogKiBAcGFyYW0geyp9IGtleSBUaGUga2V5IHRvIHNlYXJjaCBmb3IuCiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBtYXRjaGVkIHZhbHVlLCBlbHNlIGAtMWAuCiAqLwoKZnVuY3Rpb24gYXNzb2NJbmRleE9mKGFycmF5LCBrZXkpIHsKICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoOwoKICB3aGlsZSAobGVuZ3RoLS0pIHsKICAgIGlmIChlcV8xKGFycmF5W2xlbmd0aF1bMF0sIGtleSkpIHsKICAgICAgcmV0dXJuIGxlbmd0aDsKICAgIH0KICB9CgogIHJldHVybiAtMTsKfQoKdmFyIF9hc3NvY0luZGV4T2YgPSBhc3NvY0luZGV4T2Y7Ci8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi8KCnZhciBhcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlOwovKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi8KCnZhciBzcGxpY2UgPSBhcnJheVByb3RvLnNwbGljZTsKLyoqCiAqIFJlbW92ZXMgYGtleWAgYW5kIGl0cyB2YWx1ZSBmcm9tIHRoZSBsaXN0IGNhY2hlLgogKgogKiBAcHJpdmF0ZQogKiBAbmFtZSBkZWxldGUKICogQG1lbWJlck9mIExpc3RDYWNoZQogKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS4KICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBlbnRyeSB3YXMgcmVtb3ZlZCwgZWxzZSBgZmFsc2VgLgogKi8KCmZ1bmN0aW9uIGxpc3RDYWNoZURlbGV0ZShrZXkpIHsKICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX18sCiAgICAgIGluZGV4ID0gX2Fzc29jSW5kZXhPZihkYXRhLCBrZXkpOwoKICBpZiAoaW5kZXggPCAwKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICB2YXIgbGFzdEluZGV4ID0gZGF0YS5sZW5ndGggLSAxOwoKICBpZiAoaW5kZXggPT0gbGFzdEluZGV4KSB7CiAgICBkYXRhLnBvcCgpOwogIH0gZWxzZSB7CiAgICBzcGxpY2UuY2FsbChkYXRhLCBpbmRleCwgMSk7CiAgfQoKICAtLXRoaXMuc2l6ZTsKICByZXR1cm4gdHJ1ZTsKfQoKdmFyIF9saXN0Q2FjaGVEZWxldGUgPSBsaXN0Q2FjaGVEZWxldGU7Ci8qKgogKiBHZXRzIHRoZSBsaXN0IGNhY2hlIHZhbHVlIGZvciBga2V5YC4KICoKICogQHByaXZhdGUKICogQG5hbWUgZ2V0CiAqIEBtZW1iZXJPZiBMaXN0Q2FjaGUKICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuCiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBlbnRyeSB2YWx1ZS4KICovCgpmdW5jdGlvbiBsaXN0Q2FjaGVHZXQoa2V5KSB7CiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fLAogICAgICBpbmRleCA9IF9hc3NvY0luZGV4T2YoZGF0YSwga2V5KTsKCiAgcmV0dXJuIGluZGV4IDwgMCA/IHVuZGVmaW5lZCA6IGRhdGFbaW5kZXhdWzFdOwp9Cgp2YXIgX2xpc3RDYWNoZUdldCA9IGxpc3RDYWNoZUdldDsKLyoqCiAqIENoZWNrcyBpZiBhIGxpc3QgY2FjaGUgdmFsdWUgZm9yIGBrZXlgIGV4aXN0cy4KICoKICogQHByaXZhdGUKICogQG5hbWUgaGFzCiAqIEBtZW1iZXJPZiBMaXN0Q2FjaGUKICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay4KICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFuIGVudHJ5IGZvciBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC4KICovCgpmdW5jdGlvbiBsaXN0Q2FjaGVIYXMoa2V5KSB7CiAgcmV0dXJuIF9hc3NvY0luZGV4T2YodGhpcy5fX2RhdGFfXywga2V5KSA+IC0xOwp9Cgp2YXIgX2xpc3RDYWNoZUhhcyA9IGxpc3RDYWNoZUhhczsKLyoqCiAqIFNldHMgdGhlIGxpc3QgY2FjaGUgYGtleWAgdG8gYHZhbHVlYC4KICoKICogQHByaXZhdGUKICogQG5hbWUgc2V0CiAqIEBtZW1iZXJPZiBMaXN0Q2FjaGUKICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBzZXQuCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC4KICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbGlzdCBjYWNoZSBpbnN0YW5jZS4KICovCgpmdW5jdGlvbiBsaXN0Q2FjaGVTZXQoa2V5LCB2YWx1ZSkgewogIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXywKICAgICAgaW5kZXggPSBfYXNzb2NJbmRleE9mKGRhdGEsIGtleSk7CgogIGlmIChpbmRleCA8IDApIHsKICAgICsrdGhpcy5zaXplOwogICAgZGF0YS5wdXNoKFtrZXksIHZhbHVlXSk7CiAgfSBlbHNlIHsKICAgIGRhdGFbaW5kZXhdWzFdID0gdmFsdWU7CiAgfQoKICByZXR1cm4gdGhpczsKfQoKdmFyIF9saXN0Q2FjaGVTZXQgPSBsaXN0Q2FjaGVTZXQ7Ci8qKgogKiBDcmVhdGVzIGFuIGxpc3QgY2FjaGUgb2JqZWN0LgogKgogKiBAcHJpdmF0ZQogKiBAY29uc3RydWN0b3IKICogQHBhcmFtIHtBcnJheX0gW2VudHJpZXNdIFRoZSBrZXktdmFsdWUgcGFpcnMgdG8gY2FjaGUuCiAqLwoKZnVuY3Rpb24gTGlzdENhY2hlKGVudHJpZXMpIHsKICB2YXIgaW5kZXggPSAtMSwKICAgICAgbGVuZ3RoID0gZW50cmllcyA9PSBudWxsID8gMCA6IGVudHJpZXMubGVuZ3RoOwogIHRoaXMuY2xlYXIoKTsKCiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHsKICAgIHZhciBlbnRyeSA9IGVudHJpZXNbaW5kZXhdOwogICAgdGhpcy5zZXQoZW50cnlbMF0sIGVudHJ5WzFdKTsKICB9Cn0gLy8gQWRkIG1ldGhvZHMgdG8gYExpc3RDYWNoZWAuCgoKTGlzdENhY2hlLnByb3RvdHlwZS5jbGVhciA9IF9saXN0Q2FjaGVDbGVhcjsKTGlzdENhY2hlLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBfbGlzdENhY2hlRGVsZXRlOwpMaXN0Q2FjaGUucHJvdG90eXBlLmdldCA9IF9saXN0Q2FjaGVHZXQ7Ckxpc3RDYWNoZS5wcm90b3R5cGUuaGFzID0gX2xpc3RDYWNoZUhhczsKTGlzdENhY2hlLnByb3RvdHlwZS5zZXQgPSBfbGlzdENhY2hlU2V0Owp2YXIgX0xpc3RDYWNoZSA9IExpc3RDYWNoZTsKLyoqCiAqIFJlbW92ZXMgYWxsIGtleS12YWx1ZSBlbnRyaWVzIGZyb20gdGhlIHN0YWNrLgogKgogKiBAcHJpdmF0ZQogKiBAbmFtZSBjbGVhcgogKiBAbWVtYmVyT2YgU3RhY2sKICovCgpmdW5jdGlvbiBzdGFja0NsZWFyKCkgewogIHRoaXMuX19kYXRhX18gPSBuZXcgX0xpc3RDYWNoZSgpOwogIHRoaXMuc2l6ZSA9IDA7Cn0KCnZhciBfc3RhY2tDbGVhciA9IHN0YWNrQ2xlYXI7Ci8qKgogKiBSZW1vdmVzIGBrZXlgIGFuZCBpdHMgdmFsdWUgZnJvbSB0aGUgc3RhY2suCiAqCiAqIEBwcml2YXRlCiAqIEBuYW1lIGRlbGV0ZQogKiBAbWVtYmVyT2YgU3RhY2sKICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byByZW1vdmUuCiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZW50cnkgd2FzIHJlbW92ZWQsIGVsc2UgYGZhbHNlYC4KICovCgpmdW5jdGlvbiBzdGFja0RlbGV0ZShrZXkpIHsKICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX18sCiAgICAgIHJlc3VsdCA9IGRhdGFbJ2RlbGV0ZSddKGtleSk7CiAgdGhpcy5zaXplID0gZGF0YS5zaXplOwogIHJldHVybiByZXN1bHQ7Cn0KCnZhciBfc3RhY2tEZWxldGUgPSBzdGFja0RlbGV0ZTsKLyoqCiAqIEdldHMgdGhlIHN0YWNrIHZhbHVlIGZvciBga2V5YC4KICoKICogQHByaXZhdGUKICogQG5hbWUgZ2V0CiAqIEBtZW1iZXJPZiBTdGFjawogKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC4KICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGVudHJ5IHZhbHVlLgogKi8KCmZ1bmN0aW9uIHN0YWNrR2V0KGtleSkgewogIHJldHVybiB0aGlzLl9fZGF0YV9fLmdldChrZXkpOwp9Cgp2YXIgX3N0YWNrR2V0ID0gc3RhY2tHZXQ7Ci8qKgogKiBDaGVja3MgaWYgYSBzdGFjayB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLgogKgogKiBAcHJpdmF0ZQogKiBAbmFtZSBoYXMKICogQG1lbWJlck9mIFN0YWNrCiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gY2hlY2suCiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbiBlbnRyeSBmb3IgYGtleWAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuCiAqLwoKZnVuY3Rpb24gc3RhY2tIYXMoa2V5KSB7CiAgcmV0dXJuIHRoaXMuX19kYXRhX18uaGFzKGtleSk7Cn0KCnZhciBfc3RhY2tIYXMgPSBzdGFja0hhczsKLyoqCiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZQogKiBbbGFuZ3VhZ2UgdHlwZV0oaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLWVjbWFzY3JpcHQtbGFuZ3VhZ2UtdHlwZXMpCiAqIG9mIGBPYmplY3RgLiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYCkKICoKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgXwogKiBAc2luY2UgMC4xLjAKICogQGNhdGVnb3J5IExhbmcKICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suCiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLgogKiBAZXhhbXBsZQogKgogKiBfLmlzT2JqZWN0KHt9KTsKICogLy8gPT4gdHJ1ZQogKgogKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7CiAqIC8vID0+IHRydWUKICoKICogXy5pc09iamVjdChfLm5vb3ApOwogKiAvLyA9PiB0cnVlCiAqCiAqIF8uaXNPYmplY3QobnVsbCk7CiAqIC8vID0+IGZhbHNlCiAqLwoKZnVuY3Rpb24gaXNPYmplY3QkMSh2YWx1ZSkgewogIHZhciB0eXBlID0gX3R5cGVvZih2YWx1ZSk7CgogIHJldHVybiB2YWx1ZSAhPSBudWxsICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7Cn0KCnZhciBpc09iamVjdF8xID0gaXNPYmplY3QkMTsKLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqLwoKdmFyIGFzeW5jVGFnID0gJ1tvYmplY3QgQXN5bmNGdW5jdGlvbl0nLAogICAgZnVuY1RhZyQxID0gJ1tvYmplY3QgRnVuY3Rpb25dJywKICAgIGdlblRhZyA9ICdbb2JqZWN0IEdlbmVyYXRvckZ1bmN0aW9uXScsCiAgICBwcm94eVRhZyA9ICdbb2JqZWN0IFByb3h5XSc7Ci8qKgogKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYEZ1bmN0aW9uYCBvYmplY3QuCiAqCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIF8KICogQHNpbmNlIDAuMS4wCiAqIEBjYXRlZ29yeSBMYW5nCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIGZ1bmN0aW9uLCBlbHNlIGBmYWxzZWAuCiAqIEBleGFtcGxlCiAqCiAqIF8uaXNGdW5jdGlvbihfKTsKICogLy8gPT4gdHJ1ZQogKgogKiBfLmlzRnVuY3Rpb24oL2FiYy8pOwogKiAvLyA9PiBmYWxzZQogKi8KCmZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpIHsKICBpZiAoIWlzT2JqZWN0XzEodmFsdWUpKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfSAvLyBUaGUgdXNlIG9mIGBPYmplY3QjdG9TdHJpbmdgIGF2b2lkcyBpc3N1ZXMgd2l0aCB0aGUgYHR5cGVvZmAgb3BlcmF0b3IKICAvLyBpbiBTYWZhcmkgOSB3aGljaCByZXR1cm5zICdvYmplY3QnIGZvciB0eXBlZCBhcnJheXMgYW5kIG90aGVyIGNvbnN0cnVjdG9ycy4KCgogIHZhciB0YWcgPSBfYmFzZUdldFRhZyh2YWx1ZSk7CgogIHJldHVybiB0YWcgPT0gZnVuY1RhZyQxIHx8IHRhZyA9PSBnZW5UYWcgfHwgdGFnID09IGFzeW5jVGFnIHx8IHRhZyA9PSBwcm94eVRhZzsKfQoKdmFyIGlzRnVuY3Rpb25fMSA9IGlzRnVuY3Rpb247Ci8qKiBVc2VkIHRvIGRldGVjdCBvdmVycmVhY2hpbmcgY29yZS1qcyBzaGltcy4gKi8KCnZhciBjb3JlSnNEYXRhID0gX3Jvb3RbJ19fY29yZS1qc19zaGFyZWRfXyddOwp2YXIgX2NvcmVKc0RhdGEgPSBjb3JlSnNEYXRhOwovKiogVXNlZCB0byBkZXRlY3QgbWV0aG9kcyBtYXNxdWVyYWRpbmcgYXMgbmF0aXZlLiAqLwoKdmFyIG1hc2tTcmNLZXkgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIHVpZCA9IC9bXi5dKyQvLmV4ZWMoX2NvcmVKc0RhdGEgJiYgX2NvcmVKc0RhdGEua2V5cyAmJiBfY29yZUpzRGF0YS5rZXlzLklFX1BST1RPIHx8ICcnKTsKICByZXR1cm4gdWlkID8gJ1N5bWJvbChzcmMpXzEuJyArIHVpZCA6ICcnOwp9KCk7Ci8qKgogKiBDaGVja3MgaWYgYGZ1bmNgIGhhcyBpdHMgc291cmNlIG1hc2tlZC4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gY2hlY2suCiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgZnVuY2AgaXMgbWFza2VkLCBlbHNlIGBmYWxzZWAuCiAqLwoKCmZ1bmN0aW9uIGlzTWFza2VkKGZ1bmMpIHsKICByZXR1cm4gISFtYXNrU3JjS2V5ICYmIG1hc2tTcmNLZXkgaW4gZnVuYzsKfQoKdmFyIF9pc01hc2tlZCA9IGlzTWFza2VkOwovKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovCgp2YXIgZnVuY1Byb3RvJDEgPSBGdW5jdGlvbi5wcm90b3R5cGU7Ci8qKiBVc2VkIHRvIHJlc29sdmUgdGhlIGRlY29tcGlsZWQgc291cmNlIG9mIGZ1bmN0aW9ucy4gKi8KCnZhciBmdW5jVG9TdHJpbmckMSA9IGZ1bmNQcm90byQxLnRvU3RyaW5nOwovKioKICogQ29udmVydHMgYGZ1bmNgIHRvIGl0cyBzb3VyY2UgY29kZS4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gY29udmVydC4KICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc291cmNlIGNvZGUuCiAqLwoKZnVuY3Rpb24gdG9Tb3VyY2UoZnVuYykgewogIGlmIChmdW5jICE9IG51bGwpIHsKICAgIHRyeSB7CiAgICAgIHJldHVybiBmdW5jVG9TdHJpbmckMS5jYWxsKGZ1bmMpOwogICAgfSBjYXRjaCAoZSkge30KCiAgICB0cnkgewogICAgICByZXR1cm4gZnVuYyArICcnOwogICAgfSBjYXRjaCAoZSkge30KICB9CgogIHJldHVybiAnJzsKfQoKdmFyIF90b1NvdXJjZSA9IHRvU291cmNlOwovKioKICogVXNlZCB0byBtYXRjaCBgUmVnRXhwYAogKiBbc3ludGF4IGNoYXJhY3RlcnNdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXBhdHRlcm5zKS4KICovCgp2YXIgcmVSZWdFeHBDaGFyID0gL1tcXF4kLiorPygpW1xde318XS9nOwovKiogVXNlZCB0byBkZXRlY3QgaG9zdCBjb25zdHJ1Y3RvcnMgKFNhZmFyaSkuICovCgp2YXIgcmVJc0hvc3RDdG9yID0gL15cW29iamVjdCAuKz9Db25zdHJ1Y3RvclxdJC87Ci8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi8KCnZhciBmdW5jUHJvdG8gPSBGdW5jdGlvbi5wcm90b3R5cGUsCiAgICBvYmplY3RQcm90byQ5ID0gT2JqZWN0LnByb3RvdHlwZTsKLyoqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgZGVjb21waWxlZCBzb3VyY2Ugb2YgZnVuY3Rpb25zLiAqLwoKdmFyIGZ1bmNUb1N0cmluZyA9IGZ1bmNQcm90by50b1N0cmluZzsKLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovCgp2YXIgaGFzT3duUHJvcGVydHkkNyA9IG9iamVjdFByb3RvJDkuaGFzT3duUHJvcGVydHk7Ci8qKiBVc2VkIHRvIGRldGVjdCBpZiBhIG1ldGhvZCBpcyBuYXRpdmUuICovCgp2YXIgcmVJc05hdGl2ZSA9IFJlZ0V4cCgnXicgKyBmdW5jVG9TdHJpbmcuY2FsbChoYXNPd25Qcm9wZXJ0eSQ3KS5yZXBsYWNlKHJlUmVnRXhwQ2hhciwgJ1xcJCYnKS5yZXBsYWNlKC9oYXNPd25Qcm9wZXJ0eXwoZnVuY3Rpb24pLio/KD89XFxcKCl8IGZvciAuKz8oPz1cXFxdKS9nLCAnJDEuKj8nKSArICckJyk7Ci8qKgogKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc05hdGl2ZWAgd2l0aG91dCBiYWQgc2hpbSBjaGVja3MuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIG5hdGl2ZSBmdW5jdGlvbiwKICogIGVsc2UgYGZhbHNlYC4KICovCgpmdW5jdGlvbiBiYXNlSXNOYXRpdmUodmFsdWUpIHsKICBpZiAoIWlzT2JqZWN0XzEodmFsdWUpIHx8IF9pc01hc2tlZCh2YWx1ZSkpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIHZhciBwYXR0ZXJuID0gaXNGdW5jdGlvbl8xKHZhbHVlKSA/IHJlSXNOYXRpdmUgOiByZUlzSG9zdEN0b3I7CiAgcmV0dXJuIHBhdHRlcm4udGVzdChfdG9Tb3VyY2UodmFsdWUpKTsKfQoKdmFyIF9iYXNlSXNOYXRpdmUgPSBiYXNlSXNOYXRpdmU7Ci8qKgogKiBHZXRzIHRoZSB2YWx1ZSBhdCBga2V5YCBvZiBgb2JqZWN0YC4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIFRoZSBvYmplY3QgdG8gcXVlcnkuCiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LgogKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUuCiAqLwoKZnVuY3Rpb24gZ2V0VmFsdWUob2JqZWN0LCBrZXkpIHsKICByZXR1cm4gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTsKfQoKdmFyIF9nZXRWYWx1ZSA9IGdldFZhbHVlOwovKioKICogR2V0cyB0aGUgbmF0aXZlIGZ1bmN0aW9uIGF0IGBrZXlgIG9mIGBvYmplY3RgLgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuCiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgbWV0aG9kIHRvIGdldC4KICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGZ1bmN0aW9uIGlmIGl0J3MgbmF0aXZlLCBlbHNlIGB1bmRlZmluZWRgLgogKi8KCmZ1bmN0aW9uIGdldE5hdGl2ZShvYmplY3QsIGtleSkgewogIHZhciB2YWx1ZSA9IF9nZXRWYWx1ZShvYmplY3QsIGtleSk7CgogIHJldHVybiBfYmFzZUlzTmF0aXZlKHZhbHVlKSA/IHZhbHVlIDogdW5kZWZpbmVkOwp9Cgp2YXIgX2dldE5hdGl2ZSA9IGdldE5hdGl2ZTsKLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgdGhhdCBhcmUgdmVyaWZpZWQgdG8gYmUgbmF0aXZlLiAqLwoKdmFyIE1hcCA9IF9nZXROYXRpdmUoX3Jvb3QsICdNYXAnKTsKCnZhciBfTWFwID0gTWFwOwovKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB0aGF0IGFyZSB2ZXJpZmllZCB0byBiZSBuYXRpdmUuICovCgp2YXIgbmF0aXZlQ3JlYXRlID0gX2dldE5hdGl2ZShPYmplY3QsICdjcmVhdGUnKTsKCnZhciBfbmF0aXZlQ3JlYXRlID0gbmF0aXZlQ3JlYXRlOwovKioKICogUmVtb3ZlcyBhbGwga2V5LXZhbHVlIGVudHJpZXMgZnJvbSB0aGUgaGFzaC4KICoKICogQHByaXZhdGUKICogQG5hbWUgY2xlYXIKICogQG1lbWJlck9mIEhhc2gKICovCgpmdW5jdGlvbiBoYXNoQ2xlYXIoKSB7CiAgdGhpcy5fX2RhdGFfXyA9IF9uYXRpdmVDcmVhdGUgPyBfbmF0aXZlQ3JlYXRlKG51bGwpIDoge307CiAgdGhpcy5zaXplID0gMDsKfQoKdmFyIF9oYXNoQ2xlYXIgPSBoYXNoQ2xlYXI7Ci8qKgogKiBSZW1vdmVzIGBrZXlgIGFuZCBpdHMgdmFsdWUgZnJvbSB0aGUgaGFzaC4KICoKICogQHByaXZhdGUKICogQG5hbWUgZGVsZXRlCiAqIEBtZW1iZXJPZiBIYXNoCiAqIEBwYXJhbSB7T2JqZWN0fSBoYXNoIFRoZSBoYXNoIHRvIG1vZGlmeS4KICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byByZW1vdmUuCiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZW50cnkgd2FzIHJlbW92ZWQsIGVsc2UgYGZhbHNlYC4KICovCgpmdW5jdGlvbiBoYXNoRGVsZXRlKGtleSkgewogIHZhciByZXN1bHQgPSB0aGlzLmhhcyhrZXkpICYmIGRlbGV0ZSB0aGlzLl9fZGF0YV9fW2tleV07CiAgdGhpcy5zaXplIC09IHJlc3VsdCA/IDEgOiAwOwogIHJldHVybiByZXN1bHQ7Cn0KCnZhciBfaGFzaERlbGV0ZSA9IGhhc2hEZWxldGU7Ci8qKiBVc2VkIHRvIHN0YW5kLWluIGZvciBgdW5kZWZpbmVkYCBoYXNoIHZhbHVlcy4gKi8KCnZhciBIQVNIX1VOREVGSU5FRCQyID0gJ19fbG9kYXNoX2hhc2hfdW5kZWZpbmVkX18nOwovKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovCgp2YXIgb2JqZWN0UHJvdG8kOCA9IE9iamVjdC5wcm90b3R5cGU7Ci8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqLwoKdmFyIGhhc093blByb3BlcnR5JDYgPSBvYmplY3RQcm90byQ4Lmhhc093blByb3BlcnR5OwovKioKICogR2V0cyB0aGUgaGFzaCB2YWx1ZSBmb3IgYGtleWAuCiAqCiAqIEBwcml2YXRlCiAqIEBuYW1lIGdldAogKiBAbWVtYmVyT2YgSGFzaAogKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC4KICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGVudHJ5IHZhbHVlLgogKi8KCmZ1bmN0aW9uIGhhc2hHZXQoa2V5KSB7CiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fOwoKICBpZiAoX25hdGl2ZUNyZWF0ZSkgewogICAgdmFyIHJlc3VsdCA9IGRhdGFba2V5XTsKICAgIHJldHVybiByZXN1bHQgPT09IEhBU0hfVU5ERUZJTkVEJDIgPyB1bmRlZmluZWQgOiByZXN1bHQ7CiAgfQoKICByZXR1cm4gaGFzT3duUHJvcGVydHkkNi5jYWxsKGRhdGEsIGtleSkgPyBkYXRhW2tleV0gOiB1bmRlZmluZWQ7Cn0KCnZhciBfaGFzaEdldCA9IGhhc2hHZXQ7Ci8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi8KCnZhciBvYmplY3RQcm90byQ3ID0gT2JqZWN0LnByb3RvdHlwZTsKLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovCgp2YXIgaGFzT3duUHJvcGVydHkkNSA9IG9iamVjdFByb3RvJDcuaGFzT3duUHJvcGVydHk7Ci8qKgogKiBDaGVja3MgaWYgYSBoYXNoIHZhbHVlIGZvciBga2V5YCBleGlzdHMuCiAqCiAqIEBwcml2YXRlCiAqIEBuYW1lIGhhcwogKiBAbWVtYmVyT2YgSGFzaAogKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGNoZWNrLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLgogKi8KCmZ1bmN0aW9uIGhhc2hIYXMoa2V5KSB7CiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fOwogIHJldHVybiBfbmF0aXZlQ3JlYXRlID8gZGF0YVtrZXldICE9PSB1bmRlZmluZWQgOiBoYXNPd25Qcm9wZXJ0eSQ1LmNhbGwoZGF0YSwga2V5KTsKfQoKdmFyIF9oYXNoSGFzID0gaGFzaEhhczsKLyoqIFVzZWQgdG8gc3RhbmQtaW4gZm9yIGB1bmRlZmluZWRgIGhhc2ggdmFsdWVzLiAqLwoKdmFyIEhBU0hfVU5ERUZJTkVEJDEgPSAnX19sb2Rhc2hfaGFzaF91bmRlZmluZWRfXyc7Ci8qKgogKiBTZXRzIHRoZSBoYXNoIGBrZXlgIHRvIGB2YWx1ZWAuCiAqCiAqIEBwcml2YXRlCiAqIEBuYW1lIHNldAogKiBAbWVtYmVyT2YgSGFzaAogKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHNldC4KICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LgogKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBoYXNoIGluc3RhbmNlLgogKi8KCmZ1bmN0aW9uIGhhc2hTZXQoa2V5LCB2YWx1ZSkgewogIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXzsKICB0aGlzLnNpemUgKz0gdGhpcy5oYXMoa2V5KSA/IDAgOiAxOwogIGRhdGFba2V5XSA9IF9uYXRpdmVDcmVhdGUgJiYgdmFsdWUgPT09IHVuZGVmaW5lZCA/IEhBU0hfVU5ERUZJTkVEJDEgOiB2YWx1ZTsKICByZXR1cm4gdGhpczsKfQoKdmFyIF9oYXNoU2V0ID0gaGFzaFNldDsKLyoqCiAqIENyZWF0ZXMgYSBoYXNoIG9iamVjdC4KICoKICogQHByaXZhdGUKICogQGNvbnN0cnVjdG9yCiAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLgogKi8KCmZ1bmN0aW9uIEhhc2goZW50cmllcykgewogIHZhciBpbmRleCA9IC0xLAogICAgICBsZW5ndGggPSBlbnRyaWVzID09IG51bGwgPyAwIDogZW50cmllcy5sZW5ndGg7CiAgdGhpcy5jbGVhcigpOwoKICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkgewogICAgdmFyIGVudHJ5ID0gZW50cmllc1tpbmRleF07CiAgICB0aGlzLnNldChlbnRyeVswXSwgZW50cnlbMV0pOwogIH0KfSAvLyBBZGQgbWV0aG9kcyB0byBgSGFzaGAuCgoKSGFzaC5wcm90b3R5cGUuY2xlYXIgPSBfaGFzaENsZWFyOwpIYXNoLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBfaGFzaERlbGV0ZTsKSGFzaC5wcm90b3R5cGUuZ2V0ID0gX2hhc2hHZXQ7Ckhhc2gucHJvdG90eXBlLmhhcyA9IF9oYXNoSGFzOwpIYXNoLnByb3RvdHlwZS5zZXQgPSBfaGFzaFNldDsKdmFyIF9IYXNoID0gSGFzaDsKLyoqCiAqIFJlbW92ZXMgYWxsIGtleS12YWx1ZSBlbnRyaWVzIGZyb20gdGhlIG1hcC4KICoKICogQHByaXZhdGUKICogQG5hbWUgY2xlYXIKICogQG1lbWJlck9mIE1hcENhY2hlCiAqLwoKZnVuY3Rpb24gbWFwQ2FjaGVDbGVhcigpIHsKICB0aGlzLnNpemUgPSAwOwogIHRoaXMuX19kYXRhX18gPSB7CiAgICAnaGFzaCc6IG5ldyBfSGFzaCgpLAogICAgJ21hcCc6IG5ldyAoX01hcCB8fCBfTGlzdENhY2hlKSgpLAogICAgJ3N0cmluZyc6IG5ldyBfSGFzaCgpCiAgfTsKfQoKdmFyIF9tYXBDYWNoZUNsZWFyID0gbWFwQ2FjaGVDbGVhcjsKLyoqCiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHN1aXRhYmxlIGZvciB1c2UgYXMgdW5pcXVlIG9iamVjdCBrZXkuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBzdWl0YWJsZSwgZWxzZSBgZmFsc2VgLgogKi8KCmZ1bmN0aW9uIGlzS2V5YWJsZSh2YWx1ZSkgewogIHZhciB0eXBlID0gX3R5cGVvZih2YWx1ZSk7CgogIHJldHVybiB0eXBlID09ICdzdHJpbmcnIHx8IHR5cGUgPT0gJ251bWJlcicgfHwgdHlwZSA9PSAnc3ltYm9sJyB8fCB0eXBlID09ICdib29sZWFuJyA/IHZhbHVlICE9PSAnX19wcm90b19fJyA6IHZhbHVlID09PSBudWxsOwp9Cgp2YXIgX2lzS2V5YWJsZSA9IGlzS2V5YWJsZTsKLyoqCiAqIEdldHMgdGhlIGRhdGEgZm9yIGBtYXBgLgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge09iamVjdH0gbWFwIFRoZSBtYXAgdG8gcXVlcnkuCiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIHJlZmVyZW5jZSBrZXkuCiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBtYXAgZGF0YS4KICovCgpmdW5jdGlvbiBnZXRNYXBEYXRhKG1hcCwga2V5KSB7CiAgdmFyIGRhdGEgPSBtYXAuX19kYXRhX187CiAgcmV0dXJuIF9pc0tleWFibGUoa2V5KSA/IGRhdGFbdHlwZW9mIGtleSA9PSAnc3RyaW5nJyA/ICdzdHJpbmcnIDogJ2hhc2gnXSA6IGRhdGEubWFwOwp9Cgp2YXIgX2dldE1hcERhdGEgPSBnZXRNYXBEYXRhOwovKioKICogUmVtb3ZlcyBga2V5YCBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIG1hcC4KICoKICogQHByaXZhdGUKICogQG5hbWUgZGVsZXRlCiAqIEBtZW1iZXJPZiBNYXBDYWNoZQogKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS4KICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBlbnRyeSB3YXMgcmVtb3ZlZCwgZWxzZSBgZmFsc2VgLgogKi8KCmZ1bmN0aW9uIG1hcENhY2hlRGVsZXRlKGtleSkgewogIHZhciByZXN1bHQgPSBfZ2V0TWFwRGF0YSh0aGlzLCBrZXkpWydkZWxldGUnXShrZXkpOwoKICB0aGlzLnNpemUgLT0gcmVzdWx0ID8gMSA6IDA7CiAgcmV0dXJuIHJlc3VsdDsKfQoKdmFyIF9tYXBDYWNoZURlbGV0ZSA9IG1hcENhY2hlRGVsZXRlOwovKioKICogR2V0cyB0aGUgbWFwIHZhbHVlIGZvciBga2V5YC4KICoKICogQHByaXZhdGUKICogQG5hbWUgZ2V0CiAqIEBtZW1iZXJPZiBNYXBDYWNoZQogKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC4KICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGVudHJ5IHZhbHVlLgogKi8KCmZ1bmN0aW9uIG1hcENhY2hlR2V0KGtleSkgewogIHJldHVybiBfZ2V0TWFwRGF0YSh0aGlzLCBrZXkpLmdldChrZXkpOwp9Cgp2YXIgX21hcENhY2hlR2V0ID0gbWFwQ2FjaGVHZXQ7Ci8qKgogKiBDaGVja3MgaWYgYSBtYXAgdmFsdWUgZm9yIGBrZXlgIGV4aXN0cy4KICoKICogQHByaXZhdGUKICogQG5hbWUgaGFzCiAqIEBtZW1iZXJPZiBNYXBDYWNoZQogKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGNoZWNrLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLgogKi8KCmZ1bmN0aW9uIG1hcENhY2hlSGFzKGtleSkgewogIHJldHVybiBfZ2V0TWFwRGF0YSh0aGlzLCBrZXkpLmhhcyhrZXkpOwp9Cgp2YXIgX21hcENhY2hlSGFzID0gbWFwQ2FjaGVIYXM7Ci8qKgogKiBTZXRzIHRoZSBtYXAgYGtleWAgdG8gYHZhbHVlYC4KICoKICogQHByaXZhdGUKICogQG5hbWUgc2V0CiAqIEBtZW1iZXJPZiBNYXBDYWNoZQogKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHNldC4KICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LgogKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBtYXAgY2FjaGUgaW5zdGFuY2UuCiAqLwoKZnVuY3Rpb24gbWFwQ2FjaGVTZXQoa2V5LCB2YWx1ZSkgewogIHZhciBkYXRhID0gX2dldE1hcERhdGEodGhpcywga2V5KSwKICAgICAgc2l6ZSA9IGRhdGEuc2l6ZTsKCiAgZGF0YS5zZXQoa2V5LCB2YWx1ZSk7CiAgdGhpcy5zaXplICs9IGRhdGEuc2l6ZSA9PSBzaXplID8gMCA6IDE7CiAgcmV0dXJuIHRoaXM7Cn0KCnZhciBfbWFwQ2FjaGVTZXQgPSBtYXBDYWNoZVNldDsKLyoqCiAqIENyZWF0ZXMgYSBtYXAgY2FjaGUgb2JqZWN0IHRvIHN0b3JlIGtleS12YWx1ZSBwYWlycy4KICoKICogQHByaXZhdGUKICogQGNvbnN0cnVjdG9yCiAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLgogKi8KCmZ1bmN0aW9uIE1hcENhY2hlKGVudHJpZXMpIHsKICB2YXIgaW5kZXggPSAtMSwKICAgICAgbGVuZ3RoID0gZW50cmllcyA9PSBudWxsID8gMCA6IGVudHJpZXMubGVuZ3RoOwogIHRoaXMuY2xlYXIoKTsKCiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHsKICAgIHZhciBlbnRyeSA9IGVudHJpZXNbaW5kZXhdOwogICAgdGhpcy5zZXQoZW50cnlbMF0sIGVudHJ5WzFdKTsKICB9Cn0gLy8gQWRkIG1ldGhvZHMgdG8gYE1hcENhY2hlYC4KCgpNYXBDYWNoZS5wcm90b3R5cGUuY2xlYXIgPSBfbWFwQ2FjaGVDbGVhcjsKTWFwQ2FjaGUucHJvdG90eXBlWydkZWxldGUnXSA9IF9tYXBDYWNoZURlbGV0ZTsKTWFwQ2FjaGUucHJvdG90eXBlLmdldCA9IF9tYXBDYWNoZUdldDsKTWFwQ2FjaGUucHJvdG90eXBlLmhhcyA9IF9tYXBDYWNoZUhhczsKTWFwQ2FjaGUucHJvdG90eXBlLnNldCA9IF9tYXBDYWNoZVNldDsKdmFyIF9NYXBDYWNoZSA9IE1hcENhY2hlOwovKiogVXNlZCBhcyB0aGUgc2l6ZSB0byBlbmFibGUgbGFyZ2UgYXJyYXkgb3B0aW1pemF0aW9ucy4gKi8KCnZhciBMQVJHRV9BUlJBWV9TSVpFID0gMjAwOwovKioKICogU2V0cyB0aGUgc3RhY2sgYGtleWAgdG8gYHZhbHVlYC4KICoKICogQHByaXZhdGUKICogQG5hbWUgc2V0CiAqIEBtZW1iZXJPZiBTdGFjawogKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHNldC4KICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LgogKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBzdGFjayBjYWNoZSBpbnN0YW5jZS4KICovCgpmdW5jdGlvbiBzdGFja1NldChrZXksIHZhbHVlKSB7CiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fOwoKICBpZiAoZGF0YSBpbnN0YW5jZW9mIF9MaXN0Q2FjaGUpIHsKICAgIHZhciBwYWlycyA9IGRhdGEuX19kYXRhX187CgogICAgaWYgKCFfTWFwIHx8IHBhaXJzLmxlbmd0aCA8IExBUkdFX0FSUkFZX1NJWkUgLSAxKSB7CiAgICAgIHBhaXJzLnB1c2goW2tleSwgdmFsdWVdKTsKICAgICAgdGhpcy5zaXplID0gKytkYXRhLnNpemU7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICAgIGRhdGEgPSB0aGlzLl9fZGF0YV9fID0gbmV3IF9NYXBDYWNoZShwYWlycyk7CiAgfQoKICBkYXRhLnNldChrZXksIHZhbHVlKTsKICB0aGlzLnNpemUgPSBkYXRhLnNpemU7CiAgcmV0dXJuIHRoaXM7Cn0KCnZhciBfc3RhY2tTZXQgPSBzdGFja1NldDsKLyoqCiAqIENyZWF0ZXMgYSBzdGFjayBjYWNoZSBvYmplY3QgdG8gc3RvcmUga2V5LXZhbHVlIHBhaXJzLgogKgogKiBAcHJpdmF0ZQogKiBAY29uc3RydWN0b3IKICogQHBhcmFtIHtBcnJheX0gW2VudHJpZXNdIFRoZSBrZXktdmFsdWUgcGFpcnMgdG8gY2FjaGUuCiAqLwoKZnVuY3Rpb24gU3RhY2soZW50cmllcykgewogIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXyA9IG5ldyBfTGlzdENhY2hlKGVudHJpZXMpOwogIHRoaXMuc2l6ZSA9IGRhdGEuc2l6ZTsKfSAvLyBBZGQgbWV0aG9kcyB0byBgU3RhY2tgLgoKClN0YWNrLnByb3RvdHlwZS5jbGVhciA9IF9zdGFja0NsZWFyOwpTdGFjay5wcm90b3R5cGVbJ2RlbGV0ZSddID0gX3N0YWNrRGVsZXRlOwpTdGFjay5wcm90b3R5cGUuZ2V0ID0gX3N0YWNrR2V0OwpTdGFjay5wcm90b3R5cGUuaGFzID0gX3N0YWNrSGFzOwpTdGFjay5wcm90b3R5cGUuc2V0ID0gX3N0YWNrU2V0Owp2YXIgX1N0YWNrID0gU3RhY2s7Ci8qKiBVc2VkIHRvIHN0YW5kLWluIGZvciBgdW5kZWZpbmVkYCBoYXNoIHZhbHVlcy4gKi8KCnZhciBIQVNIX1VOREVGSU5FRCA9ICdfX2xvZGFzaF9oYXNoX3VuZGVmaW5lZF9fJzsKLyoqCiAqIEFkZHMgYHZhbHVlYCB0byB0aGUgYXJyYXkgY2FjaGUuCiAqCiAqIEBwcml2YXRlCiAqIEBuYW1lIGFkZAogKiBAbWVtYmVyT2YgU2V0Q2FjaGUKICogQGFsaWFzIHB1c2gKICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2FjaGUuCiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGNhY2hlIGluc3RhbmNlLgogKi8KCmZ1bmN0aW9uIHNldENhY2hlQWRkKHZhbHVlKSB7CiAgdGhpcy5fX2RhdGFfXy5zZXQodmFsdWUsIEhBU0hfVU5ERUZJTkVEKTsKCiAgcmV0dXJuIHRoaXM7Cn0KCnZhciBfc2V0Q2FjaGVBZGQgPSBzZXRDYWNoZUFkZDsKLyoqCiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGluIHRoZSBhcnJheSBjYWNoZS4KICoKICogQHByaXZhdGUKICogQG5hbWUgaGFzCiAqIEBtZW1iZXJPZiBTZXRDYWNoZQogKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZWFyY2ggZm9yLgogKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGZvdW5kLCBlbHNlIGBmYWxzZWAuCiAqLwoKZnVuY3Rpb24gc2V0Q2FjaGVIYXModmFsdWUpIHsKICByZXR1cm4gdGhpcy5fX2RhdGFfXy5oYXModmFsdWUpOwp9Cgp2YXIgX3NldENhY2hlSGFzID0gc2V0Q2FjaGVIYXM7Ci8qKgogKgogKiBDcmVhdGVzIGFuIGFycmF5IGNhY2hlIG9iamVjdCB0byBzdG9yZSB1bmlxdWUgdmFsdWVzLgogKgogKiBAcHJpdmF0ZQogKiBAY29uc3RydWN0b3IKICogQHBhcmFtIHtBcnJheX0gW3ZhbHVlc10gVGhlIHZhbHVlcyB0byBjYWNoZS4KICovCgpmdW5jdGlvbiBTZXRDYWNoZSh2YWx1ZXMpIHsKICB2YXIgaW5kZXggPSAtMSwKICAgICAgbGVuZ3RoID0gdmFsdWVzID09IG51bGwgPyAwIDogdmFsdWVzLmxlbmd0aDsKICB0aGlzLl9fZGF0YV9fID0gbmV3IF9NYXBDYWNoZSgpOwoKICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkgewogICAgdGhpcy5hZGQodmFsdWVzW2luZGV4XSk7CiAgfQp9IC8vIEFkZCBtZXRob2RzIHRvIGBTZXRDYWNoZWAuCgoKU2V0Q2FjaGUucHJvdG90eXBlLmFkZCA9IFNldENhY2hlLnByb3RvdHlwZS5wdXNoID0gX3NldENhY2hlQWRkOwpTZXRDYWNoZS5wcm90b3R5cGUuaGFzID0gX3NldENhY2hlSGFzOwp2YXIgX1NldENhY2hlID0gU2V0Q2FjaGU7Ci8qKgogKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8uc29tZWAgZm9yIGFycmF5cyB3aXRob3V0IHN1cHBvcnQgZm9yIGl0ZXJhdGVlCiAqIHNob3J0aGFuZHMuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7QXJyYXl9IFthcnJheV0gVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci4KICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uCiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbnkgZWxlbWVudCBwYXNzZXMgdGhlIHByZWRpY2F0ZSBjaGVjaywKICogIGVsc2UgYGZhbHNlYC4KICovCgpmdW5jdGlvbiBhcnJheVNvbWUoYXJyYXksIHByZWRpY2F0ZSkgewogIHZhciBpbmRleCA9IC0xLAogICAgICBsZW5ndGggPSBhcnJheSA9PSBudWxsID8gMCA6IGFycmF5Lmxlbmd0aDsKCiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHsKICAgIGlmIChwcmVkaWNhdGUoYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0KCiAgcmV0dXJuIGZhbHNlOwp9Cgp2YXIgX2FycmF5U29tZSA9IGFycmF5U29tZTsKLyoqCiAqIENoZWNrcyBpZiBhIGBjYWNoZWAgdmFsdWUgZm9yIGBrZXlgIGV4aXN0cy4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtPYmplY3R9IGNhY2hlIFRoZSBjYWNoZSB0byBxdWVyeS4KICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay4KICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFuIGVudHJ5IGZvciBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC4KICovCgpmdW5jdGlvbiBjYWNoZUhhcyhjYWNoZSwga2V5KSB7CiAgcmV0dXJuIGNhY2hlLmhhcyhrZXkpOwp9Cgp2YXIgX2NhY2hlSGFzID0gY2FjaGVIYXM7Ci8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIHZhbHVlIGNvbXBhcmlzb25zLiAqLwoKdmFyIENPTVBBUkVfUEFSVElBTF9GTEFHJDUgPSAxLAogICAgQ09NUEFSRV9VTk9SREVSRURfRkxBRyQzID0gMjsKLyoqCiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxEZWVwYCBmb3IgYXJyYXlzIHdpdGggc3VwcG9ydCBmb3IKICogcGFydGlhbCBkZWVwIGNvbXBhcmlzb25zLgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gY29tcGFyZS4KICogQHBhcmFtIHtBcnJheX0gb3RoZXIgVGhlIG90aGVyIGFycmF5IHRvIGNvbXBhcmUuCiAqIEBwYXJhbSB7bnVtYmVyfSBiaXRtYXNrIFRoZSBiaXRtYXNrIGZsYWdzLiBTZWUgYGJhc2VJc0VxdWFsYCBmb3IgbW9yZSBkZXRhaWxzLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBjdXN0b21pemVyIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuCiAqIEBwYXJhbSB7RnVuY3Rpb259IGVxdWFsRnVuYyBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVxdWl2YWxlbnRzIG9mIHZhbHVlcy4KICogQHBhcmFtIHtPYmplY3R9IHN0YWNrIFRyYWNrcyB0cmF2ZXJzZWQgYGFycmF5YCBhbmQgYG90aGVyYCBvYmplY3RzLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGFycmF5cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLgogKi8KCmZ1bmN0aW9uIGVxdWFsQXJyYXlzKGFycmF5LCBvdGhlciwgYml0bWFzaywgY3VzdG9taXplciwgZXF1YWxGdW5jLCBzdGFjaykgewogIHZhciBpc1BhcnRpYWwgPSBiaXRtYXNrICYgQ09NUEFSRV9QQVJUSUFMX0ZMQUckNSwKICAgICAgYXJyTGVuZ3RoID0gYXJyYXkubGVuZ3RoLAogICAgICBvdGhMZW5ndGggPSBvdGhlci5sZW5ndGg7CgogIGlmIChhcnJMZW5ndGggIT0gb3RoTGVuZ3RoICYmICEoaXNQYXJ0aWFsICYmIG90aExlbmd0aCA+IGFyckxlbmd0aCkpIHsKICAgIHJldHVybiBmYWxzZTsKICB9IC8vIENoZWNrIHRoYXQgY3ljbGljIHZhbHVlcyBhcmUgZXF1YWwuCgoKICB2YXIgYXJyU3RhY2tlZCA9IHN0YWNrLmdldChhcnJheSk7CiAgdmFyIG90aFN0YWNrZWQgPSBzdGFjay5nZXQob3RoZXIpOwoKICBpZiAoYXJyU3RhY2tlZCAmJiBvdGhTdGFja2VkKSB7CiAgICByZXR1cm4gYXJyU3RhY2tlZCA9PSBvdGhlciAmJiBvdGhTdGFja2VkID09IGFycmF5OwogIH0KCiAgdmFyIGluZGV4ID0gLTEsCiAgICAgIHJlc3VsdCA9IHRydWUsCiAgICAgIHNlZW4gPSBiaXRtYXNrICYgQ09NUEFSRV9VTk9SREVSRURfRkxBRyQzID8gbmV3IF9TZXRDYWNoZSgpIDogdW5kZWZpbmVkOwogIHN0YWNrLnNldChhcnJheSwgb3RoZXIpOwogIHN0YWNrLnNldChvdGhlciwgYXJyYXkpOyAvLyBJZ25vcmUgbm9uLWluZGV4IHByb3BlcnRpZXMuCgogIHdoaWxlICgrK2luZGV4IDwgYXJyTGVuZ3RoKSB7CiAgICB2YXIgYXJyVmFsdWUgPSBhcnJheVtpbmRleF0sCiAgICAgICAgb3RoVmFsdWUgPSBvdGhlcltpbmRleF07CgogICAgaWYgKGN1c3RvbWl6ZXIpIHsKICAgICAgdmFyIGNvbXBhcmVkID0gaXNQYXJ0aWFsID8gY3VzdG9taXplcihvdGhWYWx1ZSwgYXJyVmFsdWUsIGluZGV4LCBvdGhlciwgYXJyYXksIHN0YWNrKSA6IGN1c3RvbWl6ZXIoYXJyVmFsdWUsIG90aFZhbHVlLCBpbmRleCwgYXJyYXksIG90aGVyLCBzdGFjayk7CiAgICB9CgogICAgaWYgKGNvbXBhcmVkICE9PSB1bmRlZmluZWQpIHsKICAgICAgaWYgKGNvbXBhcmVkKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KCiAgICAgIHJlc3VsdCA9IGZhbHNlOwogICAgICBicmVhazsKICAgIH0gLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBhcnJheXMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS4KCgogICAgaWYgKHNlZW4pIHsKICAgICAgaWYgKCFfYXJyYXlTb21lKG90aGVyLCBmdW5jdGlvbiAob3RoVmFsdWUsIG90aEluZGV4KSB7CiAgICAgICAgaWYgKCFfY2FjaGVIYXMoc2Vlbiwgb3RoSW5kZXgpICYmIChhcnJWYWx1ZSA9PT0gb3RoVmFsdWUgfHwgZXF1YWxGdW5jKGFyclZhbHVlLCBvdGhWYWx1ZSwgYml0bWFzaywgY3VzdG9taXplciwgc3RhY2spKSkgewogICAgICAgICAgcmV0dXJuIHNlZW4ucHVzaChvdGhJbmRleCk7CiAgICAgICAgfQogICAgICB9KSkgewogICAgICAgIHJlc3VsdCA9IGZhbHNlOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9IGVsc2UgaWYgKCEoYXJyVmFsdWUgPT09IG90aFZhbHVlIHx8IGVxdWFsRnVuYyhhcnJWYWx1ZSwgb3RoVmFsdWUsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIHN0YWNrKSkpIHsKICAgICAgcmVzdWx0ID0gZmFsc2U7CiAgICAgIGJyZWFrOwogICAgfQogIH0KCiAgc3RhY2tbJ2RlbGV0ZSddKGFycmF5KTsKICBzdGFja1snZGVsZXRlJ10ob3RoZXIpOwogIHJldHVybiByZXN1bHQ7Cn0KCnZhciBfZXF1YWxBcnJheXMgPSBlcXVhbEFycmF5czsKLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovCgp2YXIgVWludDhBcnJheSA9IF9yb290LlVpbnQ4QXJyYXk7CnZhciBfVWludDhBcnJheSA9IFVpbnQ4QXJyYXk7Ci8qKgogKiBDb252ZXJ0cyBgbWFwYCB0byBpdHMga2V5LXZhbHVlIHBhaXJzLgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge09iamVjdH0gbWFwIFRoZSBtYXAgdG8gY29udmVydC4KICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBrZXktdmFsdWUgcGFpcnMuCiAqLwoKZnVuY3Rpb24gbWFwVG9BcnJheShtYXApIHsKICB2YXIgaW5kZXggPSAtMSwKICAgICAgcmVzdWx0ID0gQXJyYXkobWFwLnNpemUpOwogIG1hcC5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7CiAgICByZXN1bHRbKytpbmRleF0gPSBba2V5LCB2YWx1ZV07CiAgfSk7CiAgcmV0dXJuIHJlc3VsdDsKfQoKdmFyIF9tYXBUb0FycmF5ID0gbWFwVG9BcnJheTsKLyoqCiAqIENvbnZlcnRzIGBzZXRgIHRvIGFuIGFycmF5IG9mIGl0cyB2YWx1ZXMuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7T2JqZWN0fSBzZXQgVGhlIHNldCB0byBjb252ZXJ0LgogKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHZhbHVlcy4KICovCgpmdW5jdGlvbiBzZXRUb0FycmF5KHNldCkgewogIHZhciBpbmRleCA9IC0xLAogICAgICByZXN1bHQgPSBBcnJheShzZXQuc2l6ZSk7CiAgc2V0LmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7CiAgICByZXN1bHRbKytpbmRleF0gPSB2YWx1ZTsKICB9KTsKICByZXR1cm4gcmVzdWx0Owp9Cgp2YXIgX3NldFRvQXJyYXkgPSBzZXRUb0FycmF5OwovKiogVXNlZCB0byBjb21wb3NlIGJpdG1hc2tzIGZvciB2YWx1ZSBjb21wYXJpc29ucy4gKi8KCnZhciBDT01QQVJFX1BBUlRJQUxfRkxBRyQ0ID0gMSwKICAgIENPTVBBUkVfVU5PUkRFUkVEX0ZMQUckMiA9IDI7Ci8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi8KCnZhciBib29sVGFnJDEgPSAnW29iamVjdCBCb29sZWFuXScsCiAgICBkYXRlVGFnJDEgPSAnW29iamVjdCBEYXRlXScsCiAgICBlcnJvclRhZyQxID0gJ1tvYmplY3QgRXJyb3JdJywKICAgIG1hcFRhZyQyID0gJ1tvYmplY3QgTWFwXScsCiAgICBudW1iZXJUYWckMSA9ICdbb2JqZWN0IE51bWJlcl0nLAogICAgcmVnZXhwVGFnJDEgPSAnW29iamVjdCBSZWdFeHBdJywKICAgIHNldFRhZyQyID0gJ1tvYmplY3QgU2V0XScsCiAgICBzdHJpbmdUYWckMSA9ICdbb2JqZWN0IFN0cmluZ10nLAogICAgc3ltYm9sVGFnID0gJ1tvYmplY3QgU3ltYm9sXSc7CnZhciBhcnJheUJ1ZmZlclRhZyQxID0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJywKICAgIGRhdGFWaWV3VGFnJDIgPSAnW29iamVjdCBEYXRhVmlld10nOwovKiogVXNlZCB0byBjb252ZXJ0IHN5bWJvbHMgdG8gcHJpbWl0aXZlcyBhbmQgc3RyaW5ncy4gKi8KCnZhciBzeW1ib2xQcm90byQxID0gX1N5bWJvbCA/IF9TeW1ib2wucHJvdG90eXBlIDogdW5kZWZpbmVkLAogICAgc3ltYm9sVmFsdWVPZiA9IHN5bWJvbFByb3RvJDEgPyBzeW1ib2xQcm90byQxLnZhbHVlT2YgOiB1bmRlZmluZWQ7Ci8qKgogKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsRGVlcGAgZm9yIGNvbXBhcmluZyBvYmplY3RzIG9mCiAqIHRoZSBzYW1lIGB0b1N0cmluZ1RhZ2AuCiAqCiAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIG9ubHkgc3VwcG9ydHMgY29tcGFyaW5nIHZhbHVlcyB3aXRoIHRhZ3Mgb2YKICogYEJvb2xlYW5gLCBgRGF0ZWAsIGBFcnJvcmAsIGBOdW1iZXJgLCBgUmVnRXhwYCwgb3IgYFN0cmluZ2AuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjb21wYXJlLgogKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLgogKiBAcGFyYW0ge3N0cmluZ30gdGFnIFRoZSBgdG9TdHJpbmdUYWdgIG9mIHRoZSBvYmplY3RzIHRvIGNvbXBhcmUuCiAqIEBwYXJhbSB7bnVtYmVyfSBiaXRtYXNrIFRoZSBiaXRtYXNrIGZsYWdzLiBTZWUgYGJhc2VJc0VxdWFsYCBmb3IgbW9yZSBkZXRhaWxzLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBjdXN0b21pemVyIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuCiAqIEBwYXJhbSB7RnVuY3Rpb259IGVxdWFsRnVuYyBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVxdWl2YWxlbnRzIG9mIHZhbHVlcy4KICogQHBhcmFtIHtPYmplY3R9IHN0YWNrIFRyYWNrcyB0cmF2ZXJzZWQgYG9iamVjdGAgYW5kIGBvdGhlcmAgb2JqZWN0cy4KICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuCiAqLwoKZnVuY3Rpb24gZXF1YWxCeVRhZyhvYmplY3QsIG90aGVyLCB0YWcsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIGVxdWFsRnVuYywgc3RhY2spIHsKICBzd2l0Y2ggKHRhZykgewogICAgY2FzZSBkYXRhVmlld1RhZyQyOgogICAgICBpZiAob2JqZWN0LmJ5dGVMZW5ndGggIT0gb3RoZXIuYnl0ZUxlbmd0aCB8fCBvYmplY3QuYnl0ZU9mZnNldCAhPSBvdGhlci5ieXRlT2Zmc2V0KSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICBvYmplY3QgPSBvYmplY3QuYnVmZmVyOwogICAgICBvdGhlciA9IG90aGVyLmJ1ZmZlcjsKCiAgICBjYXNlIGFycmF5QnVmZmVyVGFnJDE6CiAgICAgIGlmIChvYmplY3QuYnl0ZUxlbmd0aCAhPSBvdGhlci5ieXRlTGVuZ3RoIHx8ICFlcXVhbEZ1bmMobmV3IF9VaW50OEFycmF5KG9iamVjdCksIG5ldyBfVWludDhBcnJheShvdGhlcikpKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKCiAgICBjYXNlIGJvb2xUYWckMToKICAgIGNhc2UgZGF0ZVRhZyQxOgogICAgY2FzZSBudW1iZXJUYWckMToKICAgICAgLy8gQ29lcmNlIGJvb2xlYW5zIHRvIGAxYCBvciBgMGAgYW5kIGRhdGVzIHRvIG1pbGxpc2Vjb25kcy4KICAgICAgLy8gSW52YWxpZCBkYXRlcyBhcmUgY29lcmNlZCB0byBgTmFOYC4KICAgICAgcmV0dXJuIGVxXzEoK29iamVjdCwgK290aGVyKTsKCiAgICBjYXNlIGVycm9yVGFnJDE6CiAgICAgIHJldHVybiBvYmplY3QubmFtZSA9PSBvdGhlci5uYW1lICYmIG9iamVjdC5tZXNzYWdlID09IG90aGVyLm1lc3NhZ2U7CgogICAgY2FzZSByZWdleHBUYWckMToKICAgIGNhc2Ugc3RyaW5nVGFnJDE6CiAgICAgIC8vIENvZXJjZSByZWdleGVzIHRvIHN0cmluZ3MgYW5kIHRyZWF0IHN0cmluZ3MsIHByaW1pdGl2ZXMgYW5kIG9iamVjdHMsCiAgICAgIC8vIGFzIGVxdWFsLiBTZWUgaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXJlZ2V4cC5wcm90b3R5cGUudG9zdHJpbmcKICAgICAgLy8gZm9yIG1vcmUgZGV0YWlscy4KICAgICAgcmV0dXJuIG9iamVjdCA9PSBvdGhlciArICcnOwoKICAgIGNhc2UgbWFwVGFnJDI6CiAgICAgIHZhciBjb252ZXJ0ID0gX21hcFRvQXJyYXk7CgogICAgY2FzZSBzZXRUYWckMjoKICAgICAgdmFyIGlzUGFydGlhbCA9IGJpdG1hc2sgJiBDT01QQVJFX1BBUlRJQUxfRkxBRyQ0OwogICAgICBjb252ZXJ0IHx8IChjb252ZXJ0ID0gX3NldFRvQXJyYXkpOwoKICAgICAgaWYgKG9iamVjdC5zaXplICE9IG90aGVyLnNpemUgJiYgIWlzUGFydGlhbCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSAvLyBBc3N1bWUgY3ljbGljIHZhbHVlcyBhcmUgZXF1YWwuCgoKICAgICAgdmFyIHN0YWNrZWQgPSBzdGFjay5nZXQob2JqZWN0KTsKCiAgICAgIGlmIChzdGFja2VkKSB7CiAgICAgICAgcmV0dXJuIHN0YWNrZWQgPT0gb3RoZXI7CiAgICAgIH0KCiAgICAgIGJpdG1hc2sgfD0gQ09NUEFSRV9VTk9SREVSRURfRkxBRyQyOyAvLyBSZWN1cnNpdmVseSBjb21wYXJlIG9iamVjdHMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS4KCiAgICAgIHN0YWNrLnNldChvYmplY3QsIG90aGVyKTsKCiAgICAgIHZhciByZXN1bHQgPSBfZXF1YWxBcnJheXMoY29udmVydChvYmplY3QpLCBjb252ZXJ0KG90aGVyKSwgYml0bWFzaywgY3VzdG9taXplciwgZXF1YWxGdW5jLCBzdGFjayk7CgogICAgICBzdGFja1snZGVsZXRlJ10ob2JqZWN0KTsKICAgICAgcmV0dXJuIHJlc3VsdDsKCiAgICBjYXNlIHN5bWJvbFRhZzoKICAgICAgaWYgKHN5bWJvbFZhbHVlT2YpIHsKICAgICAgICByZXR1cm4gc3ltYm9sVmFsdWVPZi5jYWxsKG9iamVjdCkgPT0gc3ltYm9sVmFsdWVPZi5jYWxsKG90aGVyKTsKICAgICAgfQoKICB9CgogIHJldHVybiBmYWxzZTsKfQoKdmFyIF9lcXVhbEJ5VGFnID0gZXF1YWxCeVRhZzsKLyoqCiAqIEFwcGVuZHMgdGhlIGVsZW1lbnRzIG9mIGB2YWx1ZXNgIHRvIGBhcnJheWAuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBtb2RpZnkuCiAqIEBwYXJhbSB7QXJyYXl9IHZhbHVlcyBUaGUgdmFsdWVzIHRvIGFwcGVuZC4KICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGBhcnJheWAuCiAqLwoKZnVuY3Rpb24gYXJyYXlQdXNoKGFycmF5LCB2YWx1ZXMpIHsKICB2YXIgaW5kZXggPSAtMSwKICAgICAgbGVuZ3RoID0gdmFsdWVzLmxlbmd0aCwKICAgICAgb2Zmc2V0ID0gYXJyYXkubGVuZ3RoOwoKICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkgewogICAgYXJyYXlbb2Zmc2V0ICsgaW5kZXhdID0gdmFsdWVzW2luZGV4XTsKICB9CgogIHJldHVybiBhcnJheTsKfQoKdmFyIF9hcnJheVB1c2ggPSBhcnJheVB1c2g7Ci8qKgogKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGFuIGBBcnJheWAgb2JqZWN0LgogKgogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBfCiAqIEBzaW5jZSAwLjEuMAogKiBAY2F0ZWdvcnkgTGFuZwogKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay4KICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gYXJyYXksIGVsc2UgYGZhbHNlYC4KICogQGV4YW1wbGUKICoKICogXy5pc0FycmF5KFsxLCAyLCAzXSk7CiAqIC8vID0+IHRydWUKICoKICogXy5pc0FycmF5KGRvY3VtZW50LmJvZHkuY2hpbGRyZW4pOwogKiAvLyA9PiBmYWxzZQogKgogKiBfLmlzQXJyYXkoJ2FiYycpOwogKiAvLyA9PiBmYWxzZQogKgogKiBfLmlzQXJyYXkoXy5ub29wKTsKICogLy8gPT4gZmFsc2UKICovCgp2YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7CnZhciBpc0FycmF5XzEgPSBpc0FycmF5OwovKioKICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYGdldEFsbEtleXNgIGFuZCBgZ2V0QWxsS2V5c0luYCB3aGljaCB1c2VzCiAqIGBrZXlzRnVuY2AgYW5kIGBzeW1ib2xzRnVuY2AgdG8gZ2V0IHRoZSBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIGFuZAogKiBzeW1ib2xzIG9mIGBvYmplY3RgLgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuCiAqIEBwYXJhbSB7RnVuY3Rpb259IGtleXNGdW5jIFRoZSBmdW5jdGlvbiB0byBnZXQgdGhlIGtleXMgb2YgYG9iamVjdGAuCiAqIEBwYXJhbSB7RnVuY3Rpb259IHN5bWJvbHNGdW5jIFRoZSBmdW5jdGlvbiB0byBnZXQgdGhlIHN5bWJvbHMgb2YgYG9iamVjdGAuCiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMgYW5kIHN5bWJvbHMuCiAqLwoKZnVuY3Rpb24gYmFzZUdldEFsbEtleXMob2JqZWN0LCBrZXlzRnVuYywgc3ltYm9sc0Z1bmMpIHsKICB2YXIgcmVzdWx0ID0ga2V5c0Z1bmMob2JqZWN0KTsKICByZXR1cm4gaXNBcnJheV8xKG9iamVjdCkgPyByZXN1bHQgOiBfYXJyYXlQdXNoKHJlc3VsdCwgc3ltYm9sc0Z1bmMob2JqZWN0KSk7Cn0KCnZhciBfYmFzZUdldEFsbEtleXMgPSBiYXNlR2V0QWxsS2V5czsKLyoqCiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgXy5maWx0ZXJgIGZvciBhcnJheXMgd2l0aG91dCBzdXBwb3J0IGZvcgogKiBpdGVyYXRlZSBzaG9ydGhhbmRzLgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge0FycmF5fSBbYXJyYXldIFRoZSBhcnJheSB0byBpdGVyYXRlIG92ZXIuCiAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLgogKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBmaWx0ZXJlZCBhcnJheS4KICovCgpmdW5jdGlvbiBhcnJheUZpbHRlcihhcnJheSwgcHJlZGljYXRlKSB7CiAgdmFyIGluZGV4ID0gLTEsCiAgICAgIGxlbmd0aCA9IGFycmF5ID09IG51bGwgPyAwIDogYXJyYXkubGVuZ3RoLAogICAgICByZXNJbmRleCA9IDAsCiAgICAgIHJlc3VsdCA9IFtdOwoKICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkgewogICAgdmFyIHZhbHVlID0gYXJyYXlbaW5kZXhdOwoKICAgIGlmIChwcmVkaWNhdGUodmFsdWUsIGluZGV4LCBhcnJheSkpIHsKICAgICAgcmVzdWx0W3Jlc0luZGV4KytdID0gdmFsdWU7CiAgICB9CiAgfQoKICByZXR1cm4gcmVzdWx0Owp9Cgp2YXIgX2FycmF5RmlsdGVyID0gYXJyYXlGaWx0ZXI7Ci8qKgogKiBUaGlzIG1ldGhvZCByZXR1cm5zIGEgbmV3IGVtcHR5IGFycmF5LgogKgogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBfCiAqIEBzaW5jZSA0LjEzLjAKICogQGNhdGVnb3J5IFV0aWwKICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgZW1wdHkgYXJyYXkuCiAqIEBleGFtcGxlCiAqCiAqIHZhciBhcnJheXMgPSBfLnRpbWVzKDIsIF8uc3R1YkFycmF5KTsKICoKICogY29uc29sZS5sb2coYXJyYXlzKTsKICogLy8gPT4gW1tdLCBbXV0KICoKICogY29uc29sZS5sb2coYXJyYXlzWzBdID09PSBhcnJheXNbMV0pOwogKiAvLyA9PiBmYWxzZQogKi8KCmZ1bmN0aW9uIHN0dWJBcnJheSgpIHsKICByZXR1cm4gW107Cn0KCnZhciBzdHViQXJyYXlfMSA9IHN0dWJBcnJheTsKLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqLwoKdmFyIG9iamVjdFByb3RvJDYgPSBPYmplY3QucHJvdG90eXBlOwovKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi8KCnZhciBwcm9wZXJ0eUlzRW51bWVyYWJsZSQxID0gb2JqZWN0UHJvdG8kNi5wcm9wZXJ0eUlzRW51bWVyYWJsZTsKLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqLwoKdmFyIG5hdGl2ZUdldFN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzOwovKioKICogQ3JlYXRlcyBhbiBhcnJheSBvZiB0aGUgb3duIGVudW1lcmFibGUgc3ltYm9scyBvZiBgb2JqZWN0YC4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LgogKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHN5bWJvbHMuCiAqLwoKdmFyIGdldFN5bWJvbHMgPSAhbmF0aXZlR2V0U3ltYm9scyA/IHN0dWJBcnJheV8xIDogZnVuY3Rpb24gKG9iamVjdCkgewogIGlmIChvYmplY3QgPT0gbnVsbCkgewogICAgcmV0dXJuIFtdOwogIH0KCiAgb2JqZWN0ID0gT2JqZWN0KG9iamVjdCk7CiAgcmV0dXJuIF9hcnJheUZpbHRlcihuYXRpdmVHZXRTeW1ib2xzKG9iamVjdCksIGZ1bmN0aW9uIChzeW1ib2wpIHsKICAgIHJldHVybiBwcm9wZXJ0eUlzRW51bWVyYWJsZSQxLmNhbGwob2JqZWN0LCBzeW1ib2wpOwogIH0pOwp9Owp2YXIgX2dldFN5bWJvbHMgPSBnZXRTeW1ib2xzOwovKioKICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8udGltZXNgIHdpdGhvdXQgc3VwcG9ydCBmb3IgaXRlcmF0ZWUgc2hvcnRoYW5kcwogKiBvciBtYXggYXJyYXkgbGVuZ3RoIGNoZWNrcy4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtudW1iZXJ9IG4gVGhlIG51bWJlciBvZiB0aW1lcyB0byBpbnZva2UgYGl0ZXJhdGVlYC4KICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi4KICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiByZXN1bHRzLgogKi8KCmZ1bmN0aW9uIGJhc2VUaW1lcyhuLCBpdGVyYXRlZSkgewogIHZhciBpbmRleCA9IC0xLAogICAgICByZXN1bHQgPSBBcnJheShuKTsKCiAgd2hpbGUgKCsraW5kZXggPCBuKSB7CiAgICByZXN1bHRbaW5kZXhdID0gaXRlcmF0ZWUoaW5kZXgpOwogIH0KCiAgcmV0dXJuIHJlc3VsdDsKfQoKdmFyIF9iYXNlVGltZXMgPSBiYXNlVGltZXM7Ci8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi8KCnZhciBhcmdzVGFnJDIgPSAnW29iamVjdCBBcmd1bWVudHNdJzsKLyoqCiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzQXJndW1lbnRzYC4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suCiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIGBhcmd1bWVudHNgIG9iamVjdCwKICovCgpmdW5jdGlvbiBiYXNlSXNBcmd1bWVudHModmFsdWUpIHsKICByZXR1cm4gaXNPYmplY3RMaWtlXzEodmFsdWUpICYmIF9iYXNlR2V0VGFnKHZhbHVlKSA9PSBhcmdzVGFnJDI7Cn0KCnZhciBfYmFzZUlzQXJndW1lbnRzID0gYmFzZUlzQXJndW1lbnRzOwovKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovCgp2YXIgb2JqZWN0UHJvdG8kNSA9IE9iamVjdC5wcm90b3R5cGU7Ci8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqLwoKdmFyIGhhc093blByb3BlcnR5JDQgPSBvYmplY3RQcm90byQ1Lmhhc093blByb3BlcnR5OwovKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi8KCnZhciBwcm9wZXJ0eUlzRW51bWVyYWJsZSA9IG9iamVjdFByb3RvJDUucHJvcGVydHlJc0VudW1lcmFibGU7Ci8qKgogKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBsaWtlbHkgYW4gYGFyZ3VtZW50c2Agb2JqZWN0LgogKgogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBfCiAqIEBzaW5jZSAwLjEuMAogKiBAY2F0ZWdvcnkgTGFuZwogKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay4KICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gYGFyZ3VtZW50c2Agb2JqZWN0LAogKiAgZWxzZSBgZmFsc2VgLgogKiBAZXhhbXBsZQogKgogKiBfLmlzQXJndW1lbnRzKGZ1bmN0aW9uKCkgeyByZXR1cm4gYXJndW1lbnRzOyB9KCkpOwogKiAvLyA9PiB0cnVlCiAqCiAqIF8uaXNBcmd1bWVudHMoWzEsIDIsIDNdKTsKICogLy8gPT4gZmFsc2UKICovCgp2YXIgaXNBcmd1bWVudHMgPSBfYmFzZUlzQXJndW1lbnRzKGZ1bmN0aW9uICgpIHsKICByZXR1cm4gYXJndW1lbnRzOwp9KCkpID8gX2Jhc2VJc0FyZ3VtZW50cyA6IGZ1bmN0aW9uICh2YWx1ZSkgewogIHJldHVybiBpc09iamVjdExpa2VfMSh2YWx1ZSkgJiYgaGFzT3duUHJvcGVydHkkNC5jYWxsKHZhbHVlLCAnY2FsbGVlJykgJiYgIXByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwodmFsdWUsICdjYWxsZWUnKTsKfTsKdmFyIGlzQXJndW1lbnRzXzEgPSBpc0FyZ3VtZW50czsKLyoqCiAqIFRoaXMgbWV0aG9kIHJldHVybnMgYGZhbHNlYC4KICoKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgXwogKiBAc2luY2UgNC4xMy4wCiAqIEBjYXRlZ29yeSBVdGlsCiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGBmYWxzZWAuCiAqIEBleGFtcGxlCiAqCiAqIF8udGltZXMoMiwgXy5zdHViRmFsc2UpOwogKiAvLyA9PiBbZmFsc2UsIGZhbHNlXQogKi8KCmZ1bmN0aW9uIHN0dWJGYWxzZSgpIHsKICByZXR1cm4gZmFsc2U7Cn0KCnZhciBzdHViRmFsc2VfMSA9IHN0dWJGYWxzZTsKdmFyIGlzQnVmZmVyXzEgPSBjcmVhdGVDb21tb25qc01vZHVsZShmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBleHBvcnRzYC4gKi8KICB2YXIgZnJlZUV4cG9ydHMgPSBleHBvcnRzICYmICFleHBvcnRzLm5vZGVUeXBlICYmIGV4cG9ydHM7CiAgLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBtb2R1bGVgLiAqLwoKICB2YXIgZnJlZU1vZHVsZSA9IGZyZWVFeHBvcnRzICYmICdvYmplY3QnID09ICdvYmplY3QnICYmIG1vZHVsZSAmJiAhbW9kdWxlLm5vZGVUeXBlICYmIG1vZHVsZTsKICAvKiogRGV0ZWN0IHRoZSBwb3B1bGFyIENvbW1vbkpTIGV4dGVuc2lvbiBgbW9kdWxlLmV4cG9ydHNgLiAqLwoKICB2YXIgbW9kdWxlRXhwb3J0cyA9IGZyZWVNb2R1bGUgJiYgZnJlZU1vZHVsZS5leHBvcnRzID09PSBmcmVlRXhwb3J0czsKICAvKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi8KCiAgdmFyIEJ1ZmZlciA9IG1vZHVsZUV4cG9ydHMgPyBfcm9vdC5CdWZmZXIgOiB1bmRlZmluZWQ7CiAgLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqLwoKICB2YXIgbmF0aXZlSXNCdWZmZXIgPSBCdWZmZXIgPyBCdWZmZXIuaXNCdWZmZXIgOiB1bmRlZmluZWQ7CiAgLyoqCiAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBidWZmZXIuCiAgICoKICAgKiBAc3RhdGljCiAgICogQG1lbWJlck9mIF8KICAgKiBAc2luY2UgNC4zLjAKICAgKiBAY2F0ZWdvcnkgTGFuZwogICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLgogICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgYnVmZmVyLCBlbHNlIGBmYWxzZWAuCiAgICogQGV4YW1wbGUKICAgKgogICAqIF8uaXNCdWZmZXIobmV3IEJ1ZmZlcigyKSk7CiAgICogLy8gPT4gdHJ1ZQogICAqCiAgICogXy5pc0J1ZmZlcihuZXcgVWludDhBcnJheSgyKSk7CiAgICogLy8gPT4gZmFsc2UKICAgKi8KCiAgdmFyIGlzQnVmZmVyID0gbmF0aXZlSXNCdWZmZXIgfHwgc3R1YkZhbHNlXzE7CiAgbW9kdWxlLmV4cG9ydHMgPSBpc0J1ZmZlcjsKfSk7Ci8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqLwoKdmFyIE1BWF9TQUZFX0lOVEVHRVIkMSA9IDkwMDcxOTkyNTQ3NDA5OTE7Ci8qKiBVc2VkIHRvIGRldGVjdCB1bnNpZ25lZCBpbnRlZ2VyIHZhbHVlcy4gKi8KCnZhciByZUlzVWludCA9IC9eKD86MHxbMS05XVxkKikkLzsKLyoqCiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBpbmRleC4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suCiAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoPU1BWF9TQUZFX0lOVEVHRVJdIFRoZSB1cHBlciBib3VuZHMgb2YgYSB2YWxpZCBpbmRleC4KICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBpbmRleCwgZWxzZSBgZmFsc2VgLgogKi8KCmZ1bmN0aW9uIGlzSW5kZXgodmFsdWUsIGxlbmd0aCkgewogIHZhciB0eXBlID0gX3R5cGVvZih2YWx1ZSk7CgogIGxlbmd0aCA9IGxlbmd0aCA9PSBudWxsID8gTUFYX1NBRkVfSU5URUdFUiQxIDogbGVuZ3RoOwogIHJldHVybiAhIWxlbmd0aCAmJiAodHlwZSA9PSAnbnVtYmVyJyB8fCB0eXBlICE9ICdzeW1ib2wnICYmIHJlSXNVaW50LnRlc3QodmFsdWUpKSAmJiB2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDwgbGVuZ3RoOwp9Cgp2YXIgX2lzSW5kZXggPSBpc0luZGV4OwovKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi8KCnZhciBNQVhfU0FGRV9JTlRFR0VSID0gOTAwNzE5OTI1NDc0MDk5MTsKLyoqCiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBsZW5ndGguCiAqCiAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBsb29zZWx5IGJhc2VkIG9uCiAqIFtgVG9MZW5ndGhgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy10b2xlbmd0aCkuCiAqCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIF8KICogQHNpbmNlIDQuMC4wCiAqIEBjYXRlZ29yeSBMYW5nCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGxlbmd0aCwgZWxzZSBgZmFsc2VgLgogKiBAZXhhbXBsZQogKgogKiBfLmlzTGVuZ3RoKDMpOwogKiAvLyA9PiB0cnVlCiAqCiAqIF8uaXNMZW5ndGgoTnVtYmVyLk1JTl9WQUxVRSk7CiAqIC8vID0+IGZhbHNlCiAqCiAqIF8uaXNMZW5ndGgoSW5maW5pdHkpOwogKiAvLyA9PiBmYWxzZQogKgogKiBfLmlzTGVuZ3RoKCczJyk7CiAqIC8vID0+IGZhbHNlCiAqLwoKZnVuY3Rpb24gaXNMZW5ndGgodmFsdWUpIHsKICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdudW1iZXInICYmIHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPD0gTUFYX1NBRkVfSU5URUdFUjsKfQoKdmFyIGlzTGVuZ3RoXzEgPSBpc0xlbmd0aDsKLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqLwoKdmFyIGFyZ3NUYWckMSA9ICdbb2JqZWN0IEFyZ3VtZW50c10nLAogICAgYXJyYXlUYWckMSA9ICdbb2JqZWN0IEFycmF5XScsCiAgICBib29sVGFnID0gJ1tvYmplY3QgQm9vbGVhbl0nLAogICAgZGF0ZVRhZyA9ICdbb2JqZWN0IERhdGVdJywKICAgIGVycm9yVGFnID0gJ1tvYmplY3QgRXJyb3JdJywKICAgIGZ1bmNUYWcgPSAnW29iamVjdCBGdW5jdGlvbl0nLAogICAgbWFwVGFnJDEgPSAnW29iamVjdCBNYXBdJywKICAgIG51bWJlclRhZyA9ICdbb2JqZWN0IE51bWJlcl0nLAogICAgb2JqZWN0VGFnJDIgPSAnW29iamVjdCBPYmplY3RdJywKICAgIHJlZ2V4cFRhZyA9ICdbb2JqZWN0IFJlZ0V4cF0nLAogICAgc2V0VGFnJDEgPSAnW29iamVjdCBTZXRdJywKICAgIHN0cmluZ1RhZyA9ICdbb2JqZWN0IFN0cmluZ10nLAogICAgd2Vha01hcFRhZyQxID0gJ1tvYmplY3QgV2Vha01hcF0nOwp2YXIgYXJyYXlCdWZmZXJUYWcgPSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nLAogICAgZGF0YVZpZXdUYWckMSA9ICdbb2JqZWN0IERhdGFWaWV3XScsCiAgICBmbG9hdDMyVGFnID0gJ1tvYmplY3QgRmxvYXQzMkFycmF5XScsCiAgICBmbG9hdDY0VGFnID0gJ1tvYmplY3QgRmxvYXQ2NEFycmF5XScsCiAgICBpbnQ4VGFnID0gJ1tvYmplY3QgSW50OEFycmF5XScsCiAgICBpbnQxNlRhZyA9ICdbb2JqZWN0IEludDE2QXJyYXldJywKICAgIGludDMyVGFnID0gJ1tvYmplY3QgSW50MzJBcnJheV0nLAogICAgdWludDhUYWcgPSAnW29iamVjdCBVaW50OEFycmF5XScsCiAgICB1aW50OENsYW1wZWRUYWcgPSAnW29iamVjdCBVaW50OENsYW1wZWRBcnJheV0nLAogICAgdWludDE2VGFnID0gJ1tvYmplY3QgVWludDE2QXJyYXldJywKICAgIHVpbnQzMlRhZyA9ICdbb2JqZWN0IFVpbnQzMkFycmF5XSc7Ci8qKiBVc2VkIHRvIGlkZW50aWZ5IGB0b1N0cmluZ1RhZ2AgdmFsdWVzIG9mIHR5cGVkIGFycmF5cy4gKi8KCnZhciB0eXBlZEFycmF5VGFncyA9IHt9Owp0eXBlZEFycmF5VGFnc1tmbG9hdDMyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2Zsb2F0NjRUYWddID0gdHlwZWRBcnJheVRhZ3NbaW50OFRhZ10gPSB0eXBlZEFycmF5VGFnc1tpbnQxNlRhZ10gPSB0eXBlZEFycmF5VGFnc1tpbnQzMlRhZ10gPSB0eXBlZEFycmF5VGFnc1t1aW50OFRhZ10gPSB0eXBlZEFycmF5VGFnc1t1aW50OENsYW1wZWRUYWddID0gdHlwZWRBcnJheVRhZ3NbdWludDE2VGFnXSA9IHR5cGVkQXJyYXlUYWdzW3VpbnQzMlRhZ10gPSB0cnVlOwp0eXBlZEFycmF5VGFnc1thcmdzVGFnJDFdID0gdHlwZWRBcnJheVRhZ3NbYXJyYXlUYWckMV0gPSB0eXBlZEFycmF5VGFnc1thcnJheUJ1ZmZlclRhZ10gPSB0eXBlZEFycmF5VGFnc1tib29sVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2RhdGFWaWV3VGFnJDFdID0gdHlwZWRBcnJheVRhZ3NbZGF0ZVRhZ10gPSB0eXBlZEFycmF5VGFnc1tlcnJvclRhZ10gPSB0eXBlZEFycmF5VGFnc1tmdW5jVGFnXSA9IHR5cGVkQXJyYXlUYWdzW21hcFRhZyQxXSA9IHR5cGVkQXJyYXlUYWdzW251bWJlclRhZ10gPSB0eXBlZEFycmF5VGFnc1tvYmplY3RUYWckMl0gPSB0eXBlZEFycmF5VGFnc1tyZWdleHBUYWddID0gdHlwZWRBcnJheVRhZ3Nbc2V0VGFnJDFdID0gdHlwZWRBcnJheVRhZ3Nbc3RyaW5nVGFnXSA9IHR5cGVkQXJyYXlUYWdzW3dlYWtNYXBUYWckMV0gPSBmYWxzZTsKLyoqCiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzVHlwZWRBcnJheWAgd2l0aG91dCBOb2RlLmpzIG9wdGltaXphdGlvbnMuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHR5cGVkIGFycmF5LCBlbHNlIGBmYWxzZWAuCiAqLwoKZnVuY3Rpb24gYmFzZUlzVHlwZWRBcnJheSh2YWx1ZSkgewogIHJldHVybiBpc09iamVjdExpa2VfMSh2YWx1ZSkgJiYgaXNMZW5ndGhfMSh2YWx1ZS5sZW5ndGgpICYmICEhdHlwZWRBcnJheVRhZ3NbX2Jhc2VHZXRUYWcodmFsdWUpXTsKfQoKdmFyIF9iYXNlSXNUeXBlZEFycmF5ID0gYmFzZUlzVHlwZWRBcnJheTsKLyoqCiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnVuYXJ5YCB3aXRob3V0IHN1cHBvcnQgZm9yIHN0b3JpbmcgbWV0YWRhdGEuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGNhcCBhcmd1bWVudHMgZm9yLgogKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBjYXBwZWQgZnVuY3Rpb24uCiAqLwoKZnVuY3Rpb24gYmFzZVVuYXJ5KGZ1bmMpIHsKICByZXR1cm4gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICByZXR1cm4gZnVuYyh2YWx1ZSk7CiAgfTsKfQoKdmFyIF9iYXNlVW5hcnkgPSBiYXNlVW5hcnk7Cgp2YXIgX25vZGVVdGlsID0gY3JlYXRlQ29tbW9uanNNb2R1bGUoZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogIC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZXhwb3J0c2AuICovCiAgdmFyIGZyZWVFeHBvcnRzID0gZXhwb3J0cyAmJiAhZXhwb3J0cy5ub2RlVHlwZSAmJiBleHBvcnRzOwogIC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgbW9kdWxlYC4gKi8KCiAgdmFyIGZyZWVNb2R1bGUgPSBmcmVlRXhwb3J0cyAmJiAnb2JqZWN0JyA9PSAnb2JqZWN0JyAmJiBtb2R1bGUgJiYgIW1vZHVsZS5ub2RlVHlwZSAmJiBtb2R1bGU7CiAgLyoqIERldGVjdCB0aGUgcG9wdWxhciBDb21tb25KUyBleHRlbnNpb24gYG1vZHVsZS5leHBvcnRzYC4gKi8KCiAgdmFyIG1vZHVsZUV4cG9ydHMgPSBmcmVlTW9kdWxlICYmIGZyZWVNb2R1bGUuZXhwb3J0cyA9PT0gZnJlZUV4cG9ydHM7CiAgLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBwcm9jZXNzYCBmcm9tIE5vZGUuanMuICovCgogIHZhciBmcmVlUHJvY2VzcyA9IG1vZHVsZUV4cG9ydHMgJiYgX2ZyZWVHbG9iYWwucHJvY2VzczsKICAvKiogVXNlZCB0byBhY2Nlc3MgZmFzdGVyIE5vZGUuanMgaGVscGVycy4gKi8KCiAgdmFyIG5vZGVVdGlsID0gZnVuY3Rpb24gKCkgewogICAgdHJ5IHsKICAgICAgLy8gVXNlIGB1dGlsLnR5cGVzYCBmb3IgTm9kZS5qcyAxMCsuCiAgICAgIHZhciB0eXBlcyA9IGZyZWVNb2R1bGUgJiYgZnJlZU1vZHVsZS5yZXF1aXJlICYmIGZyZWVNb2R1bGUucmVxdWlyZSgndXRpbCcpLnR5cGVzOwoKICAgICAgaWYgKHR5cGVzKSB7CiAgICAgICAgcmV0dXJuIHR5cGVzOwogICAgICB9IC8vIExlZ2FjeSBgcHJvY2Vzcy5iaW5kaW5nKCd1dGlsJylgIGZvciBOb2RlLmpzIDwgMTAuCgoKICAgICAgcmV0dXJuIGZyZWVQcm9jZXNzICYmIGZyZWVQcm9jZXNzLmJpbmRpbmcgJiYgZnJlZVByb2Nlc3MuYmluZGluZygndXRpbCcpOwogICAgfSBjYXRjaCAoZSkge30KICB9KCk7CgogIG1vZHVsZS5leHBvcnRzID0gbm9kZVV0aWw7Cn0pOwovKiBOb2RlLmpzIGhlbHBlciByZWZlcmVuY2VzLiAqLwoKCnZhciBub2RlSXNUeXBlZEFycmF5ID0gX25vZGVVdGlsICYmIF9ub2RlVXRpbC5pc1R5cGVkQXJyYXk7Ci8qKgogKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgdHlwZWQgYXJyYXkuCiAqCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIF8KICogQHNpbmNlIDMuMC4wCiAqIEBjYXRlZ29yeSBMYW5nCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHR5cGVkIGFycmF5LCBlbHNlIGBmYWxzZWAuCiAqIEBleGFtcGxlCiAqCiAqIF8uaXNUeXBlZEFycmF5KG5ldyBVaW50OEFycmF5KTsKICogLy8gPT4gdHJ1ZQogKgogKiBfLmlzVHlwZWRBcnJheShbXSk7CiAqIC8vID0+IGZhbHNlCiAqLwoKdmFyIGlzVHlwZWRBcnJheSA9IG5vZGVJc1R5cGVkQXJyYXkgPyBfYmFzZVVuYXJ5KG5vZGVJc1R5cGVkQXJyYXkpIDogX2Jhc2VJc1R5cGVkQXJyYXk7CnZhciBpc1R5cGVkQXJyYXlfMSA9IGlzVHlwZWRBcnJheTsKLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqLwoKdmFyIG9iamVjdFByb3RvJDQgPSBPYmplY3QucHJvdG90eXBlOwovKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi8KCnZhciBoYXNPd25Qcm9wZXJ0eSQzID0gb2JqZWN0UHJvdG8kNC5oYXNPd25Qcm9wZXJ0eTsKLyoqCiAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdGhlIGVudW1lcmFibGUgcHJvcGVydHkgbmFtZXMgb2YgdGhlIGFycmF5LWxpa2UgYHZhbHVlYC4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcXVlcnkuCiAqIEBwYXJhbSB7Ym9vbGVhbn0gaW5oZXJpdGVkIFNwZWNpZnkgcmV0dXJuaW5nIGluaGVyaXRlZCBwcm9wZXJ0eSBuYW1lcy4KICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy4KICovCgpmdW5jdGlvbiBhcnJheUxpa2VLZXlzKHZhbHVlLCBpbmhlcml0ZWQpIHsKICB2YXIgaXNBcnIgPSBpc0FycmF5XzEodmFsdWUpLAogICAgICBpc0FyZyA9ICFpc0FyciAmJiBpc0FyZ3VtZW50c18xKHZhbHVlKSwKICAgICAgaXNCdWZmID0gIWlzQXJyICYmICFpc0FyZyAmJiBpc0J1ZmZlcl8xKHZhbHVlKSwKICAgICAgaXNUeXBlID0gIWlzQXJyICYmICFpc0FyZyAmJiAhaXNCdWZmICYmIGlzVHlwZWRBcnJheV8xKHZhbHVlKSwKICAgICAgc2tpcEluZGV4ZXMgPSBpc0FyciB8fCBpc0FyZyB8fCBpc0J1ZmYgfHwgaXNUeXBlLAogICAgICByZXN1bHQgPSBza2lwSW5kZXhlcyA/IF9iYXNlVGltZXModmFsdWUubGVuZ3RoLCBTdHJpbmcpIDogW10sCiAgICAgIGxlbmd0aCA9IHJlc3VsdC5sZW5ndGg7CgogIGZvciAodmFyIGtleSBpbiB2YWx1ZSkgewogICAgaWYgKChpbmhlcml0ZWQgfHwgaGFzT3duUHJvcGVydHkkMy5jYWxsKHZhbHVlLCBrZXkpKSAmJiAhKHNraXBJbmRleGVzICYmICggLy8gU2FmYXJpIDkgaGFzIGVudW1lcmFibGUgYGFyZ3VtZW50cy5sZW5ndGhgIGluIHN0cmljdCBtb2RlLgogICAga2V5ID09ICdsZW5ndGgnIHx8IGlzQnVmZiAmJiAoa2V5ID09ICdvZmZzZXQnIHx8IGtleSA9PSAncGFyZW50JykgfHwgaXNUeXBlICYmIChrZXkgPT0gJ2J1ZmZlcicgfHwga2V5ID09ICdieXRlTGVuZ3RoJyB8fCBrZXkgPT0gJ2J5dGVPZmZzZXQnKSB8fCAvLyBTa2lwIGluZGV4IHByb3BlcnRpZXMuCiAgICBfaXNJbmRleChrZXksIGxlbmd0aCkpKSkgewogICAgICByZXN1bHQucHVzaChrZXkpOwogICAgfQogIH0KCiAgcmV0dXJuIHJlc3VsdDsKfQoKdmFyIF9hcnJheUxpa2VLZXlzID0gYXJyYXlMaWtlS2V5czsKLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqLwoKdmFyIG9iamVjdFByb3RvJDMgPSBPYmplY3QucHJvdG90eXBlOwovKioKICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgbGlrZWx5IGEgcHJvdG90eXBlIG9iamVjdC4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suCiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcHJvdG90eXBlLCBlbHNlIGBmYWxzZWAuCiAqLwoKZnVuY3Rpb24gaXNQcm90b3R5cGUodmFsdWUpIHsKICB2YXIgQ3RvciA9IHZhbHVlICYmIHZhbHVlLmNvbnN0cnVjdG9yLAogICAgICBwcm90byA9IHR5cGVvZiBDdG9yID09ICdmdW5jdGlvbicgJiYgQ3Rvci5wcm90b3R5cGUgfHwgb2JqZWN0UHJvdG8kMzsKICByZXR1cm4gdmFsdWUgPT09IHByb3RvOwp9Cgp2YXIgX2lzUHJvdG90eXBlID0gaXNQcm90b3R5cGU7Ci8qKgogKiBDcmVhdGVzIGEgdW5hcnkgZnVuY3Rpb24gdGhhdCBpbnZva2VzIGBmdW5jYCB3aXRoIGl0cyBhcmd1bWVudCB0cmFuc2Zvcm1lZC4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gd3JhcC4KICogQHBhcmFtIHtGdW5jdGlvbn0gdHJhbnNmb3JtIFRoZSBhcmd1bWVudCB0cmFuc2Zvcm0uCiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLgogKi8KCmZ1bmN0aW9uIG92ZXJBcmcoZnVuYywgdHJhbnNmb3JtKSB7CiAgcmV0dXJuIGZ1bmN0aW9uIChhcmcpIHsKICAgIHJldHVybiBmdW5jKHRyYW5zZm9ybShhcmcpKTsKICB9Owp9Cgp2YXIgX292ZXJBcmcgPSBvdmVyQXJnOwovKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovCgp2YXIgbmF0aXZlS2V5cyA9IF9vdmVyQXJnKE9iamVjdC5rZXlzLCBPYmplY3QpOwoKdmFyIF9uYXRpdmVLZXlzID0gbmF0aXZlS2V5czsKLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqLwoKdmFyIG9iamVjdFByb3RvJDIgPSBPYmplY3QucHJvdG90eXBlOwovKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi8KCnZhciBoYXNPd25Qcm9wZXJ0eSQyID0gb2JqZWN0UHJvdG8kMi5oYXNPd25Qcm9wZXJ0eTsKLyoqCiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmtleXNgIHdoaWNoIGRvZXNuJ3QgdHJlYXQgc3BhcnNlIGFycmF5cyBhcyBkZW5zZS4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LgogKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLgogKi8KCmZ1bmN0aW9uIGJhc2VLZXlzKG9iamVjdCkgewogIGlmICghX2lzUHJvdG90eXBlKG9iamVjdCkpIHsKICAgIHJldHVybiBfbmF0aXZlS2V5cyhvYmplY3QpOwogIH0KCiAgdmFyIHJlc3VsdCA9IFtdOwoKICBmb3IgKHZhciBrZXkgaW4gT2JqZWN0KG9iamVjdCkpIHsKICAgIGlmIChoYXNPd25Qcm9wZXJ0eSQyLmNhbGwob2JqZWN0LCBrZXkpICYmIGtleSAhPSAnY29uc3RydWN0b3InKSB7CiAgICAgIHJlc3VsdC5wdXNoKGtleSk7CiAgICB9CiAgfQoKICByZXR1cm4gcmVzdWx0Owp9Cgp2YXIgX2Jhc2VLZXlzID0gYmFzZUtleXM7Ci8qKgogKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhcnJheS1saWtlLiBBIHZhbHVlIGlzIGNvbnNpZGVyZWQgYXJyYXktbGlrZSBpZiBpdCdzCiAqIG5vdCBhIGZ1bmN0aW9uIGFuZCBoYXMgYSBgdmFsdWUubGVuZ3RoYCB0aGF0J3MgYW4gaW50ZWdlciBncmVhdGVyIHRoYW4gb3IKICogZXF1YWwgdG8gYDBgIGFuZCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gYE51bWJlci5NQVhfU0FGRV9JTlRFR0VSYC4KICoKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgXwogKiBAc2luY2UgNC4wLjAKICogQGNhdGVnb3J5IExhbmcKICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suCiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFycmF5LWxpa2UsIGVsc2UgYGZhbHNlYC4KICogQGV4YW1wbGUKICoKICogXy5pc0FycmF5TGlrZShbMSwgMiwgM10pOwogKiAvLyA9PiB0cnVlCiAqCiAqIF8uaXNBcnJheUxpa2UoZG9jdW1lbnQuYm9keS5jaGlsZHJlbik7CiAqIC8vID0+IHRydWUKICoKICogXy5pc0FycmF5TGlrZSgnYWJjJyk7CiAqIC8vID0+IHRydWUKICoKICogXy5pc0FycmF5TGlrZShfLm5vb3ApOwogKiAvLyA9PiBmYWxzZQogKi8KCmZ1bmN0aW9uIGlzQXJyYXlMaWtlKHZhbHVlKSB7CiAgcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgaXNMZW5ndGhfMSh2YWx1ZS5sZW5ndGgpICYmICFpc0Z1bmN0aW9uXzEodmFsdWUpOwp9Cgp2YXIgaXNBcnJheUxpa2VfMSA9IGlzQXJyYXlMaWtlOwovKioKICogQ3JlYXRlcyBhbiBhcnJheSBvZiB0aGUgb3duIGVudW1lcmFibGUgcHJvcGVydHkgbmFtZXMgb2YgYG9iamVjdGAuCiAqCiAqICoqTm90ZToqKiBOb24tb2JqZWN0IHZhbHVlcyBhcmUgY29lcmNlZCB0byBvYmplY3RzLiBTZWUgdGhlCiAqIFtFUyBzcGVjXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3Qua2V5cykKICogZm9yIG1vcmUgZGV0YWlscy4KICoKICogQHN0YXRpYwogKiBAc2luY2UgMC4xLjAKICogQG1lbWJlck9mIF8KICogQGNhdGVnb3J5IE9iamVjdAogKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuCiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuCiAqIEBleGFtcGxlCiAqCiAqIGZ1bmN0aW9uIEZvbygpIHsKICogICB0aGlzLmEgPSAxOwogKiAgIHRoaXMuYiA9IDI7CiAqIH0KICoKICogRm9vLnByb3RvdHlwZS5jID0gMzsKICoKICogXy5rZXlzKG5ldyBGb28pOwogKiAvLyA9PiBbJ2EnLCAnYiddIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpCiAqCiAqIF8ua2V5cygnaGknKTsKICogLy8gPT4gWycwJywgJzEnXQogKi8KCmZ1bmN0aW9uIGtleXMob2JqZWN0KSB7CiAgcmV0dXJuIGlzQXJyYXlMaWtlXzEob2JqZWN0KSA/IF9hcnJheUxpa2VLZXlzKG9iamVjdCkgOiBfYmFzZUtleXMob2JqZWN0KTsKfQoKdmFyIGtleXNfMSA9IGtleXM7Ci8qKgogKiBDcmVhdGVzIGFuIGFycmF5IG9mIG93biBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIGFuZCBzeW1ib2xzIG9mIGBvYmplY3RgLgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuCiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMgYW5kIHN5bWJvbHMuCiAqLwoKZnVuY3Rpb24gZ2V0QWxsS2V5cyhvYmplY3QpIHsKICByZXR1cm4gX2Jhc2VHZXRBbGxLZXlzKG9iamVjdCwga2V5c18xLCBfZ2V0U3ltYm9scyk7Cn0KCnZhciBfZ2V0QWxsS2V5cyA9IGdldEFsbEtleXM7Ci8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIHZhbHVlIGNvbXBhcmlzb25zLiAqLwoKdmFyIENPTVBBUkVfUEFSVElBTF9GTEFHJDMgPSAxOwovKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovCgp2YXIgb2JqZWN0UHJvdG8kMSA9IE9iamVjdC5wcm90b3R5cGU7Ci8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqLwoKdmFyIGhhc093blByb3BlcnR5JDEgPSBvYmplY3RQcm90byQxLmhhc093blByb3BlcnR5OwovKioKICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbERlZXBgIGZvciBvYmplY3RzIHdpdGggc3VwcG9ydCBmb3IKICogcGFydGlhbCBkZWVwIGNvbXBhcmlzb25zLgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY29tcGFyZS4KICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS4KICogQHBhcmFtIHtudW1iZXJ9IGJpdG1hc2sgVGhlIGJpdG1hc2sgZmxhZ3MuIFNlZSBgYmFzZUlzRXF1YWxgIGZvciBtb3JlIGRldGFpbHMuCiAqIEBwYXJhbSB7RnVuY3Rpb259IGN1c3RvbWl6ZXIgVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy4KICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLgogKiBAcGFyYW0ge09iamVjdH0gc3RhY2sgVHJhY2tzIHRyYXZlcnNlZCBgb2JqZWN0YCBhbmQgYG90aGVyYCBvYmplY3RzLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC4KICovCgpmdW5jdGlvbiBlcXVhbE9iamVjdHMob2JqZWN0LCBvdGhlciwgYml0bWFzaywgY3VzdG9taXplciwgZXF1YWxGdW5jLCBzdGFjaykgewogIHZhciBpc1BhcnRpYWwgPSBiaXRtYXNrICYgQ09NUEFSRV9QQVJUSUFMX0ZMQUckMywKICAgICAgb2JqUHJvcHMgPSBfZ2V0QWxsS2V5cyhvYmplY3QpLAogICAgICBvYmpMZW5ndGggPSBvYmpQcm9wcy5sZW5ndGgsCiAgICAgIG90aFByb3BzID0gX2dldEFsbEtleXMob3RoZXIpLAogICAgICBvdGhMZW5ndGggPSBvdGhQcm9wcy5sZW5ndGg7CgogIGlmIChvYmpMZW5ndGggIT0gb3RoTGVuZ3RoICYmICFpc1BhcnRpYWwpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIHZhciBpbmRleCA9IG9iakxlbmd0aDsKCiAgd2hpbGUgKGluZGV4LS0pIHsKICAgIHZhciBrZXkgPSBvYmpQcm9wc1tpbmRleF07CgogICAgaWYgKCEoaXNQYXJ0aWFsID8ga2V5IGluIG90aGVyIDogaGFzT3duUHJvcGVydHkkMS5jYWxsKG90aGVyLCBrZXkpKSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfSAvLyBDaGVjayB0aGF0IGN5Y2xpYyB2YWx1ZXMgYXJlIGVxdWFsLgoKCiAgdmFyIG9ialN0YWNrZWQgPSBzdGFjay5nZXQob2JqZWN0KTsKICB2YXIgb3RoU3RhY2tlZCA9IHN0YWNrLmdldChvdGhlcik7CgogIGlmIChvYmpTdGFja2VkICYmIG90aFN0YWNrZWQpIHsKICAgIHJldHVybiBvYmpTdGFja2VkID09IG90aGVyICYmIG90aFN0YWNrZWQgPT0gb2JqZWN0OwogIH0KCiAgdmFyIHJlc3VsdCA9IHRydWU7CiAgc3RhY2suc2V0KG9iamVjdCwgb3RoZXIpOwogIHN0YWNrLnNldChvdGhlciwgb2JqZWN0KTsKICB2YXIgc2tpcEN0b3IgPSBpc1BhcnRpYWw7CgogIHdoaWxlICgrK2luZGV4IDwgb2JqTGVuZ3RoKSB7CiAgICBrZXkgPSBvYmpQcm9wc1tpbmRleF07CiAgICB2YXIgb2JqVmFsdWUgPSBvYmplY3Rba2V5XSwKICAgICAgICBvdGhWYWx1ZSA9IG90aGVyW2tleV07CgogICAgaWYgKGN1c3RvbWl6ZXIpIHsKICAgICAgdmFyIGNvbXBhcmVkID0gaXNQYXJ0aWFsID8gY3VzdG9taXplcihvdGhWYWx1ZSwgb2JqVmFsdWUsIGtleSwgb3RoZXIsIG9iamVjdCwgc3RhY2spIDogY3VzdG9taXplcihvYmpWYWx1ZSwgb3RoVmFsdWUsIGtleSwgb2JqZWN0LCBvdGhlciwgc3RhY2spOwogICAgfSAvLyBSZWN1cnNpdmVseSBjb21wYXJlIG9iamVjdHMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS4KCgogICAgaWYgKCEoY29tcGFyZWQgPT09IHVuZGVmaW5lZCA/IG9ialZhbHVlID09PSBvdGhWYWx1ZSB8fCBlcXVhbEZ1bmMob2JqVmFsdWUsIG90aFZhbHVlLCBiaXRtYXNrLCBjdXN0b21pemVyLCBzdGFjaykgOiBjb21wYXJlZCkpIHsKICAgICAgcmVzdWx0ID0gZmFsc2U7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIHNraXBDdG9yIHx8IChza2lwQ3RvciA9IGtleSA9PSAnY29uc3RydWN0b3InKTsKICB9CgogIGlmIChyZXN1bHQgJiYgIXNraXBDdG9yKSB7CiAgICB2YXIgb2JqQ3RvciA9IG9iamVjdC5jb25zdHJ1Y3RvciwKICAgICAgICBvdGhDdG9yID0gb3RoZXIuY29uc3RydWN0b3I7IC8vIE5vbiBgT2JqZWN0YCBvYmplY3QgaW5zdGFuY2VzIHdpdGggZGlmZmVyZW50IGNvbnN0cnVjdG9ycyBhcmUgbm90IGVxdWFsLgoKICAgIGlmIChvYmpDdG9yICE9IG90aEN0b3IgJiYgJ2NvbnN0cnVjdG9yJyBpbiBvYmplY3QgJiYgJ2NvbnN0cnVjdG9yJyBpbiBvdGhlciAmJiAhKHR5cGVvZiBvYmpDdG9yID09ICdmdW5jdGlvbicgJiYgb2JqQ3RvciBpbnN0YW5jZW9mIG9iakN0b3IgJiYgdHlwZW9mIG90aEN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBvdGhDdG9yIGluc3RhbmNlb2Ygb3RoQ3RvcikpIHsKICAgICAgcmVzdWx0ID0gZmFsc2U7CiAgICB9CiAgfQoKICBzdGFja1snZGVsZXRlJ10ob2JqZWN0KTsKICBzdGFja1snZGVsZXRlJ10ob3RoZXIpOwogIHJldHVybiByZXN1bHQ7Cn0KCnZhciBfZXF1YWxPYmplY3RzID0gZXF1YWxPYmplY3RzOwovKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB0aGF0IGFyZSB2ZXJpZmllZCB0byBiZSBuYXRpdmUuICovCgp2YXIgRGF0YVZpZXcgPSBfZ2V0TmF0aXZlKF9yb290LCAnRGF0YVZpZXcnKTsKCnZhciBfRGF0YVZpZXcgPSBEYXRhVmlldzsKLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgdGhhdCBhcmUgdmVyaWZpZWQgdG8gYmUgbmF0aXZlLiAqLwoKdmFyIFByb21pc2UkMSA9IF9nZXROYXRpdmUoX3Jvb3QsICdQcm9taXNlJyk7Cgp2YXIgX1Byb21pc2UgPSBQcm9taXNlJDE7Ci8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHRoYXQgYXJlIHZlcmlmaWVkIHRvIGJlIG5hdGl2ZS4gKi8KCnZhciBTZXQgPSBfZ2V0TmF0aXZlKF9yb290LCAnU2V0Jyk7Cgp2YXIgX1NldCA9IFNldDsKLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgdGhhdCBhcmUgdmVyaWZpZWQgdG8gYmUgbmF0aXZlLiAqLwoKdmFyIFdlYWtNYXAgPSBfZ2V0TmF0aXZlKF9yb290LCAnV2Vha01hcCcpOwoKdmFyIF9XZWFrTWFwID0gV2Vha01hcDsKLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqLwoKdmFyIG1hcFRhZyA9ICdbb2JqZWN0IE1hcF0nLAogICAgb2JqZWN0VGFnJDEgPSAnW29iamVjdCBPYmplY3RdJywKICAgIHByb21pc2VUYWcgPSAnW29iamVjdCBQcm9taXNlXScsCiAgICBzZXRUYWcgPSAnW29iamVjdCBTZXRdJywKICAgIHdlYWtNYXBUYWcgPSAnW29iamVjdCBXZWFrTWFwXSc7CnZhciBkYXRhVmlld1RhZyA9ICdbb2JqZWN0IERhdGFWaWV3XSc7Ci8qKiBVc2VkIHRvIGRldGVjdCBtYXBzLCBzZXRzLCBhbmQgd2Vha21hcHMuICovCgp2YXIgZGF0YVZpZXdDdG9yU3RyaW5nID0gX3RvU291cmNlKF9EYXRhVmlldyksCiAgICBtYXBDdG9yU3RyaW5nID0gX3RvU291cmNlKF9NYXApLAogICAgcHJvbWlzZUN0b3JTdHJpbmcgPSBfdG9Tb3VyY2UoX1Byb21pc2UpLAogICAgc2V0Q3RvclN0cmluZyA9IF90b1NvdXJjZShfU2V0KSwKICAgIHdlYWtNYXBDdG9yU3RyaW5nID0gX3RvU291cmNlKF9XZWFrTWFwKTsKLyoqCiAqIEdldHMgdGhlIGB0b1N0cmluZ1RhZ2Agb2YgYHZhbHVlYC4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcXVlcnkuCiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGB0b1N0cmluZ1RhZ2AuCiAqLwoKCnZhciBnZXRUYWcgPSBfYmFzZUdldFRhZzsgLy8gRmFsbGJhY2sgZm9yIGRhdGEgdmlld3MsIG1hcHMsIHNldHMsIGFuZCB3ZWFrIG1hcHMgaW4gSUUgMTEgYW5kIHByb21pc2VzIGluIE5vZGUuanMgPCA2LgoKaWYgKF9EYXRhVmlldyAmJiBnZXRUYWcobmV3IF9EYXRhVmlldyhuZXcgQXJyYXlCdWZmZXIoMSkpKSAhPSBkYXRhVmlld1RhZyB8fCBfTWFwICYmIGdldFRhZyhuZXcgX01hcCgpKSAhPSBtYXBUYWcgfHwgX1Byb21pc2UgJiYgZ2V0VGFnKF9Qcm9taXNlLnJlc29sdmUoKSkgIT0gcHJvbWlzZVRhZyB8fCBfU2V0ICYmIGdldFRhZyhuZXcgX1NldCgpKSAhPSBzZXRUYWcgfHwgX1dlYWtNYXAgJiYgZ2V0VGFnKG5ldyBfV2Vha01hcCgpKSAhPSB3ZWFrTWFwVGFnKSB7CiAgZ2V0VGFnID0gZnVuY3Rpb24gZ2V0VGFnKHZhbHVlKSB7CiAgICB2YXIgcmVzdWx0ID0gX2Jhc2VHZXRUYWcodmFsdWUpLAogICAgICAgIEN0b3IgPSByZXN1bHQgPT0gb2JqZWN0VGFnJDEgPyB2YWx1ZS5jb25zdHJ1Y3RvciA6IHVuZGVmaW5lZCwKICAgICAgICBjdG9yU3RyaW5nID0gQ3RvciA/IF90b1NvdXJjZShDdG9yKSA6ICcnOwoKICAgIGlmIChjdG9yU3RyaW5nKSB7CiAgICAgIHN3aXRjaCAoY3RvclN0cmluZykgewogICAgICAgIGNhc2UgZGF0YVZpZXdDdG9yU3RyaW5nOgogICAgICAgICAgcmV0dXJuIGRhdGFWaWV3VGFnOwoKICAgICAgICBjYXNlIG1hcEN0b3JTdHJpbmc6CiAgICAgICAgICByZXR1cm4gbWFwVGFnOwoKICAgICAgICBjYXNlIHByb21pc2VDdG9yU3RyaW5nOgogICAgICAgICAgcmV0dXJuIHByb21pc2VUYWc7CgogICAgICAgIGNhc2Ugc2V0Q3RvclN0cmluZzoKICAgICAgICAgIHJldHVybiBzZXRUYWc7CgogICAgICAgIGNhc2Ugd2Vha01hcEN0b3JTdHJpbmc6CiAgICAgICAgICByZXR1cm4gd2Vha01hcFRhZzsKICAgICAgfQogICAgfQoKICAgIHJldHVybiByZXN1bHQ7CiAgfTsKfQoKdmFyIF9nZXRUYWcgPSBnZXRUYWc7Ci8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIHZhbHVlIGNvbXBhcmlzb25zLiAqLwoKdmFyIENPTVBBUkVfUEFSVElBTF9GTEFHJDIgPSAxOwovKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovCgp2YXIgYXJnc1RhZyA9ICdbb2JqZWN0IEFyZ3VtZW50c10nLAogICAgYXJyYXlUYWcgPSAnW29iamVjdCBBcnJheV0nLAogICAgb2JqZWN0VGFnID0gJ1tvYmplY3QgT2JqZWN0XSc7Ci8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi8KCnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7Ci8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqLwoKdmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7Ci8qKgogKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsYCBmb3IgYXJyYXlzIGFuZCBvYmplY3RzIHdoaWNoIHBlcmZvcm1zCiAqIGRlZXAgY29tcGFyaXNvbnMgYW5kIHRyYWNrcyB0cmF2ZXJzZWQgb2JqZWN0cyBlbmFibGluZyBvYmplY3RzIHdpdGggY2lyY3VsYXIKICogcmVmZXJlbmNlcyB0byBiZSBjb21wYXJlZC4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNvbXBhcmUuCiAqIEBwYXJhbSB7T2JqZWN0fSBvdGhlciBUaGUgb3RoZXIgb2JqZWN0IHRvIGNvbXBhcmUuCiAqIEBwYXJhbSB7bnVtYmVyfSBiaXRtYXNrIFRoZSBiaXRtYXNrIGZsYWdzLiBTZWUgYGJhc2VJc0VxdWFsYCBmb3IgbW9yZSBkZXRhaWxzLgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBjdXN0b21pemVyIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuCiAqIEBwYXJhbSB7RnVuY3Rpb259IGVxdWFsRnVuYyBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVxdWl2YWxlbnRzIG9mIHZhbHVlcy4KICogQHBhcmFtIHtPYmplY3R9IFtzdGFja10gVHJhY2tzIHRyYXZlcnNlZCBgb2JqZWN0YCBhbmQgYG90aGVyYCBvYmplY3RzLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC4KICovCgpmdW5jdGlvbiBiYXNlSXNFcXVhbERlZXAob2JqZWN0LCBvdGhlciwgYml0bWFzaywgY3VzdG9taXplciwgZXF1YWxGdW5jLCBzdGFjaykgewogIHZhciBvYmpJc0FyciA9IGlzQXJyYXlfMShvYmplY3QpLAogICAgICBvdGhJc0FyciA9IGlzQXJyYXlfMShvdGhlciksCiAgICAgIG9ialRhZyA9IG9iaklzQXJyID8gYXJyYXlUYWcgOiBfZ2V0VGFnKG9iamVjdCksCiAgICAgIG90aFRhZyA9IG90aElzQXJyID8gYXJyYXlUYWcgOiBfZ2V0VGFnKG90aGVyKTsKICBvYmpUYWcgPSBvYmpUYWcgPT0gYXJnc1RhZyA/IG9iamVjdFRhZyA6IG9ialRhZzsKICBvdGhUYWcgPSBvdGhUYWcgPT0gYXJnc1RhZyA/IG9iamVjdFRhZyA6IG90aFRhZzsKICB2YXIgb2JqSXNPYmogPSBvYmpUYWcgPT0gb2JqZWN0VGFnLAogICAgICBvdGhJc09iaiA9IG90aFRhZyA9PSBvYmplY3RUYWcsCiAgICAgIGlzU2FtZVRhZyA9IG9ialRhZyA9PSBvdGhUYWc7CgogIGlmIChpc1NhbWVUYWcgJiYgaXNCdWZmZXJfMShvYmplY3QpKSB7CiAgICBpZiAoIWlzQnVmZmVyXzEob3RoZXIpKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBvYmpJc0FyciA9IHRydWU7CiAgICBvYmpJc09iaiA9IGZhbHNlOwogIH0KCiAgaWYgKGlzU2FtZVRhZyAmJiAhb2JqSXNPYmopIHsKICAgIHN0YWNrIHx8IChzdGFjayA9IG5ldyBfU3RhY2soKSk7CiAgICByZXR1cm4gb2JqSXNBcnIgfHwgaXNUeXBlZEFycmF5XzEob2JqZWN0KSA/IF9lcXVhbEFycmF5cyhvYmplY3QsIG90aGVyLCBiaXRtYXNrLCBjdXN0b21pemVyLCBlcXVhbEZ1bmMsIHN0YWNrKSA6IF9lcXVhbEJ5VGFnKG9iamVjdCwgb3RoZXIsIG9ialRhZywgYml0bWFzaywgY3VzdG9taXplciwgZXF1YWxGdW5jLCBzdGFjayk7CiAgfQoKICBpZiAoIShiaXRtYXNrICYgQ09NUEFSRV9QQVJUSUFMX0ZMQUckMikpIHsKICAgIHZhciBvYmpJc1dyYXBwZWQgPSBvYmpJc09iaiAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgJ19fd3JhcHBlZF9fJyksCiAgICAgICAgb3RoSXNXcmFwcGVkID0gb3RoSXNPYmogJiYgaGFzT3duUHJvcGVydHkuY2FsbChvdGhlciwgJ19fd3JhcHBlZF9fJyk7CgogICAgaWYgKG9iaklzV3JhcHBlZCB8fCBvdGhJc1dyYXBwZWQpIHsKICAgICAgdmFyIG9ialVud3JhcHBlZCA9IG9iaklzV3JhcHBlZCA/IG9iamVjdC52YWx1ZSgpIDogb2JqZWN0LAogICAgICAgICAgb3RoVW53cmFwcGVkID0gb3RoSXNXcmFwcGVkID8gb3RoZXIudmFsdWUoKSA6IG90aGVyOwogICAgICBzdGFjayB8fCAoc3RhY2sgPSBuZXcgX1N0YWNrKCkpOwogICAgICByZXR1cm4gZXF1YWxGdW5jKG9ialVud3JhcHBlZCwgb3RoVW53cmFwcGVkLCBiaXRtYXNrLCBjdXN0b21pemVyLCBzdGFjayk7CiAgICB9CiAgfQoKICBpZiAoIWlzU2FtZVRhZykgewogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgc3RhY2sgfHwgKHN0YWNrID0gbmV3IF9TdGFjaygpKTsKICByZXR1cm4gX2VxdWFsT2JqZWN0cyhvYmplY3QsIG90aGVyLCBiaXRtYXNrLCBjdXN0b21pemVyLCBlcXVhbEZ1bmMsIHN0YWNrKTsKfQoKdmFyIF9iYXNlSXNFcXVhbERlZXAgPSBiYXNlSXNFcXVhbERlZXA7Ci8qKgogKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc0VxdWFsYCB3aGljaCBzdXBwb3J0cyBwYXJ0aWFsIGNvbXBhcmlzb25zCiAqIGFuZCB0cmFja3MgdHJhdmVyc2VkIG9iamVjdHMuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuCiAqIEBwYXJhbSB7Kn0gb3RoZXIgVGhlIG90aGVyIHZhbHVlIHRvIGNvbXBhcmUuCiAqIEBwYXJhbSB7Ym9vbGVhbn0gYml0bWFzayBUaGUgYml0bWFzayBmbGFncy4KICogIDEgLSBVbm9yZGVyZWQgY29tcGFyaXNvbgogKiAgMiAtIFBhcnRpYWwgY29tcGFyaXNvbgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy4KICogQHBhcmFtIHtPYmplY3R9IFtzdGFja10gVHJhY2tzIHRyYXZlcnNlZCBgdmFsdWVgIGFuZCBgb3RoZXJgIG9iamVjdHMuCiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgdmFsdWVzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuCiAqLwoKZnVuY3Rpb24gYmFzZUlzRXF1YWwodmFsdWUsIG90aGVyLCBiaXRtYXNrLCBjdXN0b21pemVyLCBzdGFjaykgewogIGlmICh2YWx1ZSA9PT0gb3RoZXIpIHsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgaWYgKHZhbHVlID09IG51bGwgfHwgb3RoZXIgPT0gbnVsbCB8fCAhaXNPYmplY3RMaWtlXzEodmFsdWUpICYmICFpc09iamVjdExpa2VfMShvdGhlcikpIHsKICAgIHJldHVybiB2YWx1ZSAhPT0gdmFsdWUgJiYgb3RoZXIgIT09IG90aGVyOwogIH0KCiAgcmV0dXJuIF9iYXNlSXNFcXVhbERlZXAodmFsdWUsIG90aGVyLCBiaXRtYXNrLCBjdXN0b21pemVyLCBiYXNlSXNFcXVhbCwgc3RhY2spOwp9Cgp2YXIgX2Jhc2VJc0VxdWFsID0gYmFzZUlzRXF1YWw7Ci8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIHZhbHVlIGNvbXBhcmlzb25zLiAqLwoKdmFyIENPTVBBUkVfUEFSVElBTF9GTEFHJDEgPSAxLAogICAgQ09NUEFSRV9VTk9SREVSRURfRkxBRyQxID0gMjsKLyoqCiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzTWF0Y2hgIHdpdGhvdXQgc3VwcG9ydCBmb3IgaXRlcmF0ZWUgc2hvcnRoYW5kcy4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGluc3BlY3QuCiAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIG9iamVjdCBvZiBwcm9wZXJ0eSB2YWx1ZXMgdG8gbWF0Y2guCiAqIEBwYXJhbSB7QXJyYXl9IG1hdGNoRGF0YSBUaGUgcHJvcGVydHkgbmFtZXMsIHZhbHVlcywgYW5kIGNvbXBhcmUgZmxhZ3MgdG8gbWF0Y2guCiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYG9iamVjdGAgaXMgYSBtYXRjaCwgZWxzZSBgZmFsc2VgLgogKi8KCmZ1bmN0aW9uIGJhc2VJc01hdGNoKG9iamVjdCwgc291cmNlLCBtYXRjaERhdGEsIGN1c3RvbWl6ZXIpIHsKICB2YXIgaW5kZXggPSBtYXRjaERhdGEubGVuZ3RoLAogICAgICBsZW5ndGggPSBpbmRleCwKICAgICAgbm9DdXN0b21pemVyID0gIWN1c3RvbWl6ZXI7CgogIGlmIChvYmplY3QgPT0gbnVsbCkgewogICAgcmV0dXJuICFsZW5ndGg7CiAgfQoKICBvYmplY3QgPSBPYmplY3Qob2JqZWN0KTsKCiAgd2hpbGUgKGluZGV4LS0pIHsKICAgIHZhciBkYXRhID0gbWF0Y2hEYXRhW2luZGV4XTsKCiAgICBpZiAobm9DdXN0b21pemVyICYmIGRhdGFbMl0gPyBkYXRhWzFdICE9PSBvYmplY3RbZGF0YVswXV0gOiAhKGRhdGFbMF0gaW4gb2JqZWN0KSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfQoKICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkgewogICAgZGF0YSA9IG1hdGNoRGF0YVtpbmRleF07CiAgICB2YXIga2V5ID0gZGF0YVswXSwKICAgICAgICBvYmpWYWx1ZSA9IG9iamVjdFtrZXldLAogICAgICAgIHNyY1ZhbHVlID0gZGF0YVsxXTsKCiAgICBpZiAobm9DdXN0b21pemVyICYmIGRhdGFbMl0pIHsKICAgICAgaWYgKG9ialZhbHVlID09PSB1bmRlZmluZWQgJiYgIShrZXkgaW4gb2JqZWN0KSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgdmFyIHN0YWNrID0gbmV3IF9TdGFjaygpOwoKICAgICAgaWYgKGN1c3RvbWl6ZXIpIHsKICAgICAgICB2YXIgcmVzdWx0ID0gY3VzdG9taXplcihvYmpWYWx1ZSwgc3JjVmFsdWUsIGtleSwgb2JqZWN0LCBzb3VyY2UsIHN0YWNrKTsKICAgICAgfQoKICAgICAgaWYgKCEocmVzdWx0ID09PSB1bmRlZmluZWQgPyBfYmFzZUlzRXF1YWwoc3JjVmFsdWUsIG9ialZhbHVlLCBDT01QQVJFX1BBUlRJQUxfRkxBRyQxIHwgQ09NUEFSRV9VTk9SREVSRURfRkxBRyQxLCBjdXN0b21pemVyLCBzdGFjaykgOiByZXN1bHQpKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CiAgfQoKICByZXR1cm4gdHJ1ZTsKfQoKdmFyIF9iYXNlSXNNYXRjaCA9IGJhc2VJc01hdGNoOwovKioKICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgc3VpdGFibGUgZm9yIHN0cmljdCBlcXVhbGl0eSBjb21wYXJpc29ucywgaS5lLiBgPT09YC4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suCiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlmIHN1aXRhYmxlIGZvciBzdHJpY3QKICogIGVxdWFsaXR5IGNvbXBhcmlzb25zLCBlbHNlIGBmYWxzZWAuCiAqLwoKZnVuY3Rpb24gaXNTdHJpY3RDb21wYXJhYmxlKHZhbHVlKSB7CiAgcmV0dXJuIHZhbHVlID09PSB2YWx1ZSAmJiAhaXNPYmplY3RfMSh2YWx1ZSk7Cn0KCnZhciBfaXNTdHJpY3RDb21wYXJhYmxlID0gaXNTdHJpY3RDb21wYXJhYmxlOwovKioKICogR2V0cyB0aGUgcHJvcGVydHkgbmFtZXMsIHZhbHVlcywgYW5kIGNvbXBhcmUgZmxhZ3Mgb2YgYG9iamVjdGAuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS4KICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBtYXRjaCBkYXRhIG9mIGBvYmplY3RgLgogKi8KCmZ1bmN0aW9uIGdldE1hdGNoRGF0YShvYmplY3QpIHsKICB2YXIgcmVzdWx0ID0ga2V5c18xKG9iamVjdCksCiAgICAgIGxlbmd0aCA9IHJlc3VsdC5sZW5ndGg7CgogIHdoaWxlIChsZW5ndGgtLSkgewogICAgdmFyIGtleSA9IHJlc3VsdFtsZW5ndGhdLAogICAgICAgIHZhbHVlID0gb2JqZWN0W2tleV07CiAgICByZXN1bHRbbGVuZ3RoXSA9IFtrZXksIHZhbHVlLCBfaXNTdHJpY3RDb21wYXJhYmxlKHZhbHVlKV07CiAgfQoKICByZXR1cm4gcmVzdWx0Owp9Cgp2YXIgX2dldE1hdGNoRGF0YSA9IGdldE1hdGNoRGF0YTsKLyoqCiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgbWF0Y2hlc1Byb3BlcnR5YCBmb3Igc291cmNlIHZhbHVlcyBzdWl0YWJsZQogKiBmb3Igc3RyaWN0IGVxdWFsaXR5IGNvbXBhcmlzb25zLCBpLmUuIGA9PT1gLgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGdldC4KICogQHBhcmFtIHsqfSBzcmNWYWx1ZSBUaGUgdmFsdWUgdG8gbWF0Y2guCiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHNwZWMgZnVuY3Rpb24uCiAqLwoKZnVuY3Rpb24gbWF0Y2hlc1N0cmljdENvbXBhcmFibGUoa2V5LCBzcmNWYWx1ZSkgewogIHJldHVybiBmdW5jdGlvbiAob2JqZWN0KSB7CiAgICBpZiAob2JqZWN0ID09IG51bGwpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHJldHVybiBvYmplY3Rba2V5XSA9PT0gc3JjVmFsdWUgJiYgKHNyY1ZhbHVlICE9PSB1bmRlZmluZWQgfHwga2V5IGluIE9iamVjdChvYmplY3QpKTsKICB9Owp9Cgp2YXIgX21hdGNoZXNTdHJpY3RDb21wYXJhYmxlID0gbWF0Y2hlc1N0cmljdENvbXBhcmFibGU7Ci8qKgogKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5tYXRjaGVzYCB3aGljaCBkb2Vzbid0IGNsb25lIGBzb3VyY2VgLgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBvYmplY3Qgb2YgcHJvcGVydHkgdmFsdWVzIHRvIG1hdGNoLgogKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBzcGVjIGZ1bmN0aW9uLgogKi8KCmZ1bmN0aW9uIGJhc2VNYXRjaGVzKHNvdXJjZSkgewogIHZhciBtYXRjaERhdGEgPSBfZ2V0TWF0Y2hEYXRhKHNvdXJjZSk7CgogIGlmIChtYXRjaERhdGEubGVuZ3RoID09IDEgJiYgbWF0Y2hEYXRhWzBdWzJdKSB7CiAgICByZXR1cm4gX21hdGNoZXNTdHJpY3RDb21wYXJhYmxlKG1hdGNoRGF0YVswXVswXSwgbWF0Y2hEYXRhWzBdWzFdKTsKICB9CgogIHJldHVybiBmdW5jdGlvbiAob2JqZWN0KSB7CiAgICByZXR1cm4gb2JqZWN0ID09PSBzb3VyY2UgfHwgX2Jhc2VJc01hdGNoKG9iamVjdCwgc291cmNlLCBtYXRjaERhdGEpOwogIH07Cn0KCnZhciBfYmFzZU1hdGNoZXMgPSBiYXNlTWF0Y2hlczsKLyoqIFVzZWQgdG8gbWF0Y2ggcHJvcGVydHkgbmFtZXMgd2l0aGluIHByb3BlcnR5IHBhdGhzLiAqLwoKdmFyIHJlSXNEZWVwUHJvcCA9IC9cLnxcWyg/OlteW1xdXSp8KFsiJ10pKD86KD8hXDEpW15cXF18XFwuKSo/XDEpXF0vLAogICAgcmVJc1BsYWluUHJvcCA9IC9eXHcqJC87Ci8qKgogKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHByb3BlcnR5IG5hbWUgYW5kIG5vdCBhIHByb3BlcnR5IHBhdGguCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLgogKiBAcGFyYW0ge09iamVjdH0gW29iamVjdF0gVGhlIG9iamVjdCB0byBxdWVyeSBrZXlzIG9uLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHByb3BlcnR5IG5hbWUsIGVsc2UgYGZhbHNlYC4KICovCgpmdW5jdGlvbiBpc0tleSh2YWx1ZSwgb2JqZWN0KSB7CiAgaWYgKGlzQXJyYXlfMSh2YWx1ZSkpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIHZhciB0eXBlID0gX3R5cGVvZih2YWx1ZSk7CgogIGlmICh0eXBlID09ICdudW1iZXInIHx8IHR5cGUgPT0gJ3N5bWJvbCcgfHwgdHlwZSA9PSAnYm9vbGVhbicgfHwgdmFsdWUgPT0gbnVsbCB8fCBpc1N5bWJvbF8xKHZhbHVlKSkgewogICAgcmV0dXJuIHRydWU7CiAgfQoKICByZXR1cm4gcmVJc1BsYWluUHJvcC50ZXN0KHZhbHVlKSB8fCAhcmVJc0RlZXBQcm9wLnRlc3QodmFsdWUpIHx8IG9iamVjdCAhPSBudWxsICYmIHZhbHVlIGluIE9iamVjdChvYmplY3QpOwp9Cgp2YXIgX2lzS2V5ID0gaXNLZXk7Ci8qKiBFcnJvciBtZXNzYWdlIGNvbnN0YW50cy4gKi8KCnZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7Ci8qKgogKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBtZW1vaXplcyB0aGUgcmVzdWx0IG9mIGBmdW5jYC4gSWYgYHJlc29sdmVyYCBpcwogKiBwcm92aWRlZCwgaXQgZGV0ZXJtaW5lcyB0aGUgY2FjaGUga2V5IGZvciBzdG9yaW5nIHRoZSByZXN1bHQgYmFzZWQgb24gdGhlCiAqIGFyZ3VtZW50cyBwcm92aWRlZCB0byB0aGUgbWVtb2l6ZWQgZnVuY3Rpb24uIEJ5IGRlZmF1bHQsIHRoZSBmaXJzdCBhcmd1bWVudAogKiBwcm92aWRlZCB0byB0aGUgbWVtb2l6ZWQgZnVuY3Rpb24gaXMgdXNlZCBhcyB0aGUgbWFwIGNhY2hlIGtleS4gVGhlIGBmdW5jYAogKiBpcyBpbnZva2VkIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIHRoZSBtZW1vaXplZCBmdW5jdGlvbi4KICoKICogKipOb3RlOioqIFRoZSBjYWNoZSBpcyBleHBvc2VkIGFzIHRoZSBgY2FjaGVgIHByb3BlcnR5IG9uIHRoZSBtZW1vaXplZAogKiBmdW5jdGlvbi4gSXRzIGNyZWF0aW9uIG1heSBiZSBjdXN0b21pemVkIGJ5IHJlcGxhY2luZyB0aGUgYF8ubWVtb2l6ZS5DYWNoZWAKICogY29uc3RydWN0b3Igd2l0aCBvbmUgd2hvc2UgaW5zdGFuY2VzIGltcGxlbWVudCB0aGUKICogW2BNYXBgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1wcm9wZXJ0aWVzLW9mLXRoZS1tYXAtcHJvdG90eXBlLW9iamVjdCkKICogbWV0aG9kIGludGVyZmFjZSBvZiBgY2xlYXJgLCBgZGVsZXRlYCwgYGdldGAsIGBoYXNgLCBhbmQgYHNldGAuCiAqCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIF8KICogQHNpbmNlIDAuMS4wCiAqIEBjYXRlZ29yeSBGdW5jdGlvbgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBoYXZlIGl0cyBvdXRwdXQgbWVtb2l6ZWQuCiAqIEBwYXJhbSB7RnVuY3Rpb259IFtyZXNvbHZlcl0gVGhlIGZ1bmN0aW9uIHRvIHJlc29sdmUgdGhlIGNhY2hlIGtleS4KICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgbWVtb2l6ZWQgZnVuY3Rpb24uCiAqIEBleGFtcGxlCiAqCiAqIHZhciBvYmplY3QgPSB7ICdhJzogMSwgJ2InOiAyIH07CiAqIHZhciBvdGhlciA9IHsgJ2MnOiAzLCAnZCc6IDQgfTsKICoKICogdmFyIHZhbHVlcyA9IF8ubWVtb2l6ZShfLnZhbHVlcyk7CiAqIHZhbHVlcyhvYmplY3QpOwogKiAvLyA9PiBbMSwgMl0KICoKICogdmFsdWVzKG90aGVyKTsKICogLy8gPT4gWzMsIDRdCiAqCiAqIG9iamVjdC5hID0gMjsKICogdmFsdWVzKG9iamVjdCk7CiAqIC8vID0+IFsxLCAyXQogKgogKiAvLyBNb2RpZnkgdGhlIHJlc3VsdCBjYWNoZS4KICogdmFsdWVzLmNhY2hlLnNldChvYmplY3QsIFsnYScsICdiJ10pOwogKiB2YWx1ZXMob2JqZWN0KTsKICogLy8gPT4gWydhJywgJ2InXQogKgogKiAvLyBSZXBsYWNlIGBfLm1lbW9pemUuQ2FjaGVgLgogKiBfLm1lbW9pemUuQ2FjaGUgPSBXZWFrTWFwOwogKi8KCmZ1bmN0aW9uIG1lbW9pemUoZnVuYywgcmVzb2x2ZXIpIHsKICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJyB8fCByZXNvbHZlciAhPSBudWxsICYmIHR5cGVvZiByZXNvbHZlciAhPSAnZnVuY3Rpb24nKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7CiAgfQoKICB2YXIgbWVtb2l6ZWQgPSBmdW5jdGlvbiBtZW1vaXplZCgpIHsKICAgIHZhciBhcmdzID0gYXJndW1lbnRzLAogICAgICAgIGtleSA9IHJlc29sdmVyID8gcmVzb2x2ZXIuYXBwbHkodGhpcywgYXJncykgOiBhcmdzWzBdLAogICAgICAgIGNhY2hlID0gbWVtb2l6ZWQuY2FjaGU7CgogICAgaWYgKGNhY2hlLmhhcyhrZXkpKSB7CiAgICAgIHJldHVybiBjYWNoZS5nZXQoa2V5KTsKICAgIH0KCiAgICB2YXIgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzLCBhcmdzKTsKICAgIG1lbW9pemVkLmNhY2hlID0gY2FjaGUuc2V0KGtleSwgcmVzdWx0KSB8fCBjYWNoZTsKICAgIHJldHVybiByZXN1bHQ7CiAgfTsKCiAgbWVtb2l6ZWQuY2FjaGUgPSBuZXcgKG1lbW9pemUuQ2FjaGUgfHwgX01hcENhY2hlKSgpOwogIHJldHVybiBtZW1vaXplZDsKfSAvLyBFeHBvc2UgYE1hcENhY2hlYC4KCgptZW1vaXplLkNhY2hlID0gX01hcENhY2hlOwp2YXIgbWVtb2l6ZV8xID0gbWVtb2l6ZTsKLyoqIFVzZWQgYXMgdGhlIG1heGltdW0gbWVtb2l6ZSBjYWNoZSBzaXplLiAqLwoKdmFyIE1BWF9NRU1PSVpFX1NJWkUgPSA1MDA7Ci8qKgogKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8ubWVtb2l6ZWAgd2hpY2ggY2xlYXJzIHRoZSBtZW1vaXplZCBmdW5jdGlvbidzCiAqIGNhY2hlIHdoZW4gaXQgZXhjZWVkcyBgTUFYX01FTU9JWkVfU0laRWAuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGhhdmUgaXRzIG91dHB1dCBtZW1vaXplZC4KICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgbWVtb2l6ZWQgZnVuY3Rpb24uCiAqLwoKZnVuY3Rpb24gbWVtb2l6ZUNhcHBlZChmdW5jKSB7CiAgdmFyIHJlc3VsdCA9IG1lbW9pemVfMShmdW5jLCBmdW5jdGlvbiAoa2V5KSB7CiAgICBpZiAoY2FjaGUuc2l6ZSA9PT0gTUFYX01FTU9JWkVfU0laRSkgewogICAgICBjYWNoZS5jbGVhcigpOwogICAgfQoKICAgIHJldHVybiBrZXk7CiAgfSk7CiAgdmFyIGNhY2hlID0gcmVzdWx0LmNhY2hlOwogIHJldHVybiByZXN1bHQ7Cn0KCnZhciBfbWVtb2l6ZUNhcHBlZCA9IG1lbW9pemVDYXBwZWQ7Ci8qKiBVc2VkIHRvIG1hdGNoIHByb3BlcnR5IG5hbWVzIHdpdGhpbiBwcm9wZXJ0eSBwYXRocy4gKi8KCnZhciByZVByb3BOYW1lID0gL1teLltcXV0rfFxbKD86KC0/XGQrKD86XC5cZCspPyl8KFsiJ10pKCg/Oig/IVwyKVteXFxdfFxcLikqPylcMilcXXwoPz0oPzpcLnxcW1xdKSg/OlwufFxbXF18JCkpL2c7Ci8qKiBVc2VkIHRvIG1hdGNoIGJhY2tzbGFzaGVzIGluIHByb3BlcnR5IHBhdGhzLiAqLwoKdmFyIHJlRXNjYXBlQ2hhciA9IC9cXChcXCk/L2c7Ci8qKgogKiBDb252ZXJ0cyBgc3RyaW5nYCB0byBhIHByb3BlcnR5IHBhdGggYXJyYXkuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgVGhlIHN0cmluZyB0byBjb252ZXJ0LgogKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHByb3BlcnR5IHBhdGggYXJyYXkuCiAqLwoKdmFyIHN0cmluZ1RvUGF0aCA9IF9tZW1vaXplQ2FwcGVkKGZ1bmN0aW9uIChzdHJpbmcpIHsKICB2YXIgcmVzdWx0ID0gW107CgogIGlmIChzdHJpbmcuY2hhckNvZGVBdCgwKSA9PT0gNDYKICAvKiAuICovCiAgKSB7CiAgICByZXN1bHQucHVzaCgnJyk7CiAgfQoKICBzdHJpbmcucmVwbGFjZShyZVByb3BOYW1lLCBmdW5jdGlvbiAobWF0Y2gsIG51bWJlciwgcXVvdGUsIHN1YlN0cmluZykgewogICAgcmVzdWx0LnB1c2gocXVvdGUgPyBzdWJTdHJpbmcucmVwbGFjZShyZUVzY2FwZUNoYXIsICckMScpIDogbnVtYmVyIHx8IG1hdGNoKTsKICB9KTsKICByZXR1cm4gcmVzdWx0Owp9KTsKCnZhciBfc3RyaW5nVG9QYXRoID0gc3RyaW5nVG9QYXRoOwovKioKICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBfLm1hcGAgZm9yIGFycmF5cyB3aXRob3V0IHN1cHBvcnQgZm9yIGl0ZXJhdGVlCiAqIHNob3J0aGFuZHMuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7QXJyYXl9IFthcnJheV0gVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci4KICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi4KICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgbWFwcGVkIGFycmF5LgogKi8KCmZ1bmN0aW9uIGFycmF5TWFwKGFycmF5LCBpdGVyYXRlZSkgewogIHZhciBpbmRleCA9IC0xLAogICAgICBsZW5ndGggPSBhcnJheSA9PSBudWxsID8gMCA6IGFycmF5Lmxlbmd0aCwKICAgICAgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKTsKCiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHsKICAgIHJlc3VsdFtpbmRleF0gPSBpdGVyYXRlZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSk7CiAgfQoKICByZXR1cm4gcmVzdWx0Owp9Cgp2YXIgX2FycmF5TWFwID0gYXJyYXlNYXA7Ci8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqLwoKdmFyIElORklOSVRZJDEgPSAxIC8gMDsKLyoqIFVzZWQgdG8gY29udmVydCBzeW1ib2xzIHRvIHByaW1pdGl2ZXMgYW5kIHN0cmluZ3MuICovCgp2YXIgc3ltYm9sUHJvdG8gPSBfU3ltYm9sID8gX1N5bWJvbC5wcm90b3R5cGUgOiB1bmRlZmluZWQsCiAgICBzeW1ib2xUb1N0cmluZyA9IHN5bWJvbFByb3RvID8gc3ltYm9sUHJvdG8udG9TdHJpbmcgOiB1bmRlZmluZWQ7Ci8qKgogKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy50b1N0cmluZ2Agd2hpY2ggZG9lc24ndCBjb252ZXJ0IG51bGxpc2gKICogdmFsdWVzIHRvIGVtcHR5IHN0cmluZ3MuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuCiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHN0cmluZy4KICovCgpmdW5jdGlvbiBiYXNlVG9TdHJpbmcodmFsdWUpIHsKICAvLyBFeGl0IGVhcmx5IGZvciBzdHJpbmdzIHRvIGF2b2lkIGEgcGVyZm9ybWFuY2UgaGl0IGluIHNvbWUgZW52aXJvbm1lbnRzLgogIGlmICh0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycpIHsKICAgIHJldHVybiB2YWx1ZTsKICB9CgogIGlmIChpc0FycmF5XzEodmFsdWUpKSB7CiAgICAvLyBSZWN1cnNpdmVseSBjb252ZXJ0IHZhbHVlcyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpLgogICAgcmV0dXJuIF9hcnJheU1hcCh2YWx1ZSwgYmFzZVRvU3RyaW5nKSArICcnOwogIH0KCiAgaWYgKGlzU3ltYm9sXzEodmFsdWUpKSB7CiAgICByZXR1cm4gc3ltYm9sVG9TdHJpbmcgPyBzeW1ib2xUb1N0cmluZy5jYWxsKHZhbHVlKSA6ICcnOwogIH0KCiAgdmFyIHJlc3VsdCA9IHZhbHVlICsgJyc7CiAgcmV0dXJuIHJlc3VsdCA9PSAnMCcgJiYgMSAvIHZhbHVlID09IC1JTkZJTklUWSQxID8gJy0wJyA6IHJlc3VsdDsKfQoKdmFyIF9iYXNlVG9TdHJpbmcgPSBiYXNlVG9TdHJpbmc7Ci8qKgogKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgc3RyaW5nLiBBbiBlbXB0eSBzdHJpbmcgaXMgcmV0dXJuZWQgZm9yIGBudWxsYAogKiBhbmQgYHVuZGVmaW5lZGAgdmFsdWVzLiBUaGUgc2lnbiBvZiBgLTBgIGlzIHByZXNlcnZlZC4KICoKICogQHN0YXRpYwogKiBAbWVtYmVyT2YgXwogKiBAc2luY2UgNC4wLjAKICogQGNhdGVnb3J5IExhbmcKICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29udmVydC4KICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgY29udmVydGVkIHN0cmluZy4KICogQGV4YW1wbGUKICoKICogXy50b1N0cmluZyhudWxsKTsKICogLy8gPT4gJycKICoKICogXy50b1N0cmluZygtMCk7CiAqIC8vID0+ICctMCcKICoKICogXy50b1N0cmluZyhbMSwgMiwgM10pOwogKiAvLyA9PiAnMSwyLDMnCiAqLwoKZnVuY3Rpb24gdG9TdHJpbmcodmFsdWUpIHsKICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogX2Jhc2VUb1N0cmluZyh2YWx1ZSk7Cn0KCnZhciB0b1N0cmluZ18xID0gdG9TdHJpbmc7Ci8qKgogKiBDYXN0cyBgdmFsdWVgIHRvIGEgcGF0aCBhcnJheSBpZiBpdCdzIG5vdCBvbmUuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGluc3BlY3QuCiAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0XSBUaGUgb2JqZWN0IHRvIHF1ZXJ5IGtleXMgb24uCiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgY2FzdCBwcm9wZXJ0eSBwYXRoIGFycmF5LgogKi8KCmZ1bmN0aW9uIGNhc3RQYXRoKHZhbHVlLCBvYmplY3QpIHsKICBpZiAoaXNBcnJheV8xKHZhbHVlKSkgewogICAgcmV0dXJuIHZhbHVlOwogIH0KCiAgcmV0dXJuIF9pc0tleSh2YWx1ZSwgb2JqZWN0KSA/IFt2YWx1ZV0gOiBfc3RyaW5nVG9QYXRoKHRvU3RyaW5nXzEodmFsdWUpKTsKfQoKdmFyIF9jYXN0UGF0aCA9IGNhc3RQYXRoOwovKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi8KCnZhciBJTkZJTklUWSA9IDEgLyAwOwovKioKICogQ29udmVydHMgYHZhbHVlYCB0byBhIHN0cmluZyBrZXkgaWYgaXQncyBub3QgYSBzdHJpbmcgb3Igc3ltYm9sLgogKgogKiBAcHJpdmF0ZQogKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBpbnNwZWN0LgogKiBAcmV0dXJucyB7c3RyaW5nfHN5bWJvbH0gUmV0dXJucyB0aGUga2V5LgogKi8KCmZ1bmN0aW9uIHRvS2V5KHZhbHVlKSB7CiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJyB8fCBpc1N5bWJvbF8xKHZhbHVlKSkgewogICAgcmV0dXJuIHZhbHVlOwogIH0KCiAgdmFyIHJlc3VsdCA9IHZhbHVlICsgJyc7CiAgcmV0dXJuIHJlc3VsdCA9PSAnMCcgJiYgMSAvIHZhbHVlID09IC1JTkZJTklUWSA/ICctMCcgOiByZXN1bHQ7Cn0KCnZhciBfdG9LZXkgPSB0b0tleTsKLyoqCiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmdldGAgd2l0aG91dCBzdXBwb3J0IGZvciBkZWZhdWx0IHZhbHVlcy4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LgogKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LgogKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmVzb2x2ZWQgdmFsdWUuCiAqLwoKZnVuY3Rpb24gYmFzZUdldChvYmplY3QsIHBhdGgpIHsKICBwYXRoID0gX2Nhc3RQYXRoKHBhdGgsIG9iamVjdCk7CiAgdmFyIGluZGV4ID0gMCwKICAgICAgbGVuZ3RoID0gcGF0aC5sZW5ndGg7CgogIHdoaWxlIChvYmplY3QgIT0gbnVsbCAmJiBpbmRleCA8IGxlbmd0aCkgewogICAgb2JqZWN0ID0gb2JqZWN0W190b0tleShwYXRoW2luZGV4KytdKV07CiAgfQoKICByZXR1cm4gaW5kZXggJiYgaW5kZXggPT0gbGVuZ3RoID8gb2JqZWN0IDogdW5kZWZpbmVkOwp9Cgp2YXIgX2Jhc2VHZXQgPSBiYXNlR2V0OwovKioKICogR2V0cyB0aGUgdmFsdWUgYXQgYHBhdGhgIG9mIGBvYmplY3RgLiBJZiB0aGUgcmVzb2x2ZWQgdmFsdWUgaXMKICogYHVuZGVmaW5lZGAsIHRoZSBgZGVmYXVsdFZhbHVlYCBpcyByZXR1cm5lZCBpbiBpdHMgcGxhY2UuCiAqCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIF8KICogQHNpbmNlIDMuNy4wCiAqIEBjYXRlZ29yeSBPYmplY3QKICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LgogKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LgogKiBAcGFyYW0geyp9IFtkZWZhdWx0VmFsdWVdIFRoZSB2YWx1ZSByZXR1cm5lZCBmb3IgYHVuZGVmaW5lZGAgcmVzb2x2ZWQgdmFsdWVzLgogKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmVzb2x2ZWQgdmFsdWUuCiAqIEBleGFtcGxlCiAqCiAqIHZhciBvYmplY3QgPSB7ICdhJzogW3sgJ2InOiB7ICdjJzogMyB9IH1dIH07CiAqCiAqIF8uZ2V0KG9iamVjdCwgJ2FbMF0uYi5jJyk7CiAqIC8vID0+IDMKICoKICogXy5nZXQob2JqZWN0LCBbJ2EnLCAnMCcsICdiJywgJ2MnXSk7CiAqIC8vID0+IDMKICoKICogXy5nZXQob2JqZWN0LCAnYS5iLmMnLCAnZGVmYXVsdCcpOwogKiAvLyA9PiAnZGVmYXVsdCcKICovCgpmdW5jdGlvbiBnZXQob2JqZWN0LCBwYXRoLCBkZWZhdWx0VmFsdWUpIHsKICB2YXIgcmVzdWx0ID0gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBfYmFzZUdldChvYmplY3QsIHBhdGgpOwogIHJldHVybiByZXN1bHQgPT09IHVuZGVmaW5lZCA/IGRlZmF1bHRWYWx1ZSA6IHJlc3VsdDsKfQoKdmFyIGdldF8xID0gZ2V0OwovKioKICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaGFzSW5gIHdpdGhvdXQgc3VwcG9ydCBmb3IgZGVlcCBwYXRocy4KICoKICogQHByaXZhdGUKICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIFRoZSBvYmplY3QgdG8gcXVlcnkuCiAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBrZXkgVGhlIGtleSB0byBjaGVjay4KICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLgogKi8KCmZ1bmN0aW9uIGJhc2VIYXNJbihvYmplY3QsIGtleSkgewogIHJldHVybiBvYmplY3QgIT0gbnVsbCAmJiBrZXkgaW4gT2JqZWN0KG9iamVjdCk7Cn0KCnZhciBfYmFzZUhhc0luID0gYmFzZUhhc0luOwovKioKICogQ2hlY2tzIGlmIGBwYXRoYCBleGlzdHMgb24gYG9iamVjdGAuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS4KICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggdG8gY2hlY2suCiAqIEBwYXJhbSB7RnVuY3Rpb259IGhhc0Z1bmMgVGhlIGZ1bmN0aW9uIHRvIGNoZWNrIHByb3BlcnRpZXMuCiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgcGF0aGAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuCiAqLwoKZnVuY3Rpb24gaGFzUGF0aChvYmplY3QsIHBhdGgsIGhhc0Z1bmMpIHsKICBwYXRoID0gX2Nhc3RQYXRoKHBhdGgsIG9iamVjdCk7CiAgdmFyIGluZGV4ID0gLTEsCiAgICAgIGxlbmd0aCA9IHBhdGgubGVuZ3RoLAogICAgICByZXN1bHQgPSBmYWxzZTsKCiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHsKICAgIHZhciBrZXkgPSBfdG9LZXkocGF0aFtpbmRleF0pOwoKICAgIGlmICghKHJlc3VsdCA9IG9iamVjdCAhPSBudWxsICYmIGhhc0Z1bmMob2JqZWN0LCBrZXkpKSkgewogICAgICBicmVhazsKICAgIH0KCiAgICBvYmplY3QgPSBvYmplY3Rba2V5XTsKICB9CgogIGlmIChyZXN1bHQgfHwgKytpbmRleCAhPSBsZW5ndGgpIHsKICAgIHJldHVybiByZXN1bHQ7CiAgfQoKICBsZW5ndGggPSBvYmplY3QgPT0gbnVsbCA/IDAgOiBvYmplY3QubGVuZ3RoOwogIHJldHVybiAhIWxlbmd0aCAmJiBpc0xlbmd0aF8xKGxlbmd0aCkgJiYgX2lzSW5kZXgoa2V5LCBsZW5ndGgpICYmIChpc0FycmF5XzEob2JqZWN0KSB8fCBpc0FyZ3VtZW50c18xKG9iamVjdCkpOwp9Cgp2YXIgX2hhc1BhdGggPSBoYXNQYXRoOwovKioKICogQ2hlY2tzIGlmIGBwYXRoYCBpcyBhIGRpcmVjdCBvciBpbmhlcml0ZWQgcHJvcGVydHkgb2YgYG9iamVjdGAuCiAqCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIF8KICogQHNpbmNlIDQuMC4wCiAqIEBjYXRlZ29yeSBPYmplY3QKICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LgogKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCB0byBjaGVjay4KICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBwYXRoYCBleGlzdHMsIGVsc2UgYGZhbHNlYC4KICogQGV4YW1wbGUKICoKICogdmFyIG9iamVjdCA9IF8uY3JlYXRlKHsgJ2EnOiBfLmNyZWF0ZSh7ICdiJzogMiB9KSB9KTsKICoKICogXy5oYXNJbihvYmplY3QsICdhJyk7CiAqIC8vID0+IHRydWUKICoKICogXy5oYXNJbihvYmplY3QsICdhLmInKTsKICogLy8gPT4gdHJ1ZQogKgogKiBfLmhhc0luKG9iamVjdCwgWydhJywgJ2InXSk7CiAqIC8vID0+IHRydWUKICoKICogXy5oYXNJbihvYmplY3QsICdiJyk7CiAqIC8vID0+IGZhbHNlCiAqLwoKZnVuY3Rpb24gaGFzSW4ob2JqZWN0LCBwYXRoKSB7CiAgcmV0dXJuIG9iamVjdCAhPSBudWxsICYmIF9oYXNQYXRoKG9iamVjdCwgcGF0aCwgX2Jhc2VIYXNJbik7Cn0KCnZhciBoYXNJbl8xID0gaGFzSW47Ci8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIHZhbHVlIGNvbXBhcmlzb25zLiAqLwoKdmFyIENPTVBBUkVfUEFSVElBTF9GTEFHID0gMSwKICAgIENPTVBBUkVfVU5PUkRFUkVEX0ZMQUcgPSAyOwovKioKICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ubWF0Y2hlc1Byb3BlcnR5YCB3aGljaCBkb2Vzbid0IGNsb25lIGBzcmNWYWx1ZWAuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuCiAqIEBwYXJhbSB7Kn0gc3JjVmFsdWUgVGhlIHZhbHVlIHRvIG1hdGNoLgogKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBzcGVjIGZ1bmN0aW9uLgogKi8KCmZ1bmN0aW9uIGJhc2VNYXRjaGVzUHJvcGVydHkocGF0aCwgc3JjVmFsdWUpIHsKICBpZiAoX2lzS2V5KHBhdGgpICYmIF9pc1N0cmljdENvbXBhcmFibGUoc3JjVmFsdWUpKSB7CiAgICByZXR1cm4gX21hdGNoZXNTdHJpY3RDb21wYXJhYmxlKF90b0tleShwYXRoKSwgc3JjVmFsdWUpOwogIH0KCiAgcmV0dXJuIGZ1bmN0aW9uIChvYmplY3QpIHsKICAgIHZhciBvYmpWYWx1ZSA9IGdldF8xKG9iamVjdCwgcGF0aCk7CiAgICByZXR1cm4gb2JqVmFsdWUgPT09IHVuZGVmaW5lZCAmJiBvYmpWYWx1ZSA9PT0gc3JjVmFsdWUgPyBoYXNJbl8xKG9iamVjdCwgcGF0aCkgOiBfYmFzZUlzRXF1YWwoc3JjVmFsdWUsIG9ialZhbHVlLCBDT01QQVJFX1BBUlRJQUxfRkxBRyB8IENPTVBBUkVfVU5PUkRFUkVEX0ZMQUcpOwogIH07Cn0KCnZhciBfYmFzZU1hdGNoZXNQcm9wZXJ0eSA9IGJhc2VNYXRjaGVzUHJvcGVydHk7Ci8qKgogKiBUaGlzIG1ldGhvZCByZXR1cm5zIHRoZSBmaXJzdCBhcmd1bWVudCBpdCByZWNlaXZlcy4KICoKICogQHN0YXRpYwogKiBAc2luY2UgMC4xLjAKICogQG1lbWJlck9mIF8KICogQGNhdGVnb3J5IFV0aWwKICogQHBhcmFtIHsqfSB2YWx1ZSBBbnkgdmFsdWUuCiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIGB2YWx1ZWAuCiAqIEBleGFtcGxlCiAqCiAqIHZhciBvYmplY3QgPSB7ICdhJzogMSB9OwogKgogKiBjb25zb2xlLmxvZyhfLmlkZW50aXR5KG9iamVjdCkgPT09IG9iamVjdCk7CiAqIC8vID0+IHRydWUKICovCgpmdW5jdGlvbiBpZGVudGl0eSh2YWx1ZSkgewogIHJldHVybiB2YWx1ZTsKfQoKdmFyIGlkZW50aXR5XzEgPSBpZGVudGl0eTsKLyoqCiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnByb3BlcnR5YCB3aXRob3V0IHN1cHBvcnQgZm9yIGRlZXAgcGF0aHMuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LgogKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBhY2Nlc3NvciBmdW5jdGlvbi4KICovCgpmdW5jdGlvbiBiYXNlUHJvcGVydHkoa2V5KSB7CiAgcmV0dXJuIGZ1bmN0aW9uIChvYmplY3QpIHsKICAgIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldOwogIH07Cn0KCnZhciBfYmFzZVByb3BlcnR5ID0gYmFzZVByb3BlcnR5OwovKioKICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlUHJvcGVydHlgIHdoaWNoIHN1cHBvcnRzIGRlZXAgcGF0aHMuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuCiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGFjY2Vzc29yIGZ1bmN0aW9uLgogKi8KCmZ1bmN0aW9uIGJhc2VQcm9wZXJ0eURlZXAocGF0aCkgewogIHJldHVybiBmdW5jdGlvbiAob2JqZWN0KSB7CiAgICByZXR1cm4gX2Jhc2VHZXQob2JqZWN0LCBwYXRoKTsKICB9Owp9Cgp2YXIgX2Jhc2VQcm9wZXJ0eURlZXAgPSBiYXNlUHJvcGVydHlEZWVwOwovKioKICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgdmFsdWUgYXQgYHBhdGhgIG9mIGEgZ2l2ZW4gb2JqZWN0LgogKgogKiBAc3RhdGljCiAqIEBtZW1iZXJPZiBfCiAqIEBzaW5jZSAyLjQuMAogKiBAY2F0ZWdvcnkgVXRpbAogKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LgogKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBhY2Nlc3NvciBmdW5jdGlvbi4KICogQGV4YW1wbGUKICoKICogdmFyIG9iamVjdHMgPSBbCiAqICAgeyAnYSc6IHsgJ2InOiAyIH0gfSwKICogICB7ICdhJzogeyAnYic6IDEgfSB9CiAqIF07CiAqCiAqIF8ubWFwKG9iamVjdHMsIF8ucHJvcGVydHkoJ2EuYicpKTsKICogLy8gPT4gWzIsIDFdCiAqCiAqIF8ubWFwKF8uc29ydEJ5KG9iamVjdHMsIF8ucHJvcGVydHkoWydhJywgJ2InXSkpLCAnYS5iJyk7CiAqIC8vID0+IFsxLCAyXQogKi8KCmZ1bmN0aW9uIHByb3BlcnR5KHBhdGgpIHsKICByZXR1cm4gX2lzS2V5KHBhdGgpID8gX2Jhc2VQcm9wZXJ0eShfdG9LZXkocGF0aCkpIDogX2Jhc2VQcm9wZXJ0eURlZXAocGF0aCk7Cn0KCnZhciBwcm9wZXJ0eV8xID0gcHJvcGVydHk7Ci8qKgogKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pdGVyYXRlZWAuCiAqCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7Kn0gW3ZhbHVlPV8uaWRlbnRpdHldIFRoZSB2YWx1ZSB0byBjb252ZXJ0IHRvIGFuIGl0ZXJhdGVlLgogKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIGl0ZXJhdGVlLgogKi8KCmZ1bmN0aW9uIGJhc2VJdGVyYXRlZSh2YWx1ZSkgewogIC8vIERvbid0IHN0b3JlIHRoZSBgdHlwZW9mYCByZXN1bHQgaW4gYSB2YXJpYWJsZSB0byBhdm9pZCBhIEpJVCBidWcgaW4gU2FmYXJpIDkuCiAgLy8gU2VlIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xNTYwMzQgZm9yIG1vcmUgZGV0YWlscy4KICBpZiAodHlwZW9mIHZhbHVlID09ICdmdW5jdGlvbicpIHsKICAgIHJldHVybiB2YWx1ZTsKICB9CgogIGlmICh2YWx1ZSA9PSBudWxsKSB7CiAgICByZXR1cm4gaWRlbnRpdHlfMTsKICB9CgogIGlmIChfdHlwZW9mKHZhbHVlKSA9PSAnb2JqZWN0JykgewogICAgcmV0dXJuIGlzQXJyYXlfMSh2YWx1ZSkgPyBfYmFzZU1hdGNoZXNQcm9wZXJ0eSh2YWx1ZVswXSwgdmFsdWVbMV0pIDogX2Jhc2VNYXRjaGVzKHZhbHVlKTsKICB9CgogIHJldHVybiBwcm9wZXJ0eV8xKHZhbHVlKTsKfQoKdmFyIF9iYXNlSXRlcmF0ZWUgPSBiYXNlSXRlcmF0ZWU7Ci8qKgogKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLm1heGAgZXhjZXB0IHRoYXQgaXQgYWNjZXB0cyBgaXRlcmF0ZWVgIHdoaWNoIGlzCiAqIGludm9rZWQgZm9yIGVhY2ggZWxlbWVudCBpbiBgYXJyYXlgIHRvIGdlbmVyYXRlIHRoZSBjcml0ZXJpb24gYnkgd2hpY2gKICogdGhlIHZhbHVlIGlzIHJhbmtlZC4gVGhlIGl0ZXJhdGVlIGlzIGludm9rZWQgd2l0aCBvbmUgYXJndW1lbnQ6ICh2YWx1ZSkuCiAqCiAqIEBzdGF0aWMKICogQG1lbWJlck9mIF8KICogQHNpbmNlIDQuMC4wCiAqIEBjYXRlZ29yeSBNYXRoCiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpdGVyYXRlIG92ZXIuCiAqIEBwYXJhbSB7RnVuY3Rpb259IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgaXRlcmF0ZWUgaW52b2tlZCBwZXIgZWxlbWVudC4KICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIG1heGltdW0gdmFsdWUuCiAqIEBleGFtcGxlCiAqCiAqIHZhciBvYmplY3RzID0gW3sgJ24nOiAxIH0sIHsgJ24nOiAyIH1dOwogKgogKiBfLm1heEJ5KG9iamVjdHMsIGZ1bmN0aW9uKG8pIHsgcmV0dXJuIG8ubjsgfSk7CiAqIC8vID0+IHsgJ24nOiAyIH0KICoKICogLy8gVGhlIGBfLnByb3BlcnR5YCBpdGVyYXRlZSBzaG9ydGhhbmQuCiAqIF8ubWF4Qnkob2JqZWN0cywgJ24nKTsKICogLy8gPT4geyAnbic6IDIgfQogKi8KCmZ1bmN0aW9uIG1heEJ5KGFycmF5LCBpdGVyYXRlZSkgewogIHJldHVybiBhcnJheSAmJiBhcnJheS5sZW5ndGggPyBfYmFzZUV4dHJlbXVtKGFycmF5LCBfYmFzZUl0ZXJhdGVlKGl0ZXJhdGVlKSwgX2Jhc2VHdCkgOiB1bmRlZmluZWQ7Cn0KCnZhciBtYXhCeV8xID0gbWF4Qnk7CnZhciBfZXhjbHVkZWQgPSBbImNvbnRyb2wiXSwKICAgIF9leGNsdWRlZDIgPSBbImNvbnRyb2wiXSwKICAgIF9leGNsdWRlZDMgPSBbImNvbnRyb2wiXSwKICAgIF9leGNsdWRlZDQgPSBbInJvb3RTY2hlbWEiXSwKICAgIF9leGNsdWRlZDUgPSBbImNvbnRyb2wiXSwKICAgIF9leGNsdWRlZDYgPSBbImNvbnRyb2wiXSwKICAgIF9leGNsdWRlZDcgPSBbImNvbnRyb2wiXTsKLyoqDQogKiBDb25zdHJ1Y3RzIGEgcHJvcHMgZGVjbGFyYXRpb24gZm9yIFZ1ZSBjb21wb25lbnRzIHdoaWNoIGNhbiBiZSB1c2VkDQogKiBmb3IgcmVnaXN0ZXJlZCByZW5kZXJlcnMgYW5kIGNlbGxzLiBUaGVzZSBhcmUgdHlwaWNhbGx5IHVzZWQgaW4gY29tYmluYXRpb24NCiAqIHdpdGggb25lIG9mIHRoZSBwcm92aWRlZCBiaW5kaW5ncywgZS5nLiAndXNlSnNvbkZvcm1zQ29udHJvbCcuDQogKg0KICogVXNlIHRoZSBnZW5lcmljIHR5cGUgcGFyYW1ldGVyIHdoZW4gdXNpbmcgYSBzcGVjaWFsaXplZCBiaW5kaW5nLCBlLmcuDQogKiBgcmVuZGVyZXJQcm9wczxMYXlvdXQ+KClgIGluIGNvbWJpbmF0aW9uIHdpdGggYHVzZUpzb25Gb3Jtc0xheW91dGAgb3INCiAqIGByZW5kZXJlclByb3BzPENvbnRyb2xFbGVtZW50PigpYCBpbiBjb21iaW5hdGlvbiB3aXRoIGB1c2VKc29uRm9ybXNDb250cm9sYC4NCiAqLwoKdmFyIHJlbmRlcmVyUHJvcHMgPSBmdW5jdGlvbiByZW5kZXJlclByb3BzKCkgewogIHJldHVybiB7CiAgICBzY2hlbWE6IHsKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgIHR5cGU6IFtPYmplY3QsIEJvb2xlYW5dCiAgICB9LAogICAgdWlzY2hlbWE6IHsKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgIHR5cGU6IE9iamVjdAogICAgfSwKICAgIHBhdGg6IHsKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgIHR5cGU6IFN0cmluZwogICAgfSwKICAgIGVuYWJsZWQ6IHsKICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICB0eXBlOiBCb29sZWFuLAogICAgICAiZGVmYXVsdCI6IHVuZGVmaW5lZAogICAgfSwKICAgIHJlbmRlcmVyczogewogICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgIHR5cGU6IEFycmF5LAogICAgICAiZGVmYXVsdCI6IHVuZGVmaW5lZAogICAgfSwKICAgIGNlbGxzOiB7CiAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgdHlwZTogQXJyYXksCiAgICAgICJkZWZhdWx0IjogdW5kZWZpbmVkCiAgICB9CiAgfTsKfTsKLyoqDQogKiBDb25zdHJ1Y3RzIGEgcHJvcHMgZGVjbGFyYXRpb24gZm9yIFZ1ZSBjb21wb25lbnRzIHdoaWNoIHNoYWxsIGJlIHVzZWQgYXMNCiAqIG1hc3RlciBsaXN0IGl0ZW1zLg0KICovCgoKdmFyIG1hc3Rlckxpc3RJdGVtUHJvcHMgPSBmdW5jdGlvbiBtYXN0ZXJMaXN0SXRlbVByb3BzKCkgewogIHJldHVybiB7CiAgICBpbmRleDogewogICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgdHlwZTogTnVtYmVyCiAgICB9LAogICAgc2VsZWN0ZWQ6IHsKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgIHR5cGU6IEJvb2xlYW4KICAgIH0sCiAgICBwYXRoOiB7CiAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICB0eXBlOiBTdHJpbmcKICAgIH0sCiAgICBzY2hlbWE6IHsKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgIHR5cGU6IFtPYmplY3QsIEJvb2xlYW5dCiAgICB9LAogICAgaGFuZGxlU2VsZWN0OiB7CiAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgdHlwZTogRnVuY3Rpb24sCiAgICAgICJkZWZhdWx0IjogdW5kZWZpbmVkCiAgICB9LAogICAgcmVtb3ZlSXRlbTogewogICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgIHR5cGU6IEZ1bmN0aW9uLAogICAgICAiZGVmYXVsdCI6IHVuZGVmaW5lZAogICAgfQogIH07Cn07CgpmdW5jdGlvbiB1c2VDb250cm9sKHByb3BzLCBzdGF0ZU1hcCwgZGlzcGF0Y2hNYXApIHsKICB2YXIganNvbmZvcm1zID0gY29tcG9zaXRpb25BcGkuaW5qZWN0KCdqc29uZm9ybXMnKTsKICB2YXIgZGlzcGF0Y2ggPSBjb21wb3NpdGlvbkFwaS5pbmplY3QoJ2Rpc3BhdGNoJyk7CgogIGlmICghanNvbmZvcm1zIHx8ICFkaXNwYXRjaCkgewogICAgdGhyb3cgIidqc29uZm9ybXMnIG9yICdkaXNwYXRjaCcgY291bGRuJ3QgYmUgaW5qZWN0ZWQuIEFyZSB5b3Ugd2l0aGluIEpTT04gRm9ybXM/IjsKICB9CgogIHZhciBpZCA9IGNvbXBvc2l0aW9uQXBpLnJlZih1bmRlZmluZWQpOwogIHZhciBjb250cm9sID0gY29tcG9zaXRpb25BcGkuY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIF9vYmplY3RTcHJlYWQyKF9vYmplY3RTcHJlYWQyKHt9LCBzdGF0ZU1hcCh7CiAgICAgIGpzb25mb3JtczoganNvbmZvcm1zCiAgICB9LCBwcm9wcykpLCB7fSwgewogICAgICBpZDogaWQudmFsdWUKICAgIH0pOwogIH0pOwogIHZhciBkaXNwYXRjaE1ldGhvZHMgPSBkaXNwYXRjaE1hcCA9PT0gbnVsbCB8fCBkaXNwYXRjaE1hcCA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGlzcGF0Y2hNYXAoZGlzcGF0Y2gpOwogIGNvbXBvc2l0aW9uQXBpLm9uQmVmb3JlTW91bnQoZnVuY3Rpb24gKCkgewogICAgaWYgKGNvbnRyb2wudmFsdWUudWlzY2hlbWEuc2NvcGUpIHsKICAgICAgaWQudmFsdWUgPSBjb3JlLmNyZWF0ZUlkKGNvbnRyb2wudmFsdWUudWlzY2hlbWEuc2NvcGUpOwogICAgfQogIH0pOwogIGNvbXBvc2l0aW9uQXBpLm9uVW5tb3VudGVkKGZ1bmN0aW9uICgpIHsKICAgIGlmIChpZC52YWx1ZSkgewogICAgICBjb3JlLnJlbW92ZUlkKGlkLnZhbHVlKTsKICAgICAgaWQudmFsdWUgPSB1bmRlZmluZWQ7CiAgICB9CiAgfSk7CiAgcmV0dXJuIF9vYmplY3RTcHJlYWQyKHsKICAgIGNvbnRyb2w6IGNvbnRyb2wKICB9LCBkaXNwYXRjaE1ldGhvZHMpOwp9Ci8qKg0KICogUHJvdmlkZXMgZ2VuZXJpYyBiaW5kaW5ncyBmb3IgJ0NvbnRyb2wnIGVsZW1lbnRzLg0KICogU2hvdWxkIGJlIHVzZWQgd2hlbiBubyBzcGVjaWFsaXplZCBiaW5kaW5ncyBhcmUgYXBwcm9wcmlhdGUuDQogKg0KICogQWNjZXNzIGJpbmRpbmdzIHZpYSB0aGUgcHJvdmlkZWQgcmVhY3RpdmUgYGNvbnRyb2xgIG9iamVjdC4NCiAqIERpc3BhdGNoIGNoYW5nZXMgdmlhIHRoZSBwcm92aWRlZCBgaGFuZGxlQ2hhbmdlYCBtZXRob2QuDQogKi8KCgp2YXIgdXNlSnNvbkZvcm1zQ29udHJvbCA9IGZ1bmN0aW9uIHVzZUpzb25Gb3Jtc0NvbnRyb2wocHJvcHMpIHsKICByZXR1cm4gdXNlQ29udHJvbChwcm9wcywgY29yZS5tYXBTdGF0ZVRvQ29udHJvbFByb3BzLCBjb3JlLm1hcERpc3BhdGNoVG9Db250cm9sUHJvcHMpOwp9OwovKioNCiAqIFByb3ZpZGVzIGJpbmRpbmdzIGZvciAnQ29udHJvbCcgZWxlbWVudHMgd2hpY2ggY2FuIHByb3ZpZGUgYSAnZGV0YWlsJywNCiAqIGZvciBleGFtcGxlIGFycmF5IGFuZCBvYmplY3QgcmVuZGVyZXJzLg0KICoNCiAqIEFjY2VzcyBiaW5kaW5ncyB2aWEgdGhlIHByb3ZpZGVkIHJlYWN0aXZlIGBjb250cm9sYCBvYmplY3QuDQogKiBEaXNwYXRjaCBjaGFuZ2VzIHZpYSB0aGUgcHJvdmlkZWQgYGhhbmRsZUNoYW5nZWAgbWV0aG9kLg0KICovCgoKdmFyIHVzZUpzb25Gb3Jtc0NvbnRyb2xXaXRoRGV0YWlsID0gZnVuY3Rpb24gdXNlSnNvbkZvcm1zQ29udHJvbFdpdGhEZXRhaWwocHJvcHMpIHsKICByZXR1cm4gdXNlQ29udHJvbChwcm9wcywgY29yZS5tYXBTdGF0ZVRvQ29udHJvbFdpdGhEZXRhaWxQcm9wcywgY29yZS5tYXBEaXNwYXRjaFRvQ29udHJvbFByb3BzKTsKfTsKLyoqDQogKiBQcm92aWRlcyBiaW5kaW5ncyBmb3IgJ0NvbnRyb2wnIGVsZW1lbnRzIHdoaWNoIHJlc29sdmUgdG8gJ2VudW0nIHNjaGVtYSBlbGVtZW50cy4NCiAqDQogKiBBY2Nlc3MgYmluZGluZ3MgdmlhIHRoZSBwcm92aWRlZCByZWFjdGl2ZSBgY29udHJvbGAgb2JqZWN0Lg0KICogRGlzcGF0Y2ggY2hhbmdlcyB2aWEgdGhlIHByb3ZpZGVkIGBoYW5kbGVDaGFuZ2VgIG1ldGhvZC4NCiAqLwoKCnZhciB1c2VKc29uRm9ybXNFbnVtQ29udHJvbCA9IGZ1bmN0aW9uIHVzZUpzb25Gb3Jtc0VudW1Db250cm9sKHByb3BzKSB7CiAgcmV0dXJuIHVzZUNvbnRyb2wocHJvcHMsIGNvcmUubWFwU3RhdGVUb0VudW1Db250cm9sUHJvcHMsIGNvcmUubWFwRGlzcGF0Y2hUb0NvbnRyb2xQcm9wcyk7Cn07Ci8qKg0KICogUHJvdmlkZXMgYmluZGluZ3MgZm9yICdDb250cm9sJyBlbGVtZW50cyB3aGljaCByZXNvbHZlIHRvIG1hbnVhbGx5IGNvbnN0cnVjdGVkDQogKiAnb25lT2YnIGVudW1zLiBUaGVzZSBhcmUgdXNlZCB0byBlbmhhbmNlIGVudW1zIHdpdGggbGFiZWwgc3VwcG9ydC4NCiAqDQogKiBBY2Nlc3MgYmluZGluZ3MgdmlhIHRoZSBwcm92aWRlZCByZWFjdGl2ZSBgY29udHJvbGAgb2JqZWN0Lg0KICogRGlzcGF0Y2ggY2hhbmdlcyB2aWEgdGhlIHByb3ZpZGVkIGBoYW5kbGVDaGFuZ2VgIG1ldGhvZC4NCiAqLwoKCnZhciB1c2VKc29uRm9ybXNPbmVPZkVudW1Db250cm9sID0gZnVuY3Rpb24gdXNlSnNvbkZvcm1zT25lT2ZFbnVtQ29udHJvbChwcm9wcykgewogIHJldHVybiB1c2VDb250cm9sKHByb3BzLCBjb3JlLm1hcFN0YXRlVG9PbmVPZkVudW1Db250cm9sUHJvcHMsIGNvcmUubWFwRGlzcGF0Y2hUb0NvbnRyb2xQcm9wcyk7Cn07Ci8qKg0KICogUHJvdmlkZXMgYmluZGluZ3MgZm9yICdDb250cm9sJyBlbGVtZW50cyB3aGljaCByZXNvbHZlIHRvICdhcnJheScgc2NoZW1hIGVsZW1lbnRzLg0KICoNCiAqIEFjY2VzcyBiaW5kaW5ncyB2aWEgdGhlIHByb3ZpZGVkIHJlYWN0aXZlIGBjb250cm9sYCBvYmplY3QuDQogKiBEaXNwYXRjaCBjaGFuZ2VzIHZpYSB0aGUgcHJvdmlkZWQgYGhhbmRsZUNoYW5nZWAgbWV0aG9kLg0KICovCgoKdmFyIHVzZUpzb25Gb3Jtc0FycmF5Q29udHJvbCA9IGZ1bmN0aW9uIHVzZUpzb25Gb3Jtc0FycmF5Q29udHJvbChwcm9wcykgewogIHJldHVybiB1c2VDb250cm9sKHByb3BzLCBjb3JlLm1hcFN0YXRlVG9BcnJheUNvbnRyb2xQcm9wcywgY29yZS5tYXBEaXNwYXRjaFRvQXJyYXlDb250cm9sUHJvcHMpOwp9OwovKioNCiAqIFByb3ZpZGVzIGJpbmRpbmdzIGZvciAnQ29udHJvbCcgZWxlbWVudHMgd2hpY2ggcmVzb2x2ZSB0byAnYWxsT2YnIHNjaGVtYSBlbGVtZW50cy4NCiAqDQogKiBBY2Nlc3MgYmluZGluZ3MgdmlhIHRoZSBwcm92aWRlZCByZWFjdGl2ZSBgY29udHJvbGAgb2JqZWN0Lg0KICogRGlzcGF0Y2ggY2hhbmdlcyB2aWEgdGhlIHByb3ZpZGVkIGBoYW5kbGVDaGFuZ2VgIG1ldGhvZC4NCiAqLwoKCnZhciB1c2VKc29uRm9ybXNBbGxPZkNvbnRyb2wgPSBmdW5jdGlvbiB1c2VKc29uRm9ybXNBbGxPZkNvbnRyb2wocHJvcHMpIHsKICByZXR1cm4gdXNlQ29udHJvbChwcm9wcywgY29yZS5tYXBTdGF0ZVRvQWxsT2ZQcm9wcywgY29yZS5tYXBEaXNwYXRjaFRvQ29udHJvbFByb3BzKTsKfTsKLyoqDQogKiBQcm92aWRlcyBiaW5kaW5ncyBmb3IgJ0NvbnRyb2wnIGVsZW1lbnRzIHdoaWNoIHJlc29sdmUgdG8gJ2FueU9mJyBzY2hlbWEgZWxlbWVudHMuDQogKg0KICogQWNjZXNzIGJpbmRpbmdzIHZpYSB0aGUgcHJvdmlkZWQgcmVhY3RpdmUgYGNvbnRyb2xgIG9iamVjdC4NCiAqIERpc3BhdGNoIGNoYW5nZXMgdmlhIHRoZSBwcm92aWRlZCBgaGFuZGxlQ2hhbmdlYCBtZXRob2QuDQogKi8KCgp2YXIgdXNlSnNvbkZvcm1zQW55T2ZDb250cm9sID0gZnVuY3Rpb24gdXNlSnNvbkZvcm1zQW55T2ZDb250cm9sKHByb3BzKSB7CiAgcmV0dXJuIHVzZUNvbnRyb2wocHJvcHMsIGNvcmUubWFwU3RhdGVUb0FueU9mUHJvcHMsIGNvcmUubWFwRGlzcGF0Y2hUb0NvbnRyb2xQcm9wcyk7Cn07Ci8qKg0KICogUHJvdmlkZXMgYmluZGluZ3MgZm9yICdDb250cm9sJyBlbGVtZW50cyB3aGljaCByZXNvbHZlIHRvICdvbmVPZicgc2NoZW1hIGVsZW1lbnRzLg0KICoNCiAqIEFjY2VzcyBiaW5kaW5ncyB2aWEgdGhlIHByb3ZpZGVkIHJlYWN0aXZlIGBjb250cm9sYCBvYmplY3QuDQogKiBEaXNwYXRjaCBjaGFuZ2VzIHZpYSB0aGUgcHJvdmlkZWQgYGhhbmRsZUNoYW5nZWAgbWV0aG9kLg0KICovCgoKdmFyIHVzZUpzb25Gb3Jtc09uZU9mQ29udHJvbCA9IGZ1bmN0aW9uIHVzZUpzb25Gb3Jtc09uZU9mQ29udHJvbChwcm9wcykgewogIHJldHVybiB1c2VDb250cm9sKHByb3BzLCBjb3JlLm1hcFN0YXRlVG9PbmVPZlByb3BzLCBjb3JlLm1hcERpc3BhdGNoVG9Db250cm9sUHJvcHMpOwp9OwovKioNCiAqIFByb3ZpZGVzIGJpbmRpbmdzIGZvciAnTGF5b3V0JyBlbGVtZW50cywgZS5nLiBWZXJ0aWNhbExheW91dCwgSG9yaXpvbnRhbExheW91dCwgR3JvdXAuDQogKg0KICogQWNjZXNzIGJpbmRpbmdzIHZpYSB0aGUgcHJvdmlkZWQgcmVhY3RpdmUgJ2xheW91dCcgb2JqZWN0Lg0KICovCgoKdmFyIHVzZUpzb25Gb3Jtc0xheW91dCA9IGZ1bmN0aW9uIHVzZUpzb25Gb3Jtc0xheW91dChwcm9wcykgewogIHZhciBfdXNlQ29udHJvbCA9IHVzZUNvbnRyb2wocHJvcHMsIGNvcmUubWFwU3RhdGVUb0xheW91dFByb3BzKSwKICAgICAgY29udHJvbCA9IF91c2VDb250cm9sLmNvbnRyb2wsCiAgICAgIG90aGVyID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF91c2VDb250cm9sLCBfZXhjbHVkZWQpOwoKICByZXR1cm4gX29iamVjdFNwcmVhZDIoewogICAgbGF5b3V0OiBjb250cm9sCiAgfSwgb3RoZXIpOwp9OwovKioNCiAqIFByb3ZpZGVzIGJpbmRpbmdzIGZvciAnQ29udHJvbCcgZWxlbWVudHMgd2hpY2ggcmVzb2x2ZSB0byAnYXJyYXknIGVsZW1lbnRzIHdoaWNoDQogKiBzaGFsbCBiZSByZW5kZXJlZCBhcyBhIGxheW91dCBpbnN0ZWFkIG9mIGEgY29udHJvbC4NCiAqDQogKiBBY2Nlc3MgYmluZGluZ3MgdmlhIHRoZSBwcm92aWRlZCByZWFjdGl2ZSAnbGF5b3V0JyBvYmplY3QuDQogKi8KCgp2YXIgdXNlSnNvbkZvcm1zQXJyYXlMYXlvdXQgPSBmdW5jdGlvbiB1c2VKc29uRm9ybXNBcnJheUxheW91dChwcm9wcykgewogIHZhciBfdXNlQ29udHJvbDIgPSB1c2VDb250cm9sKHByb3BzLCBjb3JlLm1hcFN0YXRlVG9BcnJheUxheW91dFByb3BzKSwKICAgICAgY29udHJvbCA9IF91c2VDb250cm9sMi5jb250cm9sLAogICAgICBvdGhlciA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfdXNlQ29udHJvbDIsIF9leGNsdWRlZDIpOwoKICByZXR1cm4gX29iamVjdFNwcmVhZDIoewogICAgbGF5b3V0OiBjb250cm9sCiAgfSwgb3RoZXIpOwp9OwovKioNCiAqIFByb3ZpZGVzIGJpbmRpbmdzIGZvciBsaXN0IGVsZW1lbnRzIG9mIGEgbWFzdGVyLWxpc3QtZGV0YWlsIGNvbnRyb2wgc2V0dXAuDQogKiBUaGUgZWxlbWVudCB1c2luZyB0aGlzIGJpbmRpbmcgaXMgbm90IHN1cHBvc2VkIHRvIGJlIHJlZ2lzdGVyZWQgYXMgYW4gb3duIHJlbmRlcmVyDQogKiBidXQgdXNlZCBpbiBhIG1vcmUgc3BlY2lhbGl6ZWQgY29udHJvbC4NCiAqDQogKiBBY2Nlc3MgYmluZGluZ3MgdmlhIHRoZSBwcm92aWRlZCByZWFjdGl2ZSAnaXRlbScgb2JqZWN0Lg0KICovCgoKdmFyIHVzZUpzb25Gb3Jtc01hc3Rlckxpc3RJdGVtID0gZnVuY3Rpb24gdXNlSnNvbkZvcm1zTWFzdGVyTGlzdEl0ZW0ocHJvcHMpIHsKICB2YXIgX3VzZUNvbnRyb2wzID0gdXNlQ29udHJvbChwcm9wcywgY29yZS5tYXBTdGF0ZVRvTWFzdGVyTGlzdEl0ZW1Qcm9wcyksCiAgICAgIGNvbnRyb2wgPSBfdXNlQ29udHJvbDMuY29udHJvbCwKICAgICAgb3RoZXIgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3VzZUNvbnRyb2wzLCBfZXhjbHVkZWQzKTsKCiAgcmV0dXJuIF9vYmplY3RTcHJlYWQyKHsKICAgIGl0ZW06IGNvbnRyb2wKICB9LCBvdGhlcik7Cn07Ci8qKg0KICogUHJvdmlkZXMgc3BlY2lhbGl6ZWQgYmluZGluZ3Mgd2hpY2ggY2FuIGJlIHVzZWQgZm9yIGFueSByZW5kZXJlci4NCiAqIFVzZWZ1bCBmb3IgbWV0YSBlbGVtZW50cyBsaWtlIGRpc3BhdGNoZXJzLg0KICoNCiAqIEFjY2VzcyBiaW5kaW5ncyB2aWEgdGhlIHByb3ZpZGVkIHJlYWN0aXZlICdyZW5kZXJlcicgb2JqZWN0Lg0KICovCgoKdmFyIHVzZUpzb25Gb3Jtc1JlbmRlcmVyID0gZnVuY3Rpb24gdXNlSnNvbkZvcm1zUmVuZGVyZXIocHJvcHMpIHsKICB2YXIganNvbmZvcm1zID0gY29tcG9zaXRpb25BcGkuaW5qZWN0KCdqc29uZm9ybXMnKTsKICB2YXIgZGlzcGF0Y2ggPSBjb21wb3NpdGlvbkFwaS5pbmplY3QoJ2Rpc3BhdGNoJyk7CgogIGlmICghanNvbmZvcm1zIHx8ICFkaXNwYXRjaCkgewogICAgdGhyb3cgIidqc29uZm9ybXMnIG9yICdkaXNwYXRjaCcgY291bGRuJ3QgYmUgaW5qZWN0ZWQuIEFyZSB5b3Ugd2l0aGluIEpTT04gRm9ybXM/IjsKICB9CgogIHZhciByYXdQcm9wcyA9IGNvbXBvc2l0aW9uQXBpLmNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBjb3JlLm1hcFN0YXRlVG9Kc29uRm9ybXNSZW5kZXJlclByb3BzKHsKICAgICAganNvbmZvcm1zOiBqc29uZm9ybXMKICAgIH0sIHByb3BzKTsKICB9KTsKICB2YXIgcm9vdFNjaGVtYSA9IGNvbXBvc2l0aW9uQXBpLmNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiByYXdQcm9wcy52YWx1ZS5yb290U2NoZW1hOwogIH0pOwogIHZhciByZW5kZXJlciA9IGNvbXBvc2l0aW9uQXBpLmNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgIHZhciBfcmF3UHJvcHMkdmFsdWUgPSByYXdQcm9wcy52YWx1ZTsKICAgIF9yYXdQcm9wcyR2YWx1ZS5yb290U2NoZW1hOwoKICAgIHZhciByZXN0ID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yYXdQcm9wcyR2YWx1ZSwgX2V4Y2x1ZGVkNCk7CgogICAgcmV0dXJuIHJlc3Q7CiAgfSk7CiAgcmV0dXJuIHsKICAgIHJlbmRlcmVyOiByZW5kZXJlciwKICAgIHJvb3RTY2hlbWE6IHJvb3RTY2hlbWEKICB9Owp9OwovKioNCiAqIFByb3ZpZGVzIGJpbmRpbmdzIGZvciBjZWxsIGVsZW1lbnRzLiBDZWxscyBhcmUgbWVhbnQgdG8gc2hvdyBzaW1wbGUgaW5wdXRzLA0KICogZm9yIGV4YW1wbGUgd2l0aG91dCBlcnJvciB2YWxpZGF0aW9uLCB3aXRoaW4gYSBsYXJnZXIgc3RydWN0dXJlIGxpa2UgdGFibGVzLg0KICoNCiAqIEFjY2VzcyBiaW5kaW5ncyB2aWEgdGhlIHByb3ZpZGVkIHJlYWN0aXZlICdjZWxsJyBvYmplY3QuDQogKiBEaXNwYXRjaCBjaGFuZ2VzIHZpYSB0aGUgcHJvdmlkZWQgYGhhbmRsZUNoYW5nZWAgbWV0aG9kLg0KICovCgoKdmFyIHVzZUpzb25Gb3Jtc0NlbGwgPSBmdW5jdGlvbiB1c2VKc29uRm9ybXNDZWxsKHByb3BzKSB7CiAgdmFyIF91c2VDb250cm9sNCA9IHVzZUNvbnRyb2wocHJvcHMsIGNvcmUubWFwU3RhdGVUb0NlbGxQcm9wcywgY29yZS5tYXBEaXNwYXRjaFRvQ29udHJvbFByb3BzKSwKICAgICAgY29udHJvbCA9IF91c2VDb250cm9sNC5jb250cm9sLAogICAgICBvdGhlciA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfdXNlQ29udHJvbDQsIF9leGNsdWRlZDUpOwoKICByZXR1cm4gX29iamVjdFNwcmVhZDIoewogICAgY2VsbDogY29udHJvbAogIH0sIG90aGVyKTsKfTsKLyoqDQogKiBQcm92aWRlcyBiaW5kaW5ncyBmb3IgZW51bSBjZWxsIGVsZW1lbnRzLiBDZWxscyBhcmUgbWVhbnQgdG8gc2hvdyBzaW1wbGUgaW5wdXRzLA0KICogZm9yIGV4YW1wbGUgd2l0aG91dCBlcnJvciB2YWxpZGF0aW9uLCB3aXRoaW4gYSBsYXJnZXIgc3RydWN0dXJlIGxpa2UgdGFibGVzLg0KICoNCiAqIEFjY2VzcyBiaW5kaW5ncyB2aWEgdGhlIHByb3ZpZGVkIHJlYWN0aXZlICdjZWxsJyBvYmplY3QuDQogKiBEaXNwYXRjaCBjaGFuZ2VzIHZpYSB0aGUgcHJvdmlkZWQgYGhhbmRsZUNoYW5nZWAgbWV0aG9kLg0KICovCgoKdmFyIHVzZUpzb25Gb3Jtc0VudW1DZWxsID0gZnVuY3Rpb24gdXNlSnNvbkZvcm1zRW51bUNlbGwocHJvcHMpIHsKICB2YXIgX3VzZUNvbnRyb2w1ID0gdXNlQ29udHJvbChwcm9wcywgY29yZS5kZWZhdWx0TWFwU3RhdGVUb0VudW1DZWxsUHJvcHMsIGNvcmUubWFwRGlzcGF0Y2hUb0NvbnRyb2xQcm9wcyksCiAgICAgIGNvbnRyb2wgPSBfdXNlQ29udHJvbDUuY29udHJvbCwKICAgICAgb3RoZXIgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3VzZUNvbnRyb2w1LCBfZXhjbHVkZWQ2KTsKCiAgcmV0dXJuIF9vYmplY3RTcHJlYWQyKHsKICAgIGNlbGw6IGNvbnRyb2wKICB9LCBvdGhlcik7Cn07Ci8qKg0KICogUHJvdmlkZXMgYmluZGluZ3MgZm9yIGEgY2VsbCBkaXNwYXRjaGVyLiBDZWxscyBhcmUgbWVhbnQgdG8gc2hvdyBzaW1wbGUgaW5wdXRzLA0KICogZm9yIGV4YW1wbGUgd2l0aG91dCBlcnJvciB2YWxpZGF0aW9uLCB3aXRoaW4gYSBsYXJnZXIgc3RydWN0dXJlIGxpa2UgdGFibGVzLg0KICoNCiAqIEFjY2VzcyBiaW5kaW5ncyB2aWEgdGhlIHByb3ZpZGVkIHJlYWN0aXZlICdjZWxsJyBvYmplY3QuDQogKiBEaXNwYXRjaCBjaGFuZ2VzIHZpYSB0aGUgcHJvdmlkZWQgYGhhbmRsZUNoYW5nZWAgbWV0aG9kLg0KICovCgoKdmFyIHVzZUpzb25Gb3Jtc0Rpc3BhdGNoQ2VsbCA9IGZ1bmN0aW9uIHVzZUpzb25Gb3Jtc0Rpc3BhdGNoQ2VsbChwcm9wcykgewogIHZhciBfdXNlQ29udHJvbDYgPSB1c2VDb250cm9sKHByb3BzLCBjb3JlLm1hcFN0YXRlVG9EaXNwYXRjaENlbGxQcm9wcywgY29yZS5tYXBEaXNwYXRjaFRvQ29udHJvbFByb3BzKSwKICAgICAgY29udHJvbCA9IF91c2VDb250cm9sNi5jb250cm9sLAogICAgICBvdGhlciA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfdXNlQ29udHJvbDYsIF9leGNsdWRlZDcpOwoKICByZXR1cm4gX29iamVjdFNwcmVhZDIoewogICAgY2VsbDogY29udHJvbAogIH0sIG90aGVyKTsKfTsKCnZhciBzY3JpcHQkMiA9IGNvbXBvc2l0aW9uQXBpLmRlZmluZUNvbXBvbmVudCh7CiAgbmFtZTogJ2Rpc3BhdGNoLXJlbmRlcmVyJywKICBwcm9wczogX29iamVjdFNwcmVhZDIoe30sIHJlbmRlcmVyUHJvcHMoKSksCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKHByb3BzKSB7CiAgICByZXR1cm4gdXNlSnNvbkZvcm1zUmVuZGVyZXIocHJvcHMpOwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGRldGVybWluZWRSZW5kZXJlcjogZnVuY3Rpb24gZGV0ZXJtaW5lZFJlbmRlcmVyKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHJlbmRlcmVyID0gbWF4QnlfMSh0aGlzLnJlbmRlcmVyLnJlbmRlcmVycywgZnVuY3Rpb24gKHIpIHsKICAgICAgICByZXR1cm4gci50ZXN0ZXIoX3RoaXMucmVuZGVyZXIudWlzY2hlbWEsIF90aGlzLnJlbmRlcmVyLnNjaGVtYSk7CiAgICAgIH0pOwoKICAgICAgaWYgKHJlbmRlcmVyID09PSB1bmRlZmluZWQgfHwgcmVuZGVyZXIudGVzdGVyKHRoaXMucmVuZGVyZXIudWlzY2hlbWEsIHRoaXMucmVuZGVyZXIuc2NoZW1hKSA9PT0gLTEpIHsKICAgICAgICByZXR1cm4gX192dWVfY29tcG9uZW50X18kMzsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gcmVuZGVyZXIucmVuZGVyZXI7CiAgICAgIH0KICAgIH0KICB9Cn0pOwovKiBzY3JpcHQgKi8KCnZhciBfX3Z1ZV9zY3JpcHRfXyQyID0gc2NyaXB0JDI7Ci8qIHRlbXBsYXRlICovCgp2YXIgX192dWVfcmVuZGVyX18kMiA9IGZ1bmN0aW9uIF9fdnVlX3JlbmRlcl9fKCkgewogIHZhciBfdm0gPSB0aGlzOwoKICB2YXIgX2ggPSBfdm0uJGNyZWF0ZUVsZW1lbnQ7CgogIHZhciBfYyA9IF92bS5fc2VsZi5fYyB8fCBfaDsKCiAgcmV0dXJuIF9jKF92bS5kZXRlcm1pbmVkUmVuZGVyZXIsIF92bS5fYih7CiAgICB0YWc6ICJjb21wb25lbnQiCiAgfSwgJ2NvbXBvbmVudCcsIF92bS5yZW5kZXJlciwgZmFsc2UpKTsKfTsKCnZhciBfX3Z1ZV9zdGF0aWNSZW5kZXJGbnNfXyQyID0gW107Ci8qIHN0eWxlICovCgp2YXIgX192dWVfaW5qZWN0X3N0eWxlc19fJDIgPSB1bmRlZmluZWQ7Ci8qIHNjb3BlZCAqLwoKdmFyIF9fdnVlX3Njb3BlX2lkX18kMiA9IHVuZGVmaW5lZDsKLyogbW9kdWxlIGlkZW50aWZpZXIgKi8KCnZhciBfX3Z1ZV9tb2R1bGVfaWRlbnRpZmllcl9fJDIgPSB1bmRlZmluZWQ7Ci8qIGZ1bmN0aW9uYWwgdGVtcGxhdGUgKi8KCnZhciBfX3Z1ZV9pc19mdW5jdGlvbmFsX3RlbXBsYXRlX18kMiA9IGZhbHNlOwovKiBzdHlsZSBpbmplY3QgKi8KCi8qIHN0eWxlIGluamVjdCBTU1IgKi8KCi8qIHN0eWxlIGluamVjdCBzaGFkb3cgZG9tICovCgp2YXIgX192dWVfY29tcG9uZW50X18kMiA9IC8qI19fUFVSRV9fKi9ub3JtYWxpemVDb21wb25lbnQoewogIHJlbmRlcjogX192dWVfcmVuZGVyX18kMiwKICBzdGF0aWNSZW5kZXJGbnM6IF9fdnVlX3N0YXRpY1JlbmRlckZuc19fJDIKfSwgX192dWVfaW5qZWN0X3N0eWxlc19fJDIsIF9fdnVlX3NjcmlwdF9fJDIsIF9fdnVlX3Njb3BlX2lkX18kMiwgX192dWVfaXNfZnVuY3Rpb25hbF90ZW1wbGF0ZV9fJDIsIF9fdnVlX21vZHVsZV9pZGVudGlmaWVyX18kMiwgZmFsc2UsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQpOwoKdmFyIHNjcmlwdCQxID0gY29tcG9zaXRpb25BcGkuZGVmaW5lQ29tcG9uZW50KHsKICBuYW1lOiAnZGlzcGF0Y2gtY2VsbCcsCiAgcHJvcHM6IF9vYmplY3RTcHJlYWQyKHt9LCByZW5kZXJlclByb3BzKCkpLAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cChwcm9wcykgewogICAgcmV0dXJuIHVzZUpzb25Gb3Jtc0Rpc3BhdGNoQ2VsbChwcm9wcyk7CiAgfSwKICBjb21wdXRlZDogewogICAgZGV0ZXJtaW5lZENlbGw6IGZ1bmN0aW9uIGRldGVybWluZWRDZWxsKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGNlbGwgPSBtYXhCeV8xKHRoaXMuY2VsbC5jZWxscywgZnVuY3Rpb24gKHIpIHsKICAgICAgICByZXR1cm4gci50ZXN0ZXIoX3RoaXMuY2VsbC51aXNjaGVtYSwgX3RoaXMuY2VsbC5zY2hlbWEpOwogICAgICB9KTsKCiAgICAgIGlmIChjZWxsID09PSB1bmRlZmluZWQgfHwgY2VsbC50ZXN0ZXIodGhpcy5jZWxsLnVpc2NoZW1hLCB0aGlzLmNlbGwuc2NoZW1hKSA9PT0gLTEpIHsKICAgICAgICByZXR1cm4gX192dWVfY29tcG9uZW50X18kMzsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gY2VsbC5jZWxsOwogICAgICB9CiAgICB9CiAgfQp9KTsKLyogc2NyaXB0ICovCgp2YXIgX192dWVfc2NyaXB0X18kMSA9IHNjcmlwdCQxOwovKiB0ZW1wbGF0ZSAqLwoKdmFyIF9fdnVlX3JlbmRlcl9fJDEgPSBmdW5jdGlvbiBfX3Z1ZV9yZW5kZXJfXygpIHsKICB2YXIgX3ZtID0gdGhpczsKCiAgdmFyIF9oID0gX3ZtLiRjcmVhdGVFbGVtZW50OwoKICB2YXIgX2MgPSBfdm0uX3NlbGYuX2MgfHwgX2g7CgogIHJldHVybiBfYyhfdm0uZGV0ZXJtaW5lZENlbGwsIF92bS5fYih7CiAgICB0YWc6ICJjb21wb25lbnQiCiAgfSwgJ2NvbXBvbmVudCcsIF92bS5jZWxsLCBmYWxzZSkpOwp9OwoKdmFyIF9fdnVlX3N0YXRpY1JlbmRlckZuc19fJDEgPSBbXTsKLyogc3R5bGUgKi8KCnZhciBfX3Z1ZV9pbmplY3Rfc3R5bGVzX18kMSA9IHVuZGVmaW5lZDsKLyogc2NvcGVkICovCgp2YXIgX192dWVfc2NvcGVfaWRfXyQxID0gdW5kZWZpbmVkOwovKiBtb2R1bGUgaWRlbnRpZmllciAqLwoKdmFyIF9fdnVlX21vZHVsZV9pZGVudGlmaWVyX18kMSA9IHVuZGVmaW5lZDsKLyogZnVuY3Rpb25hbCB0ZW1wbGF0ZSAqLwoKdmFyIF9fdnVlX2lzX2Z1bmN0aW9uYWxfdGVtcGxhdGVfXyQxID0gZmFsc2U7Ci8qIHN0eWxlIGluamVjdCAqLwoKLyogc3R5bGUgaW5qZWN0IFNTUiAqLwoKLyogc3R5bGUgaW5qZWN0IHNoYWRvdyBkb20gKi8KCnZhciBfX3Z1ZV9jb21wb25lbnRfXyQxID0gLyojX19QVVJFX18qL25vcm1hbGl6ZUNvbXBvbmVudCh7CiAgcmVuZGVyOiBfX3Z1ZV9yZW5kZXJfXyQxLAogIHN0YXRpY1JlbmRlckZuczogX192dWVfc3RhdGljUmVuZGVyRm5zX18kMQp9LCBfX3Z1ZV9pbmplY3Rfc3R5bGVzX18kMSwgX192dWVfc2NyaXB0X18kMSwgX192dWVfc2NvcGVfaWRfXyQxLCBfX3Z1ZV9pc19mdW5jdGlvbmFsX3RlbXBsYXRlX18kMSwgX192dWVfbW9kdWxlX2lkZW50aWZpZXJfXyQxLCBmYWxzZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7Cgp2YXIgaXNPYmplY3QgPSBmdW5jdGlvbiBpc09iamVjdChlbGVtKSB7CiAgcmV0dXJuIGVsZW0gJiYgX3R5cGVvZihlbGVtKSA9PT0gJ29iamVjdCc7Cn07Cgp2YXIgc2NyaXB0ID0gY29tcG9zaXRpb25BcGkuZGVmaW5lQ29tcG9uZW50KHsKICBuYW1lOiAnanNvbi1mb3JtcycsCiAgY29tcG9uZW50czogewogICAgRGlzcGF0Y2hSZW5kZXJlcjogX192dWVfY29tcG9uZW50X18kMgogIH0sCiAgZW1pdHM6IFsnY2hhbmdlJ10sCiAgcHJvcHM6IHsKICAgIGRhdGE6IHsKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgIHR5cGU6IFtTdHJpbmcsIE51bWJlciwgQm9vbGVhbiwgQXJyYXksIE9iamVjdF0KICAgIH0sCiAgICBzY2hlbWE6IHsKICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICB0eXBlOiBbT2JqZWN0LCBCb29sZWFuXSwKICAgICAgImRlZmF1bHQiOiB1bmRlZmluZWQKICAgIH0sCiAgICB1aXNjaGVtYTogewogICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgImRlZmF1bHQiOiB1bmRlZmluZWQKICAgIH0sCiAgICByZW5kZXJlcnM6IHsKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgIHR5cGU6IEFycmF5CiAgICB9LAogICAgY2VsbHM6IHsKICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICB0eXBlOiBBcnJheSwKICAgICAgImRlZmF1bHQiOiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgIH0sCiAgICBjb25maWc6IHsKICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICB0eXBlOiBPYmplY3QsCiAgICAgICJkZWZhdWx0IjogdW5kZWZpbmVkCiAgICB9LAogICAgcmVhZG9ubHk6IHsKICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICB0eXBlOiBCb29sZWFuLAogICAgICAiZGVmYXVsdCI6IGZhbHNlCiAgICB9LAogICAgdWlzY2hlbWFzOiB7CiAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgdHlwZTogQXJyYXksCiAgICAgICJkZWZhdWx0IjogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9LAogICAgdmFsaWRhdGlvbk1vZGU6IHsKICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICJkZWZhdWx0IjogJ1ZhbGlkYXRlQW5kU2hvdycKICAgIH0sCiAgICBhanY6IHsKICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICB0eXBlOiBPYmplY3QsCiAgICAgICJkZWZhdWx0IjogdW5kZWZpbmVkCiAgICB9LAogICAgaTE4bjogewogICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgImRlZmF1bHQiOiB1bmRlZmluZWQKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICB2YXIgX3RoaXMkc2NoZW1hLAogICAgICAgIF90aGlzJHVpc2NoZW1hLAogICAgICAgIF90aGlzID0gdGhpcywKICAgICAgICBfdGhpcyRpMThuLAogICAgICAgIF90aGlzJGkxOG4yLAogICAgICAgIF90aGlzJGkxOG4zOwoKICAgIHZhciBnZW5lcmF0b3JEYXRhID0gaXNPYmplY3QodGhpcy5kYXRhKSA/IHRoaXMuZGF0YSA6IHt9OwogICAgdmFyIHNjaGVtYVRvVXNlID0gKF90aGlzJHNjaGVtYSA9IHRoaXMuc2NoZW1hKSAhPT0gbnVsbCAmJiBfdGhpcyRzY2hlbWEgIT09IHZvaWQgMCA/IF90aGlzJHNjaGVtYSA6IGNvcmUuR2VuZXJhdGUuanNvblNjaGVtYShnZW5lcmF0b3JEYXRhKTsKICAgIHZhciB1aXNjaGVtYVRvVXNlID0gKF90aGlzJHVpc2NoZW1hID0gdGhpcy51aXNjaGVtYSkgIT09IG51bGwgJiYgX3RoaXMkdWlzY2hlbWEgIT09IHZvaWQgMCA/IF90aGlzJHVpc2NoZW1hIDogY29yZS5HZW5lcmF0ZS51aVNjaGVtYShzY2hlbWFUb1VzZSk7CgogICAgdmFyIGluaXRDb3JlID0gZnVuY3Rpb24gaW5pdENvcmUoKSB7CiAgICAgIHZhciBpbml0aWFsQ29yZSA9IHsKICAgICAgICBkYXRhOiBfdGhpcy5kYXRhLAogICAgICAgIHNjaGVtYTogc2NoZW1hVG9Vc2UsCiAgICAgICAgdWlzY2hlbWE6IHVpc2NoZW1hVG9Vc2UKICAgICAgfTsKICAgICAgdmFyIGNvcmUkMSA9IGNvcmUuY29yZVJlZHVjZXIoaW5pdGlhbENvcmUsIGNvcmUuQWN0aW9ucy5pbml0KF90aGlzLmRhdGEsIHNjaGVtYVRvVXNlLCB1aXNjaGVtYVRvVXNlLCB7CiAgICAgICAgdmFsaWRhdGlvbk1vZGU6IF90aGlzLnZhbGlkYXRpb25Nb2RlLAogICAgICAgIGFqdjogX3RoaXMuYWp2CiAgICAgIH0pKTsKICAgICAgcmV0dXJuIGNvcmUkMTsKICAgIH07CgogICAgcmV0dXJuIHsKICAgICAgc2NoZW1hVG9Vc2U6IHNjaGVtYVRvVXNlLAogICAgICB1aXNjaGVtYVRvVXNlOiB1aXNjaGVtYVRvVXNlLAogICAgICBqc29uZm9ybXM6IHsKICAgICAgICBjb3JlOiBpbml0Q29yZSgpLAogICAgICAgIGNvbmZpZzogY29yZS5jb25maWdSZWR1Y2VyKHVuZGVmaW5lZCwgY29yZS5BY3Rpb25zLnNldENvbmZpZyh0aGlzLmNvbmZpZykpLAogICAgICAgIGkxOG46IGNvcmUuaTE4blJlZHVjZXIodGhpcy5pMThuLCBjb3JlLkFjdGlvbnMudXBkYXRlSTE4bigoX3RoaXMkaTE4biA9IHRoaXMuaTE4bikgPT09IG51bGwgfHwgX3RoaXMkaTE4biA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkaTE4bi5sb2NhbGUsIChfdGhpcyRpMThuMiA9IHRoaXMuaTE4bikgPT09IG51bGwgfHwgX3RoaXMkaTE4bjIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGkxOG4yLnRyYW5zbGF0ZSwgKF90aGlzJGkxOG4zID0gdGhpcy5pMThuKSA9PT0gbnVsbCB8fCBfdGhpcyRpMThuMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkaTE4bjMudHJhbnNsYXRlRXJyb3IpKSwKICAgICAgICByZW5kZXJlcnM6IHRoaXMucmVuZGVyZXJzLAogICAgICAgIGNlbGxzOiB0aGlzLmNlbGxzLAogICAgICAgIHVpc2NoZW1hczogdGhpcy51aXNjaGVtYXMsCiAgICAgICAgcmVhZG9ubHk6IHRoaXMucmVhZG9ubHkKICAgICAgfQogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICBzY2hlbWE6IGZ1bmN0aW9uIHNjaGVtYShuZXdTY2hlbWEpIHsKICAgICAgdmFyIGdlbmVyYXRvckRhdGEgPSBpc09iamVjdCh0aGlzLmRhdGEpID8gdGhpcy5kYXRhIDoge307CiAgICAgIHRoaXMuc2NoZW1hVG9Vc2UgPSBuZXdTY2hlbWEgIT09IG51bGwgJiYgbmV3U2NoZW1hICE9PSB2b2lkIDAgPyBuZXdTY2hlbWEgOiBjb3JlLkdlbmVyYXRlLmpzb25TY2hlbWEoZ2VuZXJhdG9yRGF0YSk7CgogICAgICBpZiAoIXRoaXMudWlzY2hlbWEpIHsKICAgICAgICB0aGlzLnVpc2NoZW1hVG9Vc2UgPSBjb3JlLkdlbmVyYXRlLnVpU2NoZW1hKHRoaXMuc2NoZW1hVG9Vc2UpOwogICAgICB9CiAgICB9LAogICAgdWlzY2hlbWE6IGZ1bmN0aW9uIHVpc2NoZW1hKG5ld1Vpc2NoZW1hKSB7CiAgICAgIHRoaXMudWlzY2hlbWFUb1VzZSA9IG5ld1Vpc2NoZW1hICE9PSBudWxsICYmIG5ld1Vpc2NoZW1hICE9PSB2b2lkIDAgPyBuZXdVaXNjaGVtYSA6IGNvcmUuR2VuZXJhdGUudWlTY2hlbWEodGhpcy5zY2hlbWFUb1VzZSk7CiAgICB9LAogICAgcmVuZGVyZXJzOiBmdW5jdGlvbiByZW5kZXJlcnMobmV3UmVuZGVyZXJzKSB7CiAgICAgIHRoaXMuanNvbmZvcm1zLnJlbmRlcmVycyA9IG5ld1JlbmRlcmVyczsKICAgIH0sCiAgICBjZWxsczogZnVuY3Rpb24gY2VsbHMobmV3Q2VsbHMpIHsKICAgICAgdGhpcy5qc29uZm9ybXMuY2VsbHMgPSBuZXdDZWxsczsKICAgIH0sCiAgICB1aXNjaGVtYXM6IGZ1bmN0aW9uIHVpc2NoZW1hcyhuZXdVaXNjaGVtYXMpIHsKICAgICAgdGhpcy5qc29uZm9ybXMudWlzY2hlbWFzID0gbmV3VWlzY2hlbWFzOwogICAgfSwKICAgIGNvbmZpZzogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKG5ld0NvbmZpZykgewogICAgICAgIHRoaXMuanNvbmZvcm1zLmNvbmZpZyA9IGNvcmUuY29uZmlnUmVkdWNlcih1bmRlZmluZWQsIGNvcmUuQWN0aW9ucy5zZXRDb25maWcobmV3Q29uZmlnKSk7CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUKICAgIH0sCiAgICByZWFkb25seTogZnVuY3Rpb24gcmVhZG9ubHkobmV3UmVhZG9ubHkpIHsKICAgICAgdGhpcy5qc29uZm9ybXMucmVhZG9ubHkgPSBuZXdSZWFkb25seTsKICAgIH0sCiAgICBjb3JlRGF0YVRvVXBkYXRlOiBmdW5jdGlvbiBjb3JlRGF0YVRvVXBkYXRlKCkgewogICAgICB0aGlzLmpzb25mb3Jtcy5jb3JlID0gY29yZS5jb3JlUmVkdWNlcih0aGlzLmpzb25mb3Jtcy5jb3JlLCBjb3JlLkFjdGlvbnMudXBkYXRlQ29yZSh0aGlzLmRhdGEsIHRoaXMuc2NoZW1hVG9Vc2UsIHRoaXMudWlzY2hlbWFUb1VzZSwgewogICAgICAgIHZhbGlkYXRpb25Nb2RlOiB0aGlzLnZhbGlkYXRpb25Nb2RlLAogICAgICAgIGFqdjogdGhpcy5hanYKICAgICAgfSkpOwogICAgfSwKICAgIGV2ZW50VG9FbWl0OiBmdW5jdGlvbiBldmVudFRvRW1pdChuZXdFdmVudCkgewogICAgICB0aGlzLiRlbWl0KCdjaGFuZ2UnLCBuZXdFdmVudCk7CiAgICB9LAogICAgaTE4bjogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKG5ld0kxOG4pIHsKICAgICAgICB0aGlzLmpzb25mb3Jtcy5pMThuID0gY29yZS5pMThuUmVkdWNlcih0aGlzLmpzb25mb3Jtcy5pMThuLCBjb3JlLkFjdGlvbnMudXBkYXRlSTE4bihuZXdJMThuID09PSBudWxsIHx8IG5ld0kxOG4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IG5ld0kxOG4ubG9jYWxlLCBuZXdJMThuID09PSBudWxsIHx8IG5ld0kxOG4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IG5ld0kxOG4udHJhbnNsYXRlLCBuZXdJMThuID09PSBudWxsIHx8IG5ld0kxOG4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IG5ld0kxOG4udHJhbnNsYXRlRXJyb3IpKTsKICAgICAgfSwKICAgICAgZGVlcDogdHJ1ZQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGNvcmVEYXRhVG9VcGRhdGU6IGZ1bmN0aW9uIGNvcmVEYXRhVG9VcGRhdGUoKSB7CiAgICAgIHJldHVybiBbdGhpcy5kYXRhLCB0aGlzLnNjaGVtYVRvVXNlLCB0aGlzLnVpc2NoZW1hVG9Vc2UsIHRoaXMudmFsaWRhdGlvbk1vZGUsIHRoaXMuYWp2XTsKICAgIH0sCiAgICBldmVudFRvRW1pdDogZnVuY3Rpb24gZXZlbnRUb0VtaXQoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgZGF0YTogdGhpcy5qc29uZm9ybXMuY29yZS5kYXRhLAogICAgICAgIGVycm9yczogdGhpcy5qc29uZm9ybXMuY29yZS5lcnJvcnMKICAgICAgfTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICAvLyBlbWl0IGFuIGluaXRhbCBjaGFuZ2Ugc28gY2xpZW50cyBjYW4gcmVhY3QgdG8gZXJyb3IgdmFsaWRhdGlvbiBhbmQgZGVmYXVsdCBkYXRhIGluc2VydGlvbgogICAgdGhpcy4kZW1pdCgnY2hhbmdlJywgewogICAgICBkYXRhOiB0aGlzLmpzb25mb3Jtcy5jb3JlLmRhdGEgfHwgdW5kZWZpbmVkLAogICAgICBlcnJvcnM6IHRoaXMuanNvbmZvcm1zLmNvcmUuZXJyb3JzCiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGRpc3BhdGNoOiBmdW5jdGlvbiBkaXNwYXRjaChhY3Rpb24pIHsKICAgICAgdGhpcy5qc29uZm9ybXMuY29yZSA9IGNvcmUuY29yZVJlZHVjZXIodGhpcy5qc29uZm9ybXMuY29yZSwgYWN0aW9uKTsKICAgIH0KICB9LAogIHByb3ZpZGU6IGZ1bmN0aW9uIHByb3ZpZGUoKSB7CiAgICByZXR1cm4gewogICAgICBqc29uZm9ybXM6IHRoaXMuanNvbmZvcm1zLAogICAgICBkaXNwYXRjaDogdGhpcy5kaXNwYXRjaAogICAgfTsKICB9Cn0pOwovKiBzY3JpcHQgKi8KCnZhciBfX3Z1ZV9zY3JpcHRfXyA9IHNjcmlwdDsKLyogdGVtcGxhdGUgKi8KCnZhciBfX3Z1ZV9yZW5kZXJfXyA9IGZ1bmN0aW9uIF9fdnVlX3JlbmRlcl9fKCkgewogIHZhciBfdm0gPSB0aGlzOwoKICB2YXIgX2ggPSBfdm0uJGNyZWF0ZUVsZW1lbnQ7CgogIHZhciBfYyA9IF92bS5fc2VsZi5fYyB8fCBfaDsKCiAgcmV0dXJuIF9jKCdkaXYnLCBbX2MoJ2Rpc3BhdGNoLXJlbmRlcmVyJywgewogICAgYXR0cnM6IHsKICAgICAgInNjaGVtYSI6IF92bS5qc29uZm9ybXMuY29yZS5zY2hlbWEsCiAgICAgICJ1aXNjaGVtYSI6IF92bS5qc29uZm9ybXMuY29yZS51aXNjaGVtYSwKICAgICAgInBhdGgiOiAnJwogICAgfQogIH0pXSwgMSk7Cn07Cgp2YXIgX192dWVfc3RhdGljUmVuZGVyRm5zX18gPSBbXTsKLyogc3R5bGUgKi8KCnZhciBfX3Z1ZV9pbmplY3Rfc3R5bGVzX18gPSB1bmRlZmluZWQ7Ci8qIHNjb3BlZCAqLwoKdmFyIF9fdnVlX3Njb3BlX2lkX18gPSB1bmRlZmluZWQ7Ci8qIG1vZHVsZSBpZGVudGlmaWVyICovCgp2YXIgX192dWVfbW9kdWxlX2lkZW50aWZpZXJfXyA9IHVuZGVmaW5lZDsKLyogZnVuY3Rpb25hbCB0ZW1wbGF0ZSAqLwoKdmFyIF9fdnVlX2lzX2Z1bmN0aW9uYWxfdGVtcGxhdGVfXyA9IGZhbHNlOwovKiBzdHlsZSBpbmplY3QgKi8KCi8qIHN0eWxlIGluamVjdCBTU1IgKi8KCi8qIHN0eWxlIGluamVjdCBzaGFkb3cgZG9tICovCgp2YXIgX192dWVfY29tcG9uZW50X18gPSAvKiNfX1BVUkVfXyovbm9ybWFsaXplQ29tcG9uZW50KHsKICByZW5kZXI6IF9fdnVlX3JlbmRlcl9fLAogIHN0YXRpY1JlbmRlckZuczogX192dWVfc3RhdGljUmVuZGVyRm5zX18KfSwgX192dWVfaW5qZWN0X3N0eWxlc19fLCBfX3Z1ZV9zY3JpcHRfXywgX192dWVfc2NvcGVfaWRfXywgX192dWVfaXNfZnVuY3Rpb25hbF90ZW1wbGF0ZV9fLCBfX3Z1ZV9tb2R1bGVfaWRlbnRpZmllcl9fLCBmYWxzZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7CgpleHBvcnRzLkRpc3BhdGNoQ2VsbCA9IF9fdnVlX2NvbXBvbmVudF9fJDE7CmV4cG9ydHMuRGlzcGF0Y2hSZW5kZXJlciA9IF9fdnVlX2NvbXBvbmVudF9fJDI7CmV4cG9ydHMuSnNvbkZvcm1zID0gX192dWVfY29tcG9uZW50X187CmV4cG9ydHMuVW5rbm93blJlbmRlcmVyID0gX192dWVfY29tcG9uZW50X18kMzsKZXhwb3J0cy5tYXN0ZXJMaXN0SXRlbVByb3BzID0gbWFzdGVyTGlzdEl0ZW1Qcm9wczsKZXhwb3J0cy5yZW5kZXJlclByb3BzID0gcmVuZGVyZXJQcm9wczsKZXhwb3J0cy51c2VDb250cm9sID0gdXNlQ29udHJvbDsKZXhwb3J0cy51c2VKc29uRm9ybXNBbGxPZkNvbnRyb2wgPSB1c2VKc29uRm9ybXNBbGxPZkNvbnRyb2w7CmV4cG9ydHMudXNlSnNvbkZvcm1zQW55T2ZDb250cm9sID0gdXNlSnNvbkZvcm1zQW55T2ZDb250cm9sOwpleHBvcnRzLnVzZUpzb25Gb3Jtc0FycmF5Q29udHJvbCA9IHVzZUpzb25Gb3Jtc0FycmF5Q29udHJvbDsKZXhwb3J0cy51c2VKc29uRm9ybXNBcnJheUxheW91dCA9IHVzZUpzb25Gb3Jtc0FycmF5TGF5b3V0OwpleHBvcnRzLnVzZUpzb25Gb3Jtc0NlbGwgPSB1c2VKc29uRm9ybXNDZWxsOwpleHBvcnRzLnVzZUpzb25Gb3Jtc0NvbnRyb2wgPSB1c2VKc29uRm9ybXNDb250cm9sOwpleHBvcnRzLnVzZUpzb25Gb3Jtc0NvbnRyb2xXaXRoRGV0YWlsID0gdXNlSnNvbkZvcm1zQ29udHJvbFdpdGhEZXRhaWw7CmV4cG9ydHMudXNlSnNvbkZvcm1zRGlzcGF0Y2hDZWxsID0gdXNlSnNvbkZvcm1zRGlzcGF0Y2hDZWxsOwpleHBvcnRzLnVzZUpzb25Gb3Jtc0VudW1DZWxsID0gdXNlSnNvbkZvcm1zRW51bUNlbGw7CmV4cG9ydHMudXNlSnNvbkZvcm1zRW51bUNvbnRyb2wgPSB1c2VKc29uRm9ybXNFbnVtQ29udHJvbDsKZXhwb3J0cy51c2VKc29uRm9ybXNMYXlvdXQgPSB1c2VKc29uRm9ybXNMYXlvdXQ7CmV4cG9ydHMudXNlSnNvbkZvcm1zTWFzdGVyTGlzdEl0ZW0gPSB1c2VKc29uRm9ybXNNYXN0ZXJMaXN0SXRlbTsKZXhwb3J0cy51c2VKc29uRm9ybXNPbmVPZkNvbnRyb2wgPSB1c2VKc29uRm9ybXNPbmVPZkNvbnRyb2w7CmV4cG9ydHMudXNlSnNvbkZvcm1zT25lT2ZFbnVtQ29udHJvbCA9IHVzZUpzb25Gb3Jtc09uZU9mRW51bUNvbnRyb2w7CmV4cG9ydHMudXNlSnNvbkZvcm1zUmVuZGVyZXIgPSB1c2VKc29uRm9ybXNSZW5kZXJlcjs="},{"version":3,"sources":["../src/components/UnknownRenderer.vue?rollup-plugin-vue=script.ts","../../node_modules/vue-runtime-helpers/dist/normalize-component.mjs","../src/components/UnknownRenderer.vue","../../node_modules/lodash/_freeGlobal.js","../../node_modules/lodash/_root.js","../../node_modules/lodash/_Symbol.js","../../node_modules/lodash/_getRawTag.js","../../node_modules/lodash/_objectToString.js","../../node_modules/lodash/_baseGetTag.js","../../node_modules/lodash/isObjectLike.js","../../node_modules/lodash/isSymbol.js","../../node_modules/lodash/_baseExtremum.js","../../node_modules/lodash/_baseGt.js","../../node_modules/lodash/_listCacheClear.js","../../node_modules/lodash/eq.js","../../node_modules/lodash/_assocIndexOf.js","../../node_modules/lodash/_listCacheDelete.js","../../node_modules/lodash/_listCacheGet.js","../../node_modules/lodash/_listCacheHas.js","../../node_modules/lodash/_listCacheSet.js","../../node_modules/lodash/_ListCache.js","../../node_modules/lodash/_stackClear.js","../../node_modules/lodash/_stackDelete.js","../../node_modules/lodash/_stackGet.js","../../node_modules/lodash/_stackHas.js","../../node_modules/lodash/isObject.js","../../node_modules/lodash/isFunction.js","../../node_modules/lodash/_coreJsData.js","../../node_modules/lodash/_isMasked.js","../../node_modules/lodash/_toSource.js","../../node_modules/lodash/_baseIsNative.js","../../node_modules/lodash/_getValue.js","../../node_modules/lodash/_getNative.js","../../node_modules/lodash/_Map.js","../../node_modules/lodash/_nativeCreate.js","../../node_modules/lodash/_hashClear.js","../../node_modules/lodash/_hashDelete.js","../../node_modules/lodash/_hashGet.js","../../node_modules/lodash/_hashHas.js","../../node_modules/lodash/_hashSet.js","../../node_modules/lodash/_Hash.js","../../node_modules/lodash/_mapCacheClear.js","../../node_modules/lodash/_isKeyable.js","../../node_modules/lodash/_getMapData.js","../../node_modules/lodash/_mapCacheDelete.js","../../node_modules/lodash/_mapCacheGet.js","../../node_modules/lodash/_mapCacheHas.js","../../node_modules/lodash/_mapCacheSet.js","../../node_modules/lodash/_MapCache.js","../../node_modules/lodash/_stackSet.js","../../node_modules/lodash/_Stack.js","../../node_modules/lodash/_setCacheAdd.js","../../node_modules/lodash/_setCacheHas.js","../../node_modules/lodash/_SetCache.js","../../node_modules/lodash/_arraySome.js","../../node_modules/lodash/_cacheHas.js","../../node_modules/lodash/_equalArrays.js","../../node_modules/lodash/_Uint8Array.js","../../node_modules/lodash/_mapToArray.js","../../node_modules/lodash/_setToArray.js","../../node_modules/lodash/_equalByTag.js","../../node_modules/lodash/_arrayPush.js","../../node_modules/lodash/isArray.js","../../node_modules/lodash/_baseGetAllKeys.js","../../node_modules/lodash/_arrayFilter.js","../../node_modules/lodash/stubArray.js","../../node_modules/lodash/_getSymbols.js","../../node_modules/lodash/_baseTimes.js","../../node_modules/lodash/_baseIsArguments.js","../../node_modules/lodash/isArguments.js","../../node_modules/lodash/stubFalse.js","../../node_modules/lodash/isBuffer.js","../../node_modules/lodash/_isIndex.js","../../node_modules/lodash/isLength.js","../../node_modules/lodash/_baseIsTypedArray.js","../../node_modules/lodash/_baseUnary.js","../../node_modules/lodash/_nodeUtil.js","../../node_modules/lodash/isTypedArray.js","../../node_modules/lodash/_arrayLikeKeys.js","../../node_modules/lodash/_isPrototype.js","../../node_modules/lodash/_overArg.js","../../node_modules/lodash/_nativeKeys.js","../../node_modules/lodash/_baseKeys.js","../../node_modules/lodash/isArrayLike.js","../../node_modules/lodash/keys.js","../../node_modules/lodash/_getAllKeys.js","../../node_modules/lodash/_equalObjects.js","../../node_modules/lodash/_DataView.js","../../node_modules/lodash/_Promise.js","../../node_modules/lodash/_Set.js","../../node_modules/lodash/_WeakMap.js","../../node_modules/lodash/_getTag.js","../../node_modules/lodash/_baseIsEqualDeep.js","../../node_modules/lodash/_baseIsEqual.js","../../node_modules/lodash/_baseIsMatch.js","../../node_modules/lodash/_isStrictComparable.js","../../node_modules/lodash/_getMatchData.js","../../node_modules/lodash/_matchesStrictComparable.js","../../node_modules/lodash/_baseMatches.js","../../node_modules/lodash/_isKey.js","../../node_modules/lodash/memoize.js","../../node_modules/lodash/_memoizeCapped.js","../../node_modules/lodash/_stringToPath.js","../../node_modules/lodash/_arrayMap.js","../../node_modules/lodash/_baseToString.js","../../node_modules/lodash/toString.js","../../node_modules/lodash/_castPath.js","../../node_modules/lodash/_toKey.js","../../node_modules/lodash/_baseGet.js","../../node_modules/lodash/get.js","../../node_modules/lodash/_baseHasIn.js","../../node_modules/lodash/_hasPath.js","../../node_modules/lodash/hasIn.js","../../node_modules/lodash/_baseMatchesProperty.js","../../node_modules/lodash/identity.js","../../node_modules/lodash/_baseProperty.js","../../node_modules/lodash/_basePropertyDeep.js","../../node_modules/lodash/property.js","../../node_modules/lodash/_baseIteratee.js","../../node_modules/lodash/maxBy.js","../src/jsonFormsCompositions.ts","../src/components/DispatchRenderer.vue?rollup-plugin-vue=script.ts","../src/components/DispatchRenderer.vue","../src/components/DispatchCell.vue?rollup-plugin-vue=script.ts","../src/components/DispatchCell.vue","../src/components/JsonForms.vue?rollup-plugin-vue=script.ts","../src/components/JsonForms.vue"],"names":["defineComponent","name","freeGlobal","global","freeSelf","self","root","Function","Symbol","objectProto","Object","hasOwnProperty","nativeObjectToString","symToStringTag","isOwn","tag","value","unmasked","result","nullTag","undefinedTag","getRawTag","objectToString","symbolTag","isObjectLike","baseGetTag","index","length","array","current","iteratee","computed","isSymbol","comparator","other","eq","arrayProto","Array","splice","data","assocIndexOf","lastIndex","entries","entry","ListCache","type","asyncTag","funcTag","genTag","proxyTag","isObject","coreJsData","maskSrcKey","uid","funcProto","funcToString","func","reRegExpChar","reIsHostCtor","reIsNative","RegExp","isMasked","pattern","isFunction","toSource","object","getValue","baseIsNative","Map","getNative","nativeCreate","HASH_UNDEFINED","Hash","map","isKeyable","getMapData","size","MapCache","LARGE_ARRAY_SIZE","pairs","Stack","values","SetCache","predicate","cache","COMPARE_PARTIAL_FLAG","COMPARE_UNORDERED_FLAG","isPartial","bitmask","arrLength","othLength","arrStacked","stack","othStacked","seen","arrValue","othValue","compared","customizer","arraySome","cacheHas","equalFunc","Uint8Array","set","boolTag","dateTag","errorTag","mapTag","numberTag","regexpTag","setTag","stringTag","arrayBufferTag","dataViewTag","symbolProto","symbolValueOf","convert","stacked","equalArrays","offset","isArray","keysFunc","arrayPush","symbolsFunc","resIndex","propertyIsEnumerable","nativeGetSymbols","getSymbols","arrayFilter","argsTag","isArguments","freeExports","exports","freeModule","module","moduleExports","Buffer","nativeIsBuffer","isBuffer","MAX_SAFE_INTEGER","reIsUint","arrayTag","objectTag","weakMapTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","typedArrayTags","isLength","freeProcess","nodeUtil","types","nodeIsTypedArray","isTypedArray","baseUnary","isArr","isArg","isBuff","isType","skipIndexes","baseTimes","inherited","key","isIndex","Ctor","proto","transform","nativeKeys","overArg","isPrototype","isArrayLike","arrayLikeKeys","baseKeys","baseGetAllKeys","objProps","getAllKeys","objLength","othProps","objStacked","skipCtor","objValue","objCtor","othCtor","DataView","Promise","Set","WeakMap","promiseTag","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","getTag","ctorString","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","equalByTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","equalObjects","baseIsEqualDeep","matchData","noCustomizer","srcValue","baseIsEqual","keys","isStrictComparable","getMatchData","matchesStrictComparable","baseIsMatch","reIsDeepProp","reIsPlainProp","FUNC_ERROR_TEXT","resolver","memoized","args","memoize","MAX_MEMOIZE_SIZE","rePropName","reEscapeChar","stringToPath","memoizeCapped","string","quote","subString","number","INFINITY","symbolToString","arrayMap","baseToString","isKey","toString","path","castPath","toKey","baseGet","hasFunc","hasPath","get","hasIn","baseProperty","basePropertyDeep","baseMatchesProperty","baseMatches","property","baseExtremum","baseIteratee","rendererProps","schema","required","uischema","String","enabled","undefined","renderers","cells","masterListItemProps","Number","selected","Boolean","handleSelect","removeItem","useControl","props","stateMap","dispatchMap","jsonforms","inject","dispatch","id","ref","control","dispatchMethods","onBeforeMount","createId","onUnmounted","removeId","useJsonFormsControl","mapStateToControlProps","mapDispatchToControlProps","useJsonFormsControlWithDetail","mapStateToControlWithDetailProps","useJsonFormsEnumControl","mapStateToEnumControlProps","useJsonFormsOneOfEnumControl","mapStateToOneOfEnumControlProps","useJsonFormsArrayControl","mapStateToArrayControlProps","mapDispatchToArrayControlProps","useJsonFormsAllOfControl","mapStateToAllOfProps","useJsonFormsAnyOfControl","mapStateToAnyOfProps","useJsonFormsOneOfControl","mapStateToOneOfProps","useJsonFormsLayout","mapStateToLayoutProps","layout","useJsonFormsArrayLayout","mapStateToArrayLayoutProps","useJsonFormsMasterListItem","mapStateToMasterListItemProps","item","useJsonFormsRenderer","rawProps","mapStateToJsonFormsRendererProps","rootSchema","renderer","rest","useJsonFormsCell","mapStateToCellProps","cell","useJsonFormsEnumCell","defaultMapStateToEnumCellProps","useJsonFormsDispatchCell","mapStateToDispatchCellProps","setup","determinedRenderer","maxBy","r","determinedCell","elem","components","DispatchRenderer","emits","config","readonly","uischemas","validationMode","ajv","i18n","generatorData","schemaToUse","Generate","uischemaToUse","initCore","initialCore","core","coreReducer","configReducer","Actions","i18nReducer","watch","newSchema","newUischema","handler","deep","coreDataToUpdate","eventToEmit","newI18n","errors","mounted","methods","provide"],"mappings":"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","sourcesContent":["\n\n\n\n\nimport { defineComponent } from '../../config';\n\nexport default defineComponent({\n  name: 'unknown-renderer'\n});\n","function normalizeComponent(template, style, script, scopeId, isFunctionalTemplate, moduleIdentifier /* server only */, shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {\r\n    if (typeof shadowMode !== 'boolean') {\r\n        createInjectorSSR = createInjector;\r\n        createInjector = shadowMode;\r\n        shadowMode = false;\r\n    }\r\n    // Vue.extend constructor export interop.\r\n    const options = typeof script === 'function' ? script.options : script;\r\n    // render functions\r\n    if (template && template.render) {\r\n        options.render = template.render;\r\n        options.staticRenderFns = template.staticRenderFns;\r\n        options._compiled = true;\r\n        // functional template\r\n        if (isFunctionalTemplate) {\r\n            options.functional = true;\r\n        }\r\n    }\r\n    // scopedId\r\n    if (scopeId) {\r\n        options._scopeId = scopeId;\r\n    }\r\n    let hook;\r\n    if (moduleIdentifier) {\r\n        // server build\r\n        hook = function (context) {\r\n            // 2.3 injection\r\n            context =\r\n                context || // cached call\r\n                    (this.$vnode && this.$vnode.ssrContext) || // stateful\r\n                    (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext); // functional\r\n            // 2.2 with runInNewContext: true\r\n            if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\r\n                context = __VUE_SSR_CONTEXT__;\r\n            }\r\n            // inject component styles\r\n            if (style) {\r\n                style.call(this, createInjectorSSR(context));\r\n            }\r\n            // register component module identifier for async chunk inference\r\n            if (context && context._registeredComponents) {\r\n                context._registeredComponents.add(moduleIdentifier);\r\n            }\r\n        };\r\n        // used by ssr in case component is cached and beforeCreate\r\n        // never gets called\r\n        options._ssrRegister = hook;\r\n    }\r\n    else if (style) {\r\n        hook = shadowMode\r\n            ? function (context) {\r\n                style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot));\r\n            }\r\n            : function (context) {\r\n                style.call(this, createInjector(context));\r\n            };\r\n    }\r\n    if (hook) {\r\n        if (options.functional) {\r\n            // register for functional component in vue file\r\n            const originalRender = options.render;\r\n            options.render = function renderWithStyleInjection(h, context) {\r\n                hook.call(context);\r\n                return originalRender(h, context);\r\n            };\r\n        }\r\n        else {\r\n            // inject component registration as beforeCreate hook\r\n            const existing = options.beforeCreate;\r\n            options.beforeCreate = existing ? [].concat(existing, hook) : [hook];\r\n        }\r\n    }\r\n    return script;\r\n}\n\nexport default normalizeComponent;\n//# sourceMappingURL=normalize-component.mjs.map\n","<template>\n  <div>No applicable renderer found.</div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from '../../config';\n\nexport default defineComponent({\n  name: 'unknown-renderer'\n});\n</script>\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var isSymbol = require('./isSymbol');\n\n/**\n * The base implementation of methods like `_.max` and `_.min` which accepts a\n * `comparator` to determine the extremum value.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The iteratee invoked per iteration.\n * @param {Function} comparator The comparator used to compare values.\n * @returns {*} Returns the extremum value.\n */\nfunction baseExtremum(array, iteratee, comparator) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    var value = array[index],\n        current = iteratee(value);\n\n    if (current != null && (computed === undefined\n          ? (current === current && !isSymbol(current))\n          : comparator(current, computed)\n        )) {\n      var computed = current,\n          result = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseExtremum;\n","/**\n * The base implementation of `_.gt` which doesn't coerce arguments.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if `value` is greater than `other`,\n *  else `false`.\n */\nfunction baseGt(value, other) {\n  return value > other;\n}\n\nmodule.exports = baseGt;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nmodule.exports = listCacheClear;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","var eq = require('./eq');\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nmodule.exports = listCacheDelete;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nmodule.exports = listCacheGet;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nmodule.exports = listCacheHas;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nmodule.exports = listCacheSet;\n","var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n","var ListCache = require('./_ListCache');\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nmodule.exports = stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nmodule.exports = stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nmodule.exports = stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nmodule.exports = stackHas;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n","var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n","var nativeCreate = require('./_nativeCreate');\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nmodule.exports = hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = hashDelete;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nmodule.exports = hashGet;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nmodule.exports = hashHas;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nmodule.exports = hashSet;\n","var hashClear = require('./_hashClear'),\n    hashDelete = require('./_hashDelete'),\n    hashGet = require('./_hashGet'),\n    hashHas = require('./_hashHas'),\n    hashSet = require('./_hashSet');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nmodule.exports = Hash;\n","var Hash = require('./_Hash'),\n    ListCache = require('./_ListCache'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapCacheClear;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nmodule.exports = isKeyable;\n","var isKeyable = require('./_isKeyable');\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nmodule.exports = getMapData;\n","var getMapData = require('./_getMapData');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = mapCacheDelete;\n","var getMapData = require('./_getMapData');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nmodule.exports = mapCacheGet;\n","var getMapData = require('./_getMapData');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nmodule.exports = mapCacheHas;\n","var getMapData = require('./_getMapData');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nmodule.exports = mapCacheSet;\n","var mapCacheClear = require('./_mapCacheClear'),\n    mapCacheDelete = require('./_mapCacheDelete'),\n    mapCacheGet = require('./_mapCacheGet'),\n    mapCacheHas = require('./_mapCacheHas'),\n    mapCacheSet = require('./_mapCacheSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nmodule.exports = MapCache;\n","var ListCache = require('./_ListCache'),\n    Map = require('./_Map'),\n    MapCache = require('./_MapCache');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nmodule.exports = stackSet;\n","var ListCache = require('./_ListCache'),\n    stackClear = require('./_stackClear'),\n    stackDelete = require('./_stackDelete'),\n    stackGet = require('./_stackGet'),\n    stackHas = require('./_stackHas'),\n    stackSet = require('./_stackSet');\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nmodule.exports = Stack;\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nmodule.exports = setCacheAdd;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nmodule.exports = setCacheHas;\n","var MapCache = require('./_MapCache'),\n    setCacheAdd = require('./_setCacheAdd'),\n    setCacheHas = require('./_setCacheHas');\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nmodule.exports = SetCache;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arraySome;\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nmodule.exports = cacheHas;\n","var SetCache = require('./_SetCache'),\n    arraySome = require('./_arraySome'),\n    cacheHas = require('./_cacheHas');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Check that cyclic values are equal.\n  var arrStacked = stack.get(array);\n  var othStacked = stack.get(other);\n  if (arrStacked && othStacked) {\n    return arrStacked == other && othStacked == array;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalArrays;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nmodule.exports = Uint8Array;\n","/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nmodule.exports = mapToArray;\n","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nmodule.exports = setToArray;\n","var Symbol = require('./_Symbol'),\n    Uint8Array = require('./_Uint8Array'),\n    eq = require('./eq'),\n    equalArrays = require('./_equalArrays'),\n    mapToArray = require('./_mapToArray'),\n    setToArray = require('./_setToArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nmodule.exports = equalByTag;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","var arrayPush = require('./_arrayPush'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nmodule.exports = baseGetAllKeys;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayFilter;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nmodule.exports = stubArray;\n","var arrayFilter = require('./_arrayFilter'),\n    stubArray = require('./stubArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nmodule.exports = getSymbols;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","var baseGetTag = require('./_baseGetTag'),\n    isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n","var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n","var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isIndex = require('./_isIndex'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayLikeKeys;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n","var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n","var isPrototype = require('./_isPrototype'),\n    nativeKeys = require('./_nativeKeys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeys;\n","var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeys = require('./_baseKeys'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = keys;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbols = require('./_getSymbols'),\n    keys = require('./keys');\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nmodule.exports = getAllKeys;\n","var getAllKeys = require('./_getAllKeys');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Check that cyclic values are equal.\n  var objStacked = stack.get(object);\n  var othStacked = stack.get(other);\n  if (objStacked && othStacked) {\n    return objStacked == other && othStacked == object;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalObjects;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nmodule.exports = DataView;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nmodule.exports = Promise;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nmodule.exports = WeakMap;\n","var DataView = require('./_DataView'),\n    Map = require('./_Map'),\n    Promise = require('./_Promise'),\n    Set = require('./_Set'),\n    WeakMap = require('./_WeakMap'),\n    baseGetTag = require('./_baseGetTag'),\n    toSource = require('./_toSource');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nmodule.exports = getTag;\n","var Stack = require('./_Stack'),\n    equalArrays = require('./_equalArrays'),\n    equalByTag = require('./_equalByTag'),\n    equalObjects = require('./_equalObjects'),\n    getTag = require('./_getTag'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nmodule.exports = baseIsEqualDeep;\n","var baseIsEqualDeep = require('./_baseIsEqualDeep'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nmodule.exports = baseIsEqual;\n","var Stack = require('./_Stack'),\n    baseIsEqual = require('./_baseIsEqual');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack;\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nmodule.exports = baseIsMatch;\n","var isObject = require('./isObject');\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nmodule.exports = isStrictComparable;\n","var isStrictComparable = require('./_isStrictComparable'),\n    keys = require('./keys');\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n      length = result.length;\n\n  while (length--) {\n    var key = result[length],\n        value = object[key];\n\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\n\nmodule.exports = getMatchData;\n","/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue &&\n      (srcValue !== undefined || (key in Object(object)));\n  };\n}\n\nmodule.exports = matchesStrictComparable;\n","var baseIsMatch = require('./_baseIsMatch'),\n    getMatchData = require('./_getMatchData'),\n    matchesStrictComparable = require('./_matchesStrictComparable');\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\nmodule.exports = baseMatches;\n","var isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nmodule.exports = isKey;\n","var MapCache = require('./_MapCache');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nmodule.exports = memoize;\n","var memoize = require('./memoize');\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nmodule.exports = memoizeCapped;\n","var memoizeCapped = require('./_memoizeCapped');\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nmodule.exports = stringToPath;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","var Symbol = require('./_Symbol'),\n    arrayMap = require('./_arrayMap'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n","var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n","var isArray = require('./isArray'),\n    isKey = require('./_isKey'),\n    stringToPath = require('./_stringToPath'),\n    toString = require('./toString');\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nmodule.exports = castPath;\n","var isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = toKey;\n","var castPath = require('./_castPath'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nmodule.exports = baseGet;\n","var baseGet = require('./_baseGet');\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n","/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\nmodule.exports = baseHasIn;\n","var castPath = require('./_castPath'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isIndex = require('./_isIndex'),\n    isLength = require('./isLength'),\n    toKey = require('./_toKey');\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      result = false;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\nmodule.exports = hasPath;\n","var baseHasIn = require('./_baseHasIn'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\nmodule.exports = hasIn;\n","var baseIsEqual = require('./_baseIsEqual'),\n    get = require('./get'),\n    hasIn = require('./hasIn'),\n    isKey = require('./_isKey'),\n    isStrictComparable = require('./_isStrictComparable'),\n    matchesStrictComparable = require('./_matchesStrictComparable'),\n    toKey = require('./_toKey');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n  };\n}\n\nmodule.exports = baseMatchesProperty;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n","/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = baseProperty;\n","var baseGet = require('./_baseGet');\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\nmodule.exports = basePropertyDeep;\n","var baseProperty = require('./_baseProperty'),\n    basePropertyDeep = require('./_basePropertyDeep'),\n    isKey = require('./_isKey'),\n    toKey = require('./_toKey');\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\nmodule.exports = property;\n","var baseMatches = require('./_baseMatches'),\n    baseMatchesProperty = require('./_baseMatchesProperty'),\n    identity = require('./identity'),\n    isArray = require('./isArray'),\n    property = require('./property');\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (typeof value == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\nmodule.exports = baseIteratee;\n","var baseExtremum = require('./_baseExtremum'),\n    baseGt = require('./_baseGt'),\n    baseIteratee = require('./_baseIteratee');\n\n/**\n * This method is like `_.max` except that it accepts `iteratee` which is\n * invoked for each element in `array` to generate the criterion by which\n * the value is ranked. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Math\n * @param {Array} array The array to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {*} Returns the maximum value.\n * @example\n *\n * var objects = [{ 'n': 1 }, { 'n': 2 }];\n *\n * _.maxBy(objects, function(o) { return o.n; });\n * // => { 'n': 2 }\n *\n * // The `_.property` iteratee shorthand.\n * _.maxBy(objects, 'n');\n * // => { 'n': 2 }\n */\nfunction maxBy(array, iteratee) {\n  return (array && array.length)\n    ? baseExtremum(array, baseIteratee(iteratee, 2), baseGt)\n    : undefined;\n}\n\nmodule.exports = maxBy;\n","import {\n  ControlElement,\n  Dispatch,\n  Layout,\n  mapDispatchToControlProps,\n  mapStateToControlProps,\n  mapStateToLayoutProps,\n  JsonFormsSubStates,\n  JsonSchema,\n  UISchemaElement,\n  CoreActions,\n  mapStateToEnumControlProps,\n  JsonFormsState,\n  mapStateToOneOfEnumControlProps,\n  OwnPropsOfMasterListItem,\n  mapStateToMasterListItemProps,\n  mapStateToControlWithDetailProps,\n  mapStateToArrayControlProps,\n  mapDispatchToArrayControlProps,\n  mapStateToAllOfProps,\n  mapStateToAnyOfProps,\n  mapStateToOneOfProps,\n  mapStateToJsonFormsRendererProps,\n  mapStateToArrayLayoutProps,\n  mapStateToCellProps,\n  JsonFormsRendererRegistryEntry,\n  JsonFormsCellRendererRegistryEntry,\n  defaultMapStateToEnumCellProps,\n  mapStateToDispatchCellProps,\n  StatePropsOfJsonFormsRenderer,\n  createId,\n  removeId\n} from '@jsonforms/core'\nimport {\n  CompType,\n  computed,\n  inject,\n  onBeforeMount,\n  onUnmounted,\n  ref\n} from '../config';\n\n/**\n * Constructs a props declaration for Vue components which can be used\n * for registered renderers and cells. These are typically used in combination\n * with one of the provided bindings, e.g. 'useJsonFormsControl'.\n *\n * Use the generic type parameter when using a specialized binding, e.g.\n * `rendererProps<Layout>()` in combination with `useJsonFormsLayout` or\n * `rendererProps<ControlElement>()` in combination with `useJsonFormsControl`.\n */\nexport const rendererProps = <U = UISchemaElement>() => ({\n  schema: {\n    required: true as true,\n    type: [Object, Boolean] as CompType<\n      JsonSchema,\n      [ObjectConstructor, BooleanConstructor]\n    >\n  },\n  uischema: {\n    required: true as true,\n    type: Object as CompType<U, ObjectConstructor>\n  },\n  path: {\n    required: true as true,\n    type: String\n  },\n  enabled: {\n    required: false as false,\n    type: Boolean,\n    default: undefined\n  },\n  renderers: {\n    required: false,\n    type: Array as CompType<JsonFormsRendererRegistryEntry[], ArrayConstructor>,\n    default: undefined\n  },\n  cells: {\n    required: false,\n    type: Array as CompType<\n      JsonFormsCellRendererRegistryEntry[],\n      ArrayConstructor\n    >,\n    default: undefined\n  }\n});\n\n/**\n * Constructs a props declaration for Vue components which shall be used as\n * master list items.\n */\nexport const masterListItemProps = () => ({\n  index: {\n    required: true as true,\n    type: Number\n  },\n  selected: {\n    required: true as true,\n    type: Boolean\n  },\n  path: {\n    required: true as true,\n    type: String\n  },\n  schema: {\n    required: true as true,\n    type: [Object, Boolean] as CompType<\n      JsonSchema,\n      [ObjectConstructor, BooleanConstructor]\n    >\n  },\n  handleSelect: {\n    required: false as false,\n    type: Function as CompType<(index: number) => void, FunctionConstructor>,\n    default: undefined\n  },\n  removeItem: {\n    required: false as false,\n    type: Function as CompType<\n      (path: string, value: number) => void,\n      FunctionConstructor\n    >,\n    default: undefined\n  }\n});\n\nexport interface RendererProps<U = UISchemaElement> {\n  schema: JsonSchema;\n  uischema: U;\n  path: string;\n  enabled?: boolean;\n  renderers?: JsonFormsRendererRegistryEntry[];\n  cells?: JsonFormsCellRendererRegistryEntry[];\n}\n\nexport interface ControlProps extends RendererProps {\n  uischema: ControlElement;\n}\n\nexport type Required<T> = T extends object\n  ? { [P in keyof T]-?: NonNullable<T[P]> }\n  : T;\n\nexport function useControl<R, D, P extends {}>(\n  props: P,\n  stateMap: (state: JsonFormsState, props: P) => R\n): { control: Required<R> };\nexport function useControl<R, D, P extends {}>(\n  props: P,\n  stateMap: (state: JsonFormsState, props: P) => R,\n  dispatchMap: (dispatch: Dispatch<CoreActions>) => D\n): { control: Required<R> } & D;\nexport function useControl<R, D, P extends {}>(\n  props: P,\n  stateMap: (state: JsonFormsState, props: P) => R,\n  dispatchMap?: (dispatch: Dispatch<CoreActions>) => D\n) {\n  const jsonforms = inject<JsonFormsSubStates>('jsonforms');\n  const dispatch = inject<Dispatch<CoreActions>>('dispatch');\n\n  if (!jsonforms || !dispatch) {\n    throw \"'jsonforms' or 'dispatch' couldn't be injected. Are you within JSON Forms?\";\n  }\n\n  const id = ref<string | undefined>(undefined);\n  const control = computed(() => ({\n    ...stateMap({ jsonforms }, props),\n    id: id.value\n  }));\n\n  const dispatchMethods = dispatchMap?.(dispatch);\n\n  onBeforeMount(() => {\n    if ((control.value as any).uischema.scope) {\n      id.value = createId((control.value as any).uischema.scope);\n    }\n  });\n\n  onUnmounted(() => {\n    if (id.value) {\n      removeId(id.value);\n      id.value = undefined;\n    }\n  });\n\n  return {\n    control: (control as unknown) as R,\n    ...dispatchMethods\n  };\n}\n\n/**\n * Provides generic bindings for 'Control' elements.\n * Should be used when no specialized bindings are appropriate.\n *\n * Access bindings via the provided reactive `control` object.\n * Dispatch changes via the provided `handleChange` method.\n */\nexport const useJsonFormsControl = (props: ControlProps) => {\n  return useControl(props, mapStateToControlProps, mapDispatchToControlProps);\n};\n\n/**\n * Provides bindings for 'Control' elements which can provide a 'detail',\n * for example array and object renderers.\n *\n * Access bindings via the provided reactive `control` object.\n * Dispatch changes via the provided `handleChange` method.\n */\nexport const useJsonFormsControlWithDetail = (props: ControlProps) => {\n  return useControl(\n    props,\n    mapStateToControlWithDetailProps,\n    mapDispatchToControlProps\n  );\n};\n\n/**\n * Provides bindings for 'Control' elements which resolve to 'enum' schema elements.\n *\n * Access bindings via the provided reactive `control` object.\n * Dispatch changes via the provided `handleChange` method.\n */\nexport const useJsonFormsEnumControl = (props: ControlProps) => {\n  return useControl(\n    props,\n    mapStateToEnumControlProps,\n    mapDispatchToControlProps\n  );\n};\n\n/**\n * Provides bindings for 'Control' elements which resolve to manually constructed\n * 'oneOf' enums. These are used to enhance enums with label support.\n *\n * Access bindings via the provided reactive `control` object.\n * Dispatch changes via the provided `handleChange` method.\n */\nexport const useJsonFormsOneOfEnumControl = (props: ControlProps) => {\n  return useControl(\n    props,\n    mapStateToOneOfEnumControlProps,\n    mapDispatchToControlProps\n  );\n};\n\n/**\n * Provides bindings for 'Control' elements which resolve to 'array' schema elements.\n *\n * Access bindings via the provided reactive `control` object.\n * Dispatch changes via the provided `handleChange` method.\n */\nexport const useJsonFormsArrayControl = (props: ControlProps) => {\n  return useControl(\n    props,\n    mapStateToArrayControlProps,\n    mapDispatchToArrayControlProps\n  );\n};\n\n/**\n * Provides bindings for 'Control' elements which resolve to 'allOf' schema elements.\n *\n * Access bindings via the provided reactive `control` object.\n * Dispatch changes via the provided `handleChange` method.\n */\nexport const useJsonFormsAllOfControl = (props: ControlProps) => {\n  return useControl(props, mapStateToAllOfProps, mapDispatchToControlProps);\n};\n\n/**\n * Provides bindings for 'Control' elements which resolve to 'anyOf' schema elements.\n *\n * Access bindings via the provided reactive `control` object.\n * Dispatch changes via the provided `handleChange` method.\n */\nexport const useJsonFormsAnyOfControl = (props: ControlProps) => {\n  return useControl(props, mapStateToAnyOfProps, mapDispatchToControlProps);\n};\n\n/**\n * Provides bindings for 'Control' elements which resolve to 'oneOf' schema elements.\n *\n * Access bindings via the provided reactive `control` object.\n * Dispatch changes via the provided `handleChange` method.\n */\nexport const useJsonFormsOneOfControl = (props: ControlProps) => {\n  return useControl(props, mapStateToOneOfProps, mapDispatchToControlProps);\n};\n\nexport interface LayoutProps extends RendererProps {\n  uischema: Layout;\n}\n\n/**\n * Provides bindings for 'Layout' elements, e.g. VerticalLayout, HorizontalLayout, Group.\n *\n * Access bindings via the provided reactive 'layout' object.\n */\nexport const useJsonFormsLayout = (props: LayoutProps) => {\n  const { control, ...other } = useControl(props, mapStateToLayoutProps);\n  return { layout: control, ...other };\n};\n\n/**\n * Provides bindings for 'Control' elements which resolve to 'array' elements which\n * shall be rendered as a layout instead of a control.\n *\n * Access bindings via the provided reactive 'layout' object.\n */\nexport const useJsonFormsArrayLayout = (props: ControlProps) => {\n  const { control, ...other } = useControl(props, mapStateToArrayLayoutProps);\n  return { layout: control, ...other };\n};\n\n/**\n * Provides bindings for list elements of a master-list-detail control setup.\n * The element using this binding is not supposed to be registered as an own renderer\n * but used in a more specialized control.\n *\n * Access bindings via the provided reactive 'item' object.\n */\nexport const useJsonFormsMasterListItem = (props: OwnPropsOfMasterListItem) => {\n  const { control, ...other } = useControl<\n    Omit<OwnPropsOfMasterListItem, 'handleSelect' | 'removeItem'>,\n    unknown,\n    OwnPropsOfMasterListItem\n  >(props, mapStateToMasterListItemProps);\n  return { item: control, ...other };\n};\n\n/**\n * Provides specialized bindings which can be used for any renderer.\n * Useful for meta elements like dispatchers.\n *\n * Access bindings via the provided reactive 'renderer' object.\n */\nexport const useJsonFormsRenderer = (props: RendererProps) => {\n  const jsonforms = inject<JsonFormsSubStates>('jsonforms');\n  const dispatch = inject<Dispatch<CoreActions>>('dispatch');\n\n  if (!jsonforms || !dispatch) {\n    throw \"'jsonforms' or 'dispatch' couldn't be injected. Are you within JSON Forms?\";\n  }\n\n  const rawProps = computed(\n    () =>\n      mapStateToJsonFormsRendererProps(\n        { jsonforms },\n        props\n      ) as Required<StatePropsOfJsonFormsRenderer>\n  );\n\n  const rootSchema = computed(() => rawProps.value.rootSchema);\n  const renderer = computed(() => {\n    const { rootSchema, ...rest} = rawProps.value;\n    return rest;\n  });\n\n  return {\n    renderer,\n    rootSchema\n  };\n};\n\n/**\n * Provides bindings for cell elements. Cells are meant to show simple inputs,\n * for example without error validation, within a larger structure like tables.\n *\n * Access bindings via the provided reactive 'cell' object.\n * Dispatch changes via the provided `handleChange` method.\n */\nexport const useJsonFormsCell = (props: ControlProps) => {\n  const { control, ...other } = useControl(\n    props,\n    mapStateToCellProps,\n    mapDispatchToControlProps\n  );\n  return { cell: control, ...other };\n};\n\n/**\n * Provides bindings for enum cell elements. Cells are meant to show simple inputs,\n * for example without error validation, within a larger structure like tables.\n *\n * Access bindings via the provided reactive 'cell' object.\n * Dispatch changes via the provided `handleChange` method.\n */\nexport const useJsonFormsEnumCell = (props: ControlProps) => {\n  const { control, ...other } = useControl(\n    props,\n    defaultMapStateToEnumCellProps,\n    mapDispatchToControlProps\n  );\n  return { cell: control, ...other };\n};\n\n/**\n * Provides bindings for a cell dispatcher. Cells are meant to show simple inputs,\n * for example without error validation, within a larger structure like tables.\n *\n * Access bindings via the provided reactive 'cell' object.\n * Dispatch changes via the provided `handleChange` method.\n */\nexport const useJsonFormsDispatchCell = (props: ControlProps) => {\n  const { control, ...other } = useControl(\n    props,\n    mapStateToDispatchCellProps,\n    mapDispatchToControlProps\n  );\n  return { cell: control, ...other };\n};\n","\n\n\n\n\nimport { defineComponent } from '../../config';\nimport UnknownRenderer from './UnknownRenderer.vue';\nimport maxBy from 'lodash/maxBy';\nimport {\n  rendererProps,\n  useJsonFormsRenderer,\n  RendererProps,\n} from '../jsonFormsCompositions';\nimport { ControlElement } from '@jsonforms/core';\nexport default defineComponent({\n  name: 'dispatch-renderer',\n  props: {\n    ...rendererProps<ControlElement>(),\n  },\n  setup(props: RendererProps<ControlElement>) {\n    return useJsonFormsRenderer(props);\n  },\n  computed: {\n    determinedRenderer(): any {\n      const renderer = maxBy(this.renderer.renderers, (r: any) =>\n        r.tester(this.renderer.uischema, this.renderer.schema)\n      );\n      if (\n        renderer === undefined ||\n        renderer.tester(this.renderer.uischema, this.renderer.schema) === -1\n      ) {\n        return UnknownRenderer;\n      } else {\n        return renderer.renderer;\n      }\n    },\n  },\n});\n","<template>\n  <component v-bind:is=\"determinedRenderer\" v-bind=\"renderer\"></component>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from '../../config';\nimport UnknownRenderer from './UnknownRenderer.vue';\nimport maxBy from 'lodash/maxBy';\nimport {\n  rendererProps,\n  useJsonFormsRenderer,\n  RendererProps,\n} from '../jsonFormsCompositions';\nimport { ControlElement } from '@jsonforms/core';\nexport default defineComponent({\n  name: 'dispatch-renderer',\n  props: {\n    ...rendererProps<ControlElement>(),\n  },\n  setup(props: RendererProps<ControlElement>) {\n    return useJsonFormsRenderer(props);\n  },\n  computed: {\n    determinedRenderer(): any {\n      const renderer = maxBy(this.renderer.renderers, (r: any) =>\n        r.tester(this.renderer.uischema, this.renderer.schema)\n      );\n      if (\n        renderer === undefined ||\n        renderer.tester(this.renderer.uischema, this.renderer.schema) === -1\n      ) {\n        return UnknownRenderer;\n      } else {\n        return renderer.renderer;\n      }\n    },\n  },\n});\n</script>\n","\n\n\n\n\nimport { defineComponent } from '../../config';\nimport UnknownRenderer from './UnknownRenderer.vue';\nimport maxBy from 'lodash/maxBy';\nimport {\n  rendererProps,\n  useJsonFormsDispatchCell,\n  RendererProps,\n} from '../jsonFormsCompositions';\nimport { ControlElement } from '@jsonforms/core';\n\nexport default defineComponent({\n  name: 'dispatch-cell',\n  props: {\n    ...rendererProps<ControlElement>(),\n  },\n  setup(props: RendererProps<ControlElement>) {\n    return useJsonFormsDispatchCell(props);\n  },\n  computed: {\n    determinedCell(): any {\n      const cell = maxBy(this.cell.cells, (r: any) =>\n        r.tester(this.cell.uischema, this.cell.schema)\n      );\n      if (\n        cell === undefined ||\n        cell.tester(this.cell.uischema, this.cell.schema) === -1\n      ) {\n        return UnknownRenderer;\n      } else {\n        return cell.cell;\n      }\n    },\n  },\n});\n","<template>\n  <component v-bind:is=\"determinedCell\" v-bind=\"cell\"></component>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from '../../config';\nimport UnknownRenderer from './UnknownRenderer.vue';\nimport maxBy from 'lodash/maxBy';\nimport {\n  rendererProps,\n  useJsonFormsDispatchCell,\n  RendererProps,\n} from '../jsonFormsCompositions';\nimport { ControlElement } from '@jsonforms/core';\n\nexport default defineComponent({\n  name: 'dispatch-cell',\n  props: {\n    ...rendererProps<ControlElement>(),\n  },\n  setup(props: RendererProps<ControlElement>) {\n    return useJsonFormsDispatchCell(props);\n  },\n  computed: {\n    determinedCell(): any {\n      const cell = maxBy(this.cell.cells, (r: any) =>\n        r.tester(this.cell.uischema, this.cell.schema)\n      );\n      if (\n        cell === undefined ||\n        cell.tester(this.cell.uischema, this.cell.schema) === -1\n      ) {\n        return UnknownRenderer;\n      } else {\n        return cell.cell;\n      }\n    },\n  },\n});\n</script>\n","\n\n\n\n\n\n\n\n\n\nimport { defineComponent, CompType } from '../../config';\nimport {\n  coreReducer,\n  Actions,\n  Generate,\n  configReducer,\n  JsonSchema,\n  UISchemaElement,\n  ValidationMode,\n  JsonFormsCore,\n  JsonFormsUISchemaRegistryEntry,\n  JsonFormsRendererRegistryEntry,\n  JsonFormsCellRendererRegistryEntry,\n  CoreActions,\n  i18nReducer,\n  JsonFormsI18nState,\n} from '@jsonforms/core';\nimport { JsonFormsChangeEvent } from '../types';\nimport DispatchRenderer from './DispatchRenderer.vue';\n\nimport Ajv from 'ajv';\n\nconst isObject = (elem: any): elem is Object => {\n  return elem && typeof elem === 'object';\n};\n\nexport default defineComponent({\n  name: 'json-forms',\n  components: {\n    DispatchRenderer,\n  },\n  emits: ['change'],\n  props: {\n    data: {\n      required: true,\n      type: [String, Number, Boolean, Array, Object] as CompType<any, any>,\n    },\n    schema: {\n      required: false,\n      type: [Object, Boolean] as CompType<\n        JsonSchema,\n        [ObjectConstructor, BooleanConstructor]\n      >,\n      default: undefined,\n    },\n    uischema: {\n      required: false,\n      type: Object as CompType<UISchemaElement, ObjectConstructor>,\n      default: undefined,\n    },\n    renderers: {\n      required: true,\n      type: Array as CompType<\n        JsonFormsRendererRegistryEntry[],\n        ArrayConstructor\n      >,\n    },\n    cells: {\n      required: false,\n      type: Array as CompType<\n        JsonFormsCellRendererRegistryEntry[],\n        ArrayConstructor\n      >,\n      default: () => [],\n    },\n    config: {\n      required: false,\n      type: Object as CompType<any, ObjectConstructor>,\n      default: undefined,\n    },\n    readonly: {\n      required: false,\n      type: Boolean,\n      default: false,\n    },\n    uischemas: {\n      required: false,\n      type: Array as CompType<\n        JsonFormsUISchemaRegistryEntry[],\n        ArrayConstructor\n      >,\n      default: () => [],\n    },\n    validationMode: {\n      required: false,\n      type: String as CompType<ValidationMode, StringConstructor>,\n      default: 'ValidateAndShow',\n    },\n    ajv: {\n      required: false,\n      type: Object as CompType<Ajv, ObjectConstructor>,\n      default: undefined,\n    },\n    i18n: {\n      required: false,\n      type: Object as CompType<JsonFormsI18nState, ObjectConstructor>,\n      default: undefined,\n    },\n  },\n  data() {\n    const generatorData = isObject(this.data) ? this.data : {};\n    const schemaToUse: JsonSchema =\n      this.schema ?? Generate.jsonSchema(generatorData);\n    const uischemaToUse: any = this.uischema ?? Generate.uiSchema(schemaToUse);\n\n    const initCore = (): JsonFormsCore => {\n      const initialCore = {\n        data: this.data,\n        schema: schemaToUse,\n        uischema: uischemaToUse,\n      };\n      const core = coreReducer(\n        initialCore,\n        Actions.init(this.data, schemaToUse, uischemaToUse, {\n          validationMode: this.validationMode as ValidationMode,\n          ajv: this.ajv as Ajv,\n        })\n      );\n      return core;\n    };\n    return {\n      schemaToUse,\n      uischemaToUse,\n      jsonforms: {\n        core: initCore(),\n        config: configReducer(undefined, Actions.setConfig(this.config)),\n        i18n: i18nReducer(\n          this.i18n,\n          Actions.updateI18n(\n            this.i18n?.locale,\n            this.i18n?.translate,\n            this.i18n?.translateError\n          )\n        ),\n        renderers: this.renderers,\n        cells: this.cells,\n        uischemas: this.uischemas,\n        readonly: this.readonly,\n      },\n    };\n  },\n  watch: {\n    schema(newSchema) {\n      const generatorData = isObject(this.data) ? this.data : {};\n      this.schemaToUse = newSchema ?? Generate.jsonSchema(generatorData);\n      if (!this.uischema) {\n        this.uischemaToUse = Generate.uiSchema(this.schemaToUse);\n      }\n    },\n    uischema(newUischema) {\n      this.uischemaToUse = newUischema ?? Generate.uiSchema(this.schemaToUse);\n    },\n    renderers(newRenderers) {\n      this.jsonforms.renderers = newRenderers;\n    },\n    cells(newCells) {\n      this.jsonforms.cells = newCells;\n    },\n    uischemas(newUischemas) {\n      this.jsonforms.uischemas = newUischemas;\n    },\n    config: {\n      handler(newConfig) {\n        this.jsonforms.config = configReducer(\n          undefined,\n          Actions.setConfig(newConfig)\n        );\n      },\n      deep: true,\n    },\n    readonly(newReadonly) {\n      this.jsonforms.readonly = newReadonly;\n    },\n    coreDataToUpdate() {\n      this.jsonforms.core = coreReducer(\n        this.jsonforms.core as JsonFormsCore,\n        Actions.updateCore(this.data, this.schemaToUse, this.uischemaToUse, {\n          validationMode: this.validationMode as ValidationMode,\n          ajv: this.ajv as Ajv,\n        })\n      );\n    },\n    eventToEmit(newEvent) {\n      this.$emit('change', newEvent);\n    },\n    i18n: {\n      handler(newI18n) {\n        this.jsonforms.i18n = i18nReducer(\n          this.jsonforms.i18n,\n          Actions.updateI18n(\n            newI18n?.locale,\n            newI18n?.translate,\n            newI18n?.translateError\n          )\n        );\n      },\n      deep: true,\n    },\n  },\n  computed: {\n    coreDataToUpdate(): any {\n      return [\n        this.data,\n        this.schemaToUse,\n        this.uischemaToUse,\n        this.validationMode,\n        this.ajv,\n      ];\n    },\n    eventToEmit(): JsonFormsChangeEvent {\n      return {\n        data: this.jsonforms.core.data,\n        errors: this.jsonforms.core.errors,\n      };\n    },\n  },\n  mounted() {\n    // emit an inital change so clients can react to error validation and default data insertion\n    this.$emit('change', {\n      data: this.jsonforms.core.data || undefined,\n      errors: this.jsonforms.core.errors,\n    });\n  },\n  methods: {\n    dispatch(action: CoreActions) {\n      this.jsonforms.core = coreReducer(\n        this.jsonforms.core as JsonFormsCore,\n        action\n      );\n    },\n  },\n  provide() {\n    return {\n      jsonforms: this.jsonforms,\n      dispatch: this.dispatch,\n    };\n  },\n});\n","<template>\n  <div>\n    <dispatch-renderer\n      v-bind:schema=\"jsonforms.core.schema\"\n      v-bind:uischema=\"jsonforms.core.uischema\"\n      v-bind:path=\"''\"\n    />\n  </div>\n</template>\n<script lang=\"ts\">\nimport { defineComponent, CompType } from '../../config';\nimport {\n  coreReducer,\n  Actions,\n  Generate,\n  configReducer,\n  JsonSchema,\n  UISchemaElement,\n  ValidationMode,\n  JsonFormsCore,\n  JsonFormsUISchemaRegistryEntry,\n  JsonFormsRendererRegistryEntry,\n  JsonFormsCellRendererRegistryEntry,\n  CoreActions,\n  i18nReducer,\n  JsonFormsI18nState,\n} from '@jsonforms/core';\nimport { JsonFormsChangeEvent } from '../types';\nimport DispatchRenderer from './DispatchRenderer.vue';\n\nimport Ajv from 'ajv';\n\nconst isObject = (elem: any): elem is Object => {\n  return elem && typeof elem === 'object';\n};\n\nexport default defineComponent({\n  name: 'json-forms',\n  components: {\n    DispatchRenderer,\n  },\n  emits: ['change'],\n  props: {\n    data: {\n      required: true,\n      type: [String, Number, Boolean, Array, Object] as CompType<any, any>,\n    },\n    schema: {\n      required: false,\n      type: [Object, Boolean] as CompType<\n        JsonSchema,\n        [ObjectConstructor, BooleanConstructor]\n      >,\n      default: undefined,\n    },\n    uischema: {\n      required: false,\n      type: Object as CompType<UISchemaElement, ObjectConstructor>,\n      default: undefined,\n    },\n    renderers: {\n      required: true,\n      type: Array as CompType<\n        JsonFormsRendererRegistryEntry[],\n        ArrayConstructor\n      >,\n    },\n    cells: {\n      required: false,\n      type: Array as CompType<\n        JsonFormsCellRendererRegistryEntry[],\n        ArrayConstructor\n      >,\n      default: () => [],\n    },\n    config: {\n      required: false,\n      type: Object as CompType<any, ObjectConstructor>,\n      default: undefined,\n    },\n    readonly: {\n      required: false,\n      type: Boolean,\n      default: false,\n    },\n    uischemas: {\n      required: false,\n      type: Array as CompType<\n        JsonFormsUISchemaRegistryEntry[],\n        ArrayConstructor\n      >,\n      default: () => [],\n    },\n    validationMode: {\n      required: false,\n      type: String as CompType<ValidationMode, StringConstructor>,\n      default: 'ValidateAndShow',\n    },\n    ajv: {\n      required: false,\n      type: Object as CompType<Ajv, ObjectConstructor>,\n      default: undefined,\n    },\n    i18n: {\n      required: false,\n      type: Object as CompType<JsonFormsI18nState, ObjectConstructor>,\n      default: undefined,\n    },\n  },\n  data() {\n    const generatorData = isObject(this.data) ? this.data : {};\n    const schemaToUse: JsonSchema =\n      this.schema ?? Generate.jsonSchema(generatorData);\n    const uischemaToUse: any = this.uischema ?? Generate.uiSchema(schemaToUse);\n\n    const initCore = (): JsonFormsCore => {\n      const initialCore = {\n        data: this.data,\n        schema: schemaToUse,\n        uischema: uischemaToUse,\n      };\n      const core = coreReducer(\n        initialCore,\n        Actions.init(this.data, schemaToUse, uischemaToUse, {\n          validationMode: this.validationMode as ValidationMode,\n          ajv: this.ajv as Ajv,\n        })\n      );\n      return core;\n    };\n    return {\n      schemaToUse,\n      uischemaToUse,\n      jsonforms: {\n        core: initCore(),\n        config: configReducer(undefined, Actions.setConfig(this.config)),\n        i18n: i18nReducer(\n          this.i18n,\n          Actions.updateI18n(\n            this.i18n?.locale,\n            this.i18n?.translate,\n            this.i18n?.translateError\n          )\n        ),\n        renderers: this.renderers,\n        cells: this.cells,\n        uischemas: this.uischemas,\n        readonly: this.readonly,\n      },\n    };\n  },\n  watch: {\n    schema(newSchema) {\n      const generatorData = isObject(this.data) ? this.data : {};\n      this.schemaToUse = newSchema ?? Generate.jsonSchema(generatorData);\n      if (!this.uischema) {\n        this.uischemaToUse = Generate.uiSchema(this.schemaToUse);\n      }\n    },\n    uischema(newUischema) {\n      this.uischemaToUse = newUischema ?? Generate.uiSchema(this.schemaToUse);\n    },\n    renderers(newRenderers) {\n      this.jsonforms.renderers = newRenderers;\n    },\n    cells(newCells) {\n      this.jsonforms.cells = newCells;\n    },\n    uischemas(newUischemas) {\n      this.jsonforms.uischemas = newUischemas;\n    },\n    config: {\n      handler(newConfig) {\n        this.jsonforms.config = configReducer(\n          undefined,\n          Actions.setConfig(newConfig)\n        );\n      },\n      deep: true,\n    },\n    readonly(newReadonly) {\n      this.jsonforms.readonly = newReadonly;\n    },\n    coreDataToUpdate() {\n      this.jsonforms.core = coreReducer(\n        this.jsonforms.core as JsonFormsCore,\n        Actions.updateCore(this.data, this.schemaToUse, this.uischemaToUse, {\n          validationMode: this.validationMode as ValidationMode,\n          ajv: this.ajv as Ajv,\n        })\n      );\n    },\n    eventToEmit(newEvent) {\n      this.$emit('change', newEvent);\n    },\n    i18n: {\n      handler(newI18n) {\n        this.jsonforms.i18n = i18nReducer(\n          this.jsonforms.i18n,\n          Actions.updateI18n(\n            newI18n?.locale,\n            newI18n?.translate,\n            newI18n?.translateError\n          )\n        );\n      },\n      deep: true,\n    },\n  },\n  computed: {\n    coreDataToUpdate(): any {\n      return [\n        this.data,\n        this.schemaToUse,\n        this.uischemaToUse,\n        this.validationMode,\n        this.ajv,\n      ];\n    },\n    eventToEmit(): JsonFormsChangeEvent {\n      return {\n        data: this.jsonforms.core.data,\n        errors: this.jsonforms.core.errors,\n      };\n    },\n  },\n  mounted() {\n    // emit an inital change so clients can react to error validation and default data insertion\n    this.$emit('change', {\n      data: this.jsonforms.core.data || undefined,\n      errors: this.jsonforms.core.errors,\n    });\n  },\n  methods: {\n    dispatch(action: CoreActions) {\n      this.jsonforms.core = coreReducer(\n        this.jsonforms.core as JsonFormsCore,\n        action\n      );\n    },\n  },\n  provide() {\n    return {\n      jsonforms: this.jsonforms,\n      dispatch: this.dispatch,\n    };\n  },\n});\n</script>\n"]}]}